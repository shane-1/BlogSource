import{_ as e,r as t,o as p,c as i,a as n,b as l,e as s,d as o}from"./app.838aae74.js";const c="/images/2020-11-16-09-47-24.png",r="/images/2020-11-16-09-59-59.png",d="/images/2020-11-16-10-05-59.png",u="/images/2020-11-16-10-20-13.png",m="/images/2020-11-16-12-10-45.png",k="/images/2020-11-16-12-11-33.png",b="/images/2020-11-16-13-28-19.png",v="/images/2020-11-16-13-29-42.png",h="/images/2020-11-16-13-36-59.png",g="/images/2020-11-16-13-40-46.png",f="/images/2020-11-16-13-56-18.png",q="/images/2020-11-16-13-57-57.png",y="/images/2020-11-16-14-00-04.png",x="/images/2020-11-16-14-30-56.png",R="/images/2020-11-16-14-35-36.png",S="/images/2020-11-16-14-53-55.png",_="/images/2020-11-16-14-54-38.png",E="/images/2020-11-16-14-46-02.png",w="/images/2020-11-16-14-57-27.png",O="/images/2020-11-16-14-58-31.png",B="/images/2020-11-16-14-59-47.png",L="/images/2020-11-16-15-01-33.png",A="/images/2020-11-16-15-02-25.png",D="/images/2020-11-16-15-03-16.png",U="/images/2020-11-16-15-16-03.png",N="/images/2020-11-16-15-27-49.png",j="/images/2020-11-16-15-29-39.png",I="/images/2020-11-16-15-31-27.png",T="/images/2020-11-16-15-35-28.png",M="/images/2020-11-18-08-43-54.png",C="/images/2020-11-18-08-44-45.png",F="/images/2020-11-18-08-45-18.png",z="/images/2020-11-18-08-45-50.png",P="/images/2020-11-18-08-46-16.png",H="/images/2020-11-18-08-46-43.png",G="/images/2020-11-18-08-47-13.png",Q="/images/2020-11-18-08-49-50.png",K="/images/2020-11-18-08-53-34.png",J="/images/2020-11-18-08-58-09.png",V="/images/2020-11-18-09-09-05.png",Y="/images/2020-11-18-10-33-32.png",X="/images/2020-11-18-10-38-00.png",Z="/images/2020-11-18-15-55-42.png",W="/images/2020-11-18-16-15-11.png",$="/images/2020-11-18-16-16-54.png",nn="/images/2020-11-18-16-37-01.png",sn="/images/2020-11-18-16-38-37.png",an="/images/2020-11-18-16-42-59.png",en="/images/2020-11-18-17-50-09.png",tn="/images/2020-11-18-18-07-45.png",pn="/images/2020-11-18-18-21-58.png",ln="/images/2020-11-18-18-25-55.png",on="/images/2020-11-18-18-32-35.png",cn="/images/2020-11-18-18-33-26.png",rn="/images/2020-11-18-18-35-49.png",dn="/images/2020-11-18-18-45-34.png",un="/images/2020-11-18-18-47-22.png",mn="/images/2020-11-18-22-24-43.png",kn="/images/2020-11-18-22-27-51.png",bn="/images/2020-11-18-22-31-28.png",vn="/images/2020-11-19-08-51-39.png",hn="/images/2020-11-19-08-52-49.png",gn="/images/2020-11-19-08-55-58.png",fn="/images/2020-11-19-08-56-37.png",qn="/images/2020-11-19-10-10-08.png",yn="/images/2020-11-19-10-11-08.png",xn="/images/2020-11-19-10-11-58.png",Rn="/images/2020-11-19-10-16-16.png",Sn="/images/2020-11-19-10-17-48.png",_n={},En=s('<h1 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h1><h2 id="nosql\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#nosql\u6982\u8FF0" aria-hidden="true">#</a> NoSQL\u6982\u8FF0</h2><h3 id="\u4E3A\u4EC0\u4E48\u8981\u7528nosql" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u8981\u7528nosql" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u8981\u7528NoSQL</h3><blockquote><p>\u5927\u6570\u636E\u65F6\u4EE3,\u4F20\u7EDFSQL\u4E0D\u6EE1\u8DB3\u9700\u6C42</p></blockquote><h4 id="\u5355\u673Amysql\u7684\u5E74\u4EE3" tabindex="-1"><a class="header-anchor" href="#\u5355\u673Amysql\u7684\u5E74\u4EE3" aria-hidden="true">#</a> \u5355\u673AMySQL\u7684\u5E74\u4EE3</h4><p><img src="'+c+'" alt=""></p><p><strong>90s:</strong></p><ul><li>\u4E00\u4E2A\u57FA\u672C\u7684\u7F51\u7AD9\u7684\u8BBF\u95EE\u91CF\u4E00\u822C\u4E0D\u4F1A\u592A\u5927,\u5355\u673A\u591F\u7528</li><li>\u9759\u6001\u7F51\u9875\\\u670D\u52A1\u5668\u538B\u529B\u5C0F</li></ul><p><strong>\u7F51\u7AD9\u74F6\u9888:</strong></p><ul><li><p>\u6570\u636E\u91CF\u592A\u5927,\u4E00\u4E2A\u673A\u5668\u653E\u4E0D\u4E0B!</p></li><li><p>\u6570\u636E\u7684\u7D22\u5F15(B+Tree),\u4E00\u4E2A\u673A\u5668\u5185\u5B58\u653E\u4E0D\u4E0B</p></li><li><p>\u8BBF\u95EE\u91CF(\u8BFB\u5199\u6DF7\u5408),\u4E00\u4E2A\u670D\u52A1\u5668\u4E5F\u653E\u4E0D\u4E0B</p><blockquote><p>\u51FA\u73B0\u4EE5\u4E0A\u4EFB\u4E00\u60C5\u51B5,\u90FD\u9700\u8981\u5347\u7EA7</p></blockquote></li></ul><h4 id="memcached-\u7F13\u5B58-mysql-\u5782\u76F4\u62C6\u5206-\u8BFB\u5199\u5206\u79BB" tabindex="-1"><a class="header-anchor" href="#memcached-\u7F13\u5B58-mysql-\u5782\u76F4\u62C6\u5206-\u8BFB\u5199\u5206\u79BB" aria-hidden="true">#</a> Memcached(\u7F13\u5B58) + MySQL + \u5782\u76F4\u62C6\u5206(\u8BFB\u5199\u5206\u79BB)</h4><p>\u7F51\u7AD980%\u7684\u60C5\u51B5\u90FD\u662F\u5728\u8BFB,\u6BCF\u6B21\u90FD\u8981\u53BB\u67E5\u8BE2\u6570\u636E\u5E93\u7684\u8BDD\u5C31\u5341\u5206\u7684\u9EBB\u70E6!\u6240\u4EE5\u8BF4\u6211\u4EEC\u5E0C\u671B\u51CF\u8F7B\u6570\u636E\u7684\u538B\u529B,\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u7F13\u5B58\u6765\u4FDD\u8BC1\u6548\u7387!</p><p><strong>\u53D1\u5C55\u8FC7\u7A0B:</strong></p><p>\u4F18\u5316\u6570\u636E\u7ED3\u6784\u548C\u7D22\u5F15 --&gt; \u6587\u4EF6\u7F13\u5B58(IO) --&gt; Memcached</p><p><img src="'+r+'" alt=""></p><h4 id="\u5206\u5E93\u5206\u8868-\u6C34\u5E73\u62C6\u5206-mysql\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#\u5206\u5E93\u5206\u8868-\u6C34\u5E73\u62C6\u5206-mysql\u96C6\u7FA4" aria-hidden="true">#</a> \u5206\u5E93\u5206\u8868 + \u6C34\u5E73\u62C6\u5206 + MySQL\u96C6\u7FA4</h4><p>\u6280\u672F\u548C\u4E1A\u52A1\u53D1\u5C55\u7684\u540C\u65F6,\u5BF9\u4EBA\u7684\u8981\u6C42\u8D8A\u6765\u8D8A\u9AD8!</p><p><strong><u>\u672C\u8D28:\u6570\u636E\u5E93(\u8BFB\\\u5199)</u></strong></p><p>\u65E9\u5E74MyISAM: \u8868\u9501,\u5341\u5206\u5F71\u54CD\u6548\u7387!\u9AD8\u5E76\u53D1\u4E0B\u5C31\u4F1A\u51FA\u73B0\u4E25\u91CD\u7684\u9501\u95EE\u9898</p><p>\u8F6C\u6218Innodb:\u884C\u9501</p><p>\u6162\u6162\u7684\u5C31\u5F00\u59CB\u4F7F\u7528\u5206\u5E93\u5206\u8868\u6765\u89E3\u51B3\u5199\u7684\u538B\u529B!MySQL\u5728\u90A3\u4E2A\u5E74\u4EE3\u63A8\u51FA\u4E86<u>\u8868\u5206\u533A</u>!\u8FD9\u4E2A\u5E76\u6CA1\u6709\u591A\u5C11\u516C\u53F8\u4F7F\u7528!</p><p>MySQL\u7684\u96C6\u7FA4,\u5F88\u597D\u6EE1\u8DB3\u4E86\u90A3\u4E2A\u5E74\u4EE3\u7684\u9700\u6C42!</p><p><img src="'+d+'" alt=""></p><h4 id="\u5F53\u4ECA" tabindex="-1"><a class="header-anchor" href="#\u5F53\u4ECA" aria-hidden="true">#</a> \u5F53\u4ECA</h4><p>MySQL\u7B49\u5173\u7CFB\u578B\u6570\u636E\u5E93\u5C31\u4E0D\u591F\u7528\u4E86!\u6570\u636E\u91CF\u5F88\u591A,\u53D8\u5316\u5F88\u5FEB~!</p><p>MySQL\u6709\u70B9\u4F7F\u7528\u5B83\u6765\u5B58\u50A8\u6BD4\u8F83\u5927\u7684\u6587\u4EF6(\u56FE\u7247\\\u535A\u5BA2)!\u6570\u636E\u5E93\u8868\u5F88\u5927,\u6548\u7387\u5C31\u4F4E\u4E86!\u5982\u679C\u6709\u4E00\u79CD\u6570\u636E\u5E93\u6765\u4E13\u95E8\u5904\u7406\u8FD9\u79CD\u6570\u636E.</p><p>MySQL\u7684\u538B\u529B\u5C31\u53D8\u5F97\u5341\u5206\u5C0F(\u7814\u7A76\u5904\u7406\u8FD9\u4E9B\u95EE\u9898!)\u5927\u6570\u636E\u7684IO\u538B\u529B\u4E0B,\u8868\u96C6\u5408\u6CA1\u6CD5\u66F4\u5927!</p><p><img src="'+u+`" alt=""></p><h4 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h4><ul><li>\u7528\u6237\u7684\u4E2A\u4EBA\u4FE1\u606F,\u793E\u4EA4\u7F51\u7EDC,\u5730\u7406\u4F4D\u7F6E.\u7528\u6237\u81EA\u5DF1\u4EA7\u751F\u7684\u6570\u636E,\u7528\u6237\u65E5\u5FD7\u7B49\u7206\u53D1\u5F0F\u589E\u957F!</li><li>\u8FD9\u65F6\u5019\u6211\u4EEC\u5C31\u9700\u8981\u4F7F\u7528NoSQL\u6570\u636E\u5E93,NoSQL\u80FD\u5F88\u597D\u5904\u7406\u4EE5\u4E0A\u60C5\u51B5!</li></ul><h3 id="\u4EC0\u4E48\u662Fnosql" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fnosql" aria-hidden="true">#</a> \u4EC0\u4E48\u662FNoSQL</h3><blockquote><p>NoSQL = Not Only SQL</p></blockquote><p>\u5173\u7CFB\u578B\u6570\u636E\u5E93: \u8868\u683C, \u884C, \u5217 (OPI)</p><p>\u6CDB\u6307\u975E\u5173\u7CFB\u6570\u636E\u5E93\u7684,\u968F\u7740web2.0\u4E92\u8054\u7F51\u7684\u8BDE\u751F!\u4F20\u7EDF\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u5F88\u96BE\u5BF9\u4ED8web2.0\u65F6\u4EE3!\u5C24\u5176\u662F\u8D85\u5927\u89C4\u6A21\u7684\u9AD8\u5E76\u53D1\u7684\u793E\u533A!\u66B4\u9732\u51FA\u5F88\u591A\u96BE\u4EE5\u514B\u670D\u7684\u95EE\u9898,NoSQL\u5728\u5F53\u4ECA\u5927\u6570\u636E\u73AF\u5883\u4E0B\u53D1\u5C55\u5F97\u5341\u5206\u8FC5\u901F,Redis\u662F\u53D1\u5C55\u6700\u5FEB\u7684,\u800C\u4E14\u662F\u6211\u4EEC\u5F53\u4E0B\u5FC5\u987B\u8981\u638C\u63E1\u7684\u6280\u672F!</p><p>\u5F88\u591A\u7684\u6570\u636E\u7C7B\u578B\u7528\u6237\u7684\u4E2A\u4EBA\u4FE1\u606F,\u793E\u4EA4\u7F51\u7EDC,\u5730\u7406\u4F4D\u7F6E.\u8FD9\u4E9B\u6570\u636E\u7C7B\u578B\u7684\u50A8\u5B58\u4E0D\u9700\u8981\u4E00\u4E2A\u56FA\u5B9A\u7684\u683C\u5F0F!\u4E0D\u9700\u8981\u591A\u6708\u7684\u64CD\u4F5C\u5C31\u53EF\u4EE5\u6A2A\u5411\u6269\u5C55\u7684!Map&lt;String,Obeject&gt;\u4F7F\u7528\u952E\u503C\u5BF9\u6765\u63A7\u5236\u7684!</p><h3 id="nosql\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#nosql\u7279\u70B9" aria-hidden="true">#</a> NoSQL\u7279\u70B9</h3><p>\u89E3\u8026</p><ol><li><p>\u65B9\u4FBF\u6269\u5C55(\u6570\u636E\u4E4B\u95F4\u6CA1\u6709\u5173\u7CFB,\u5F88\u597D\u6269\u5C55!)</p></li><li><p>\u5927\u6570\u636E\u91CF\u9AD8\u6027\u80FD(Redis\u4E00\u79D2\u51998\u4E07\u6B21,\u8BFB\u53D611\u4E07,NoSQL\u7684\u7F13\u5B58\u8BB0\u5F55\u7EA7,\u662F\u4E00\u79CD\u7EC6\u7C92\u5EA6\u7684\u7F13\u5B58,\u6027\u80FD\u4F1A\u6BD4\u8F83\u9AD8!)</p></li><li><p>\u6570\u636E\u7C7B\u578B\u662F\u591A\u6837\u6027\u7684!(\u4E0D\u9700\u8981\u4E8B\u5148\u8BBE\u8BA1\u6570\u636E\u5E93!\u968F\u53D6\u968F\u7528!\u5982\u679C\u662F\u6570\u636E\u91CF\u5341\u5206\u5927\u7684\u8868,\u5F88\u591A\u4EBA\u5C31\u65E0\u6CD5\u8BBE\u8BA1\u4E86!)</p></li><li><p>\u4F20\u7EDFRDBMS\u548CNoSQL</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u4F20\u7EDF\u7684RDBMS
- \u7ED3\u6784\u5316\u7EC4\u7EC7
- \u6570\u636E\u548C\u5173\u7CFB\u90FD\u5B58\u5728\u5355\u72EC\u7684\u8868\u4E2D
- \u6570\u636E\u64CD\u4F5C \u6570\u636E\u5B9A\u4E49\u8BED\u8A00
- \u4E25\u683C\u7684\u4E00\u81F4\u6027
- \u57FA\u7840\u7684\u4E8B\u52A1
- ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>NoSQL
- \u4E0D\u4EC5\u4EC5\u662F\u6570\u636E
- \u6CA1\u6709\u56FA\u5B9A\u7684\u67E5\u8BE2\u8BED\u8A00
- \u952E\u503C\u5BF9\u5B58\u50A8, \u5217\u5B58\u50A8, \u6587\u6863\u5B58\u50A8, \u56FE\u5F62\u6570\u636E\u5E93(\u793E\u4EA4\u5173\u7CFB)
- \u6700\u7EC8\u4E00\u81F4\u6027
- CAP\u5B9A\u7406\u548CBASE (\u5F02\u5730\u591A\u6D3B)\u521D\u7EA7\u67B6\u6784
- \u9AD8\u6027\u80FD, \u9AD8\u53EF\u7528, \u9AD8\u6269\u5C55 
- ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="\u4E86\u89E3-3v-3\u9AD8" tabindex="-1"><a class="header-anchor" href="#\u4E86\u89E3-3v-3\u9AD8" aria-hidden="true">#</a> \u4E86\u89E3: 3V+3\u9AD8</h3><p>\u5927\u6570\u636E\u65F6\u4EE3\u76843V: \u4E3B\u8981\u662F\u63CF\u8FF0\u95EE\u9898\u7684</p><ol><li>Volume \u6D77\u91CF</li><li>Variety \u591A\u6837</li><li>Velocity \u5B9E\u65F6</li></ol><p>\u5927\u6570\u636E\u65F6\u4EE3\u76843\u9AD8: \u4E3B\u8981\u662F\u5BF9\u7A0B\u5E8F\u7684\u8981\u6C42</p><ol><li>\u9AD8\u5E76\u53D1</li><li>\u9AD8\u53EF\u62D3(\u968F\u65F6\u6C34\u5E73\u62C6\u5206,\u5F39\u6027\u4F38\u7F29)</li><li>\u9AD8\u6027\u80FD</li></ol><p>\u771F\u6B63\u7684\u516C\u53F8\u5B9E\u8DF5: NoSQL + RDBMS\u4E00\u8D77\u4F7F\u7528\u624D\u662F\u6700\u5F3A\u7684</p><h2 id="\u963F\u91CC\u5DF4\u5DF4\u7684\u67B6\u6784\u6F14\u8FDB" tabindex="-1"><a class="header-anchor" href="#\u963F\u91CC\u5DF4\u5DF4\u7684\u67B6\u6784\u6F14\u8FDB" aria-hidden="true">#</a> \u963F\u91CC\u5DF4\u5DF4\u7684\u67B6\u6784\u6F14\u8FDB</h2><p><strong>\u654F\u6377\u5F00\u53D1 + \u6781\u9650\u7F16\u7A0B</strong></p><p><img src="`+m+'" alt=""><img src="'+k+`" alt=""></p><p>\u6CA1\u6709\u4EC0\u4E48\u662F\u52A0\u4E00\u5C42\u89E3\u51B3\u4E0D\u4E86\u4E86</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 1. \u5546\u54C1\u7684\u57FA\u672C\u4FE1\u606F
\u540D\u79F0\u3001\u4EF7\u683C\u3001\u5546\u5BB6\u4FE1\u606F
\u5173\u7CFB\u578B\u6570\u636E\u5E93\u5C31\u53EF\u4EE5\u89E3\u51B3\u4E86!MySQL/ Oracle(\u6DD8\u5B9D\u65E9\u5E74\u5C31\u53BBIOE\u4E86!-\u738B\u575A-\u63A8\u8350\u6587\u7AE0:\u963F\u91CC\u4E91\u7684\u8FD9\u7FA4\u75AF\u5B50)
\u6DD8\u5B9D\u5185\u90E8\u7684 MySQL\u4E0D\u662F\u5927\u5BB6\u7528\u7684MySQL
# 2. \u5546\u54C1\u7684\u63CF\u8FF0\u3001\u8BC4\u8BBA(\u6587\u5B57\u6BD4\u8F83\u591A)
	\u6587\u6863\u578B\u6570\u636E\u5E93\u4E2D,MongoDB
# 3. \u56FE\u7247
\u5206\u5E03\u5F0F\u6587\u4EF6\u7CFB\u7EDF FastDFS
- \u6DD8\u5B9D TFS
- Google GFS
- Hadop HDFS
- \u963F\u91CC\u4E91 oss
# 4. \u5546\u54C1\u7684\u5173\u952E\u5B57(\u641C\u7D22)
- \u641C\u7D22\u5F15\u64CE solr elasticsearch
- ISerach \u591A\u9686
# 5. \u5546\u54C1\u70ED\u95E8\u7684\u6CE2\u6BB5\u4FE1\u606F
- \u5185\u5B58\u6570\u636E\u5E93
- Redis Tair Memache...
# 6. \u5546\u54C1\u7684\u4EA4\u6613\\\u5916\u90E8\u7684\u5236\u670D\u63A5\u53E3
- \u4E09\u65B9\u5E94\u7528
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u4E2A\u7B80\u5355\u7684\u7F51\u9875\u80CC\u540E\u7684\u6280\u672F\u4E00\u5B9A\u4E0D\u7B80\u5355</p><h3 id="\u5927\u578B\u4E92\u8054\u7F51\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5927\u578B\u4E92\u8054\u7F51\u7684\u95EE\u9898" aria-hidden="true">#</a> \u5927\u578B\u4E92\u8054\u7F51\u7684\u95EE\u9898:</h3><ul><li>\u6570\u636E\u7C7B\u578B\u592A\u591A\u4E86</li><li>\u6570\u636E\u6E90\u7E41\u591A,\u7ECF\u5E38\u91CD\u6784</li><li>\u6570\u636E\u8981\u6539\u9020,\u5927\u9762\u79EF\u6539\u9020</li></ul><h3 id="\u89E3\u51B3\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3\u65B9\u6848" aria-hidden="true">#</a> \u89E3\u51B3\u65B9\u6848</h3><p><img src="`+b+'" alt=""></p><p><img src="'+v+'" alt=""></p><h2 id="nosql\u7684\u56DB\u5927\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#nosql\u7684\u56DB\u5927\u5206\u7C7B" aria-hidden="true">#</a> NoSQL\u7684\u56DB\u5927\u5206\u7C7B</h2><h3 id="kv\u952E\u503C\u5BF9" tabindex="-1"><a class="header-anchor" href="#kv\u952E\u503C\u5BF9" aria-hidden="true">#</a> KV\u952E\u503C\u5BF9:</h3><ul><li>\u65B0\u6D6A: Redis</li><li>\u7F8E\u56FE: Redis + Tair</li><li>\u963F\u91CC\\\u767E\u5EA6: Redis + memecache</li></ul><h3 id="\u6587\u6863\u578B\u6570\u636E\u5E93-bson\u683C\u5F0F\u548Cjson\u4E00\u6837" tabindex="-1"><a class="header-anchor" href="#\u6587\u6863\u578B\u6570\u636E\u5E93-bson\u683C\u5F0F\u548Cjson\u4E00\u6837" aria-hidden="true">#</a> \u6587\u6863\u578B\u6570\u636E\u5E93(bson\u683C\u5F0F\u548Cjson\u4E00\u6837):</h3><ul><li>MongoDB(\u4E00\u822C\u5FC5\u987B\u8981\u638C\u63E1) <ul><li>MongoDB\u662F\u4E00\u4E2A\u57FA\u4E8E\u5206\u5E03\u5F0F\u6587\u4EF6\u50A8\u5B58\u7684\u6570\u636E\u5E93,C++\u7F16\u5199,\u4E3B\u8981\u7528\u6765\u5904\u7406\u5927\u91CF\u7684\u6587\u6863!</li><li>MongoDB\u662F\u4E00\u6837\u4ECB\u4E8E\u5173\u7CFB\u578B\u6570\u636E\u5E93\u548C\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7684\u4E2D\u95F4\u4EA7\u54C1!MongoDB\u662F\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93\u529F\u80FD\u6700\u4E30\u5BCC,\u6700\u50CF\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7684!</li></ul></li><li>ConthDB</li></ul><h3 id="\u5217\u5B58\u50A8\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#\u5217\u5B58\u50A8\u6570\u636E\u5E93" aria-hidden="true">#</a> \u5217\u5B58\u50A8\u6570\u636E\u5E93</h3><ul><li>HBase</li><li>\u5206\u5E03\u5F0F\u6587\u4EF6\u7CFB\u7EDF</li></ul><h3 id="\u56FE\u5173\u7CFB\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#\u56FE\u5173\u7CFB\u6570\u636E\u5E93" aria-hidden="true">#</a> \u56FE\u5173\u7CFB\u6570\u636E\u5E93</h3><p><img src="'+h+'" alt=""></p><ul><li>\u5B83\u4E0D\u662F\u5B58\u56FE\u5F62\u7684,\u653E\u7684\u662F\u5173\u7CFB. \u6BD4\u5982:\u670B\u53CB\u5708\u793E\u4EA4\u7F51\u7EDC,\u5E7F\u544A\u63A8\u8350!</li><li>Neo4j, InfoGrid;</li></ul><h3 id="\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#\u5BF9\u6BD4" aria-hidden="true">#</a> \u5BF9\u6BD4</h3><p><img src="'+g+'" alt=""></p><h2 id="redis\u5165\u95E8" tabindex="-1"><a class="header-anchor" href="#redis\u5165\u95E8" aria-hidden="true">#</a> Redis\u5165\u95E8</h2><h3 id="\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u6982\u8FF0" aria-hidden="true">#</a> \u6982\u8FF0</h3><blockquote><p>Redis (Remote Dictionary Server), \u8FDC\u7A0B\u5B57\u5178\u670D\u52A1</p></blockquote><p>\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4F7F\u7528ANSI C\u8BED\u8A00\u7F16\u5199\u3001\u652F\u6301\u7F51\u7EDC\u3001\u53EF\u57FA\u4E8E\u5185\u5B58\u4EA6\u53EF\u6301\u4E45\u5316\u7684\u65E5\u5FD7\u578B\u3001Key-Value\u6570\u636E\u5E93,\u5E76\u63D0\u4F9B\u591A\u79CD\u8BED\u8A00\u7684APl\u3002\u662F\u5F53\u4E0B\u6700\u70ED\u95E8\u7684NoSQL\u6280\u672F\u4E4B\u4E00!\u4E5F\u88AB\u4EBA\u4EEC\u79F0\u4E3A\u7ED3\u6784\u5316\u6570\u636E\u5E93!</p><h3 id="\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u529F\u80FD" aria-hidden="true">#</a> \u529F\u80FD</h3><ol><li>\u5185\u5B58\u5B58\u50A8, \u6301\u4E45\u5316, \u5185\u5B58\u4E2D\u662F\u65AD\u7535\u5373\u5931, \u6240\u4EE5\u6301\u4E45\u5316**(rdb\\aof)**\u5F88\u91CD\u8981</li><li>\u6548\u7387\u9AD8, \u53EF\u4EE5\u7528\u4E8E\u9AD8\u901F\u7F13\u5B58</li><li>\u53D1\u5E03\u8BA2\u9605\u7CFB\u7EDF</li><li>\u5730\u56FE\u4FE1\u606F\u5206\u6790</li><li>\u8BA1\u65F6\u5668, \u8BA1\u6570\u5668(\u6D4F\u89C8\u91CF)</li><li>...</li></ol><h3 id="\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#\u7279\u6027" aria-hidden="true">#</a> \u7279\u6027</h3><ol><li>\u591A\u6837\u7684\u6570\u636E\u7C7B\u578B</li><li>\u6301\u4E45\u5316</li><li>\u96C6\u7FA4</li><li>\u4E8B\u52A1</li><li>...</li></ol><h3 id="\u76F8\u5173\u8D44\u6E90" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173\u8D44\u6E90" aria-hidden="true">#</a> \u76F8\u5173\u8D44\u6E90</h3><ol><li>\u5B98\u7F51: https://redis.io/</li><li>\u4E2D\u6587\u5B98\u7F51: http://www.redis.cn/</li><li>\u4E0B\u8F7D\u5730\u5740: \u901A\u8FC7\u5B98\u7F51\u4E0B\u8F7D</li></ol><blockquote><p>\u6CE8\u610F: Windows\u7248\u672C\u5728GitHub\u4E0B\u8F7D</p><p><strong>\u63A8\u8350\u5728Linux\u670D\u52A1\u5668\u642D\u5EFA</strong></p></blockquote><h2 id="windows\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#windows\u5B89\u88C5" aria-hidden="true">#</a> Windows\u5B89\u88C5</h2><ol><li><p>\u4E0B\u8F7D\u5B89\u88C5\u5305: https://github.com/dmajkic/redis/releases</p></li><li><p>\u4E0B\u8F7D\u5B8C\u6BD5\u5F97\u5230\u538B\u7F29\u5305:</p></li></ol><p><img src="'+f+'" alt=""></p><ol start="3"><li><p>\u89E3\u538B\u5230\u5BF9\u5E94\u6587\u4EF6\u5939</p></li><li><p>\u5F00\u542FRedis,\u53CC\u51FB\u8FD0\u884C\u670D\u52A1\u5373\u53EF</p></li></ol><p><img src="'+q+'" alt=""></p><ol start="5"><li>\u4F7F\u7528\u5BA2\u6237\u7AEF\u6765\u8FDE\u63A5Redis</li></ol><p><img src="'+y+'" alt=""></p><blockquote><p>\u9ED8\u8BA4\u7AEF\u53E36379</p></blockquote><h2 id="linux\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#linux\u5B89\u88C5" aria-hidden="true">#</a> Linux\u5B89\u88C5</h2><ol><li><p>\u4E0B\u8F7Dtar.gz\u5305</p></li><li><p>\u89E3\u538Bredis\u7684\u5B89\u88C5\u5305(\u63A8\u8350/opt\u76EE\u5F55)</p></li></ol><p><img src="'+x+'" alt=""></p><ol start="3"><li>\u8FDB\u5165\u89E3\u538B\u540E\u7684\u6587\u4EF6,\u53EF\u4EE5\u770B\u5230redis\u7684\u914D\u7F6E\u6587\u4EF6</li></ol><p><img src="'+R+'" alt=""></p><ol start="4"><li><p>\u57FA\u672C\u73AF\u5883\u51C6\u5907</p><ol><li>yum install gcc-c++</li><li>make</li><li>make install <img src="'+S+'" alt=""><img src="'+_+'" alt=""></li></ol></li><li><p>redis\u7684\u9ED8\u8BA4\u5B89\u88C5\u8DEF\u5F84<code>/usr/local/bin</code></p></li></ol><p><img src="'+E+'" alt=""></p><ol start="6"><li>\u5C06redis\u7684\u914D\u7F6E\u6587\u4EF6\u590D\u5236\u5230\u5F53\u524D\u76EE\u5F55</li></ol><p><img src="'+w+'" alt=""></p><ol start="7"><li>redis\u9ED8\u8BA4\u4E0D\u662F\u540E\u53F0\u542F\u52A8,\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6</li></ol><p><img src="'+O+'" alt=""></p><ol start="8"><li>\u542F\u52A8redis\u670D\u52A1<code>redis-server dir/redis.cofig</code></li></ol><p><img src="'+B+'" alt=""></p><ol start="9"><li>\u4F7F\u7528redis-cli\u8FDB\u884C\u8FDE\u63A5\u6D4B\u8BD5<code>redis-cli -p 6379</code></li></ol><p><img src="'+L+'" alt=""></p><ol start="10"><li>\u67E5\u770Bredis\u7684\u8FDB\u7A0B\u662F\u5426\u5F00\u542F<code>ps -ef|grep redis</code></li></ol><p><img src="'+A+'" alt=""></p><ol start="11"><li>\u5173\u95EDredis\u670D\u52A1<code>shut down</code></li></ol><p><img src="'+D+'" alt=""></p><h2 id="\u6D4B\u8BD5\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5\u6027\u80FD" aria-hidden="true">#</a> \u6D4B\u8BD5\u6027\u80FD</h2><p><u>redis-benchmark</u> \u662F\u4E00\u4E2A\u538B\u529B\u6D4B\u8BD5\u5DE5\u5177!</p><p>\u5B98\u65B9\u81EA\u5E26\u7684\u6027\u80FD\u6D4B\u8BD5\u5DE5\u5177</p><h3 id="redis-benchmark\u547D\u4EE4\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#redis-benchmark\u547D\u4EE4\u53C2\u6570" aria-hidden="true">#</a> redis-benchmark\u547D\u4EE4\u53C2\u6570</h3><p><img src="'+U+`" alt=""></p><p><strong>\u7B80\u5355\u6D4B\u8BD5:</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6D4B\u8BD5:100\u4E2A\u5E76\u53D1\u8FDE\u63A5 100000\u8BF7\u6C42</span>
redis-benchmark <span class="token parameter variable">-h</span> localhost <span class="token parameter variable">-p</span> <span class="token number">6379</span> <span class="token parameter variable">-c</span> <span class="token number">100</span> <span class="token parameter variable">-n</span> <span class="token number">100000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+N+'" alt=""></p><p><img src="'+j+'" alt=""></p><h2 id="\u57FA\u7840\u77E5\u8BC6" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u77E5\u8BC6" aria-hidden="true">#</a> \u57FA\u7840\u77E5\u8BC6</h2><p>redis\u9ED8\u8BA4\u670916\u4E2A\u6570\u636E\u5E93</p><p><img src="'+I+`" alt=""></p><p>\u9ED8\u8BA4\u4F7F\u7528\u7684\u662F\u7B2C0\u4E2A\u6570\u636E\u5E93</p><p>\u53EF\u4EE5\u4F7F\u7528select\u8FDB\u884C\u5207\u6362\u6570\u636E\u5E93</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token keyword">select</span> <span class="token number">3</span> <span class="token comment">#\u5207\u6362\u6570\u636E\u5E93</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> DBSIZE <span class="token comment">#\u67E5\u770BDB\u5927\u5C0F</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+T+`" alt=""></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys* <span class="token comment">#\u67E5\u770B\u6240\u6709\u7684key</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6E05\u9664\u5F53\u524D\u6570\u636E\u5E93<code>flush</code></p><p>\u6E05\u9664\u6240\u6709\u6570\u636E\u5E93<code>FLUSHALL</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> flushdb <span class="token comment">#\u6E05\u9664\u5F53\u524D\u6570\u636E\u5E93</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys*
<span class="token punctuation">(</span>empty list or <span class="token builtin class-name">set</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u601D\u8003: \u4E3A\u4EC0\u4E48redis\u9ED8\u8BA4\u7AEF\u53E3\u662F6379!</p><blockquote><p>\u8FFD\u661F(MySQL3306\u5973\u513F\u540D)</p></blockquote><h3 id="redis\u662F\u5355\u7EBF\u7A0B\u7684" tabindex="-1"><a class="header-anchor" href="#redis\u662F\u5355\u7EBF\u7A0B\u7684" aria-hidden="true">#</a> Redis\u662F\u5355\u7EBF\u7A0B\u7684</h3><p>Redis\u662F\u5F88\u5FEB\u7684,\u57FA\u4E8E\u5185\u5B58\u64CD\u4F5C,CPU\u4E0D\u662FRedis\u7684\u6027\u80FD\u74F6\u9888,\u800C\u662F\u6839\u636E\u6781\u5176\u7684\u5185\u5B58\u548C\u7F51\u7EDC\u5E26\u5BBD.\u65E2\u7136\u53EF\u4EE5\u4F7F\u7528\u5355\u7EBF\u7A0B\u6765\u5B9E\u73B0,\u5C31\u4F7F\u7528\u5355\u7EBF\u7A0B\u4E86!</p><p>Redis\u662FC\u8BED\u8A00\u5199\u7684,\u5B98\u65B9\u63D0\u4F9B\u6570\u636E\u4E3A100000+\u7684QPS,\u5B8C\u5168\u4E0D\u6BD4\u540C\u6837\u662F\u4F7F\u7528key-value\u7684Memecache\u5DEE!</p><p><strong>Redis\u4E3A\u4EC0\u4E48\u5355\u7EBF\u7A0B\u8FD8\u5FEB?</strong></p><ol><li><p>\u8BEF\u533A1: \u9AD8\u6027\u80FD\u7684\u670D\u52A1\u5668\u4E00\u5B9A\u662F\u591A\u7EBF\u7A0B\u7684!</p></li><li><p>\u8BEF\u533A2:\u591A\u7EBF\u7A0B\u4E00\u5B9A\u6BD4\u5355\u7EBF\u7A0B\u6548\u7387\u9AD8!</p><blockquote><p>CPU\u4E0A\u4E0B\u6587\u4F1A\u5207\u6362,\u6240\u4EE5\u4E0D\u4E00\u5B9A</p></blockquote></li></ol><p>\u6838\u5FC3:redis\u662F\u5C06\u6240\u6709\u7684\u6570\u636E\u5168\u90E8\u653E\u5728\u5185\u5B58\u4E2D\u7684,\u6240\u4EE5\u8C01\u4F7F\u7528\u5355\u7EBF\u7A0B\u53BB\u64CD\u4F5C\u6548\u7387\u5C31\u662F\u6700\u9AD8\u7684,\u591A\u7EBF\u7A0B(<u>\u5B58\u5728CPU\u4E0A\u4E0B\u6587\u5207\u6362\u7684\u8017\u65F6\u64CD\u4F5C</u>),<strong>\u5BF9\u4E8E\u5185\u5B58\u7CFB\u7EDF\u6765\u8BF4,\u5982\u679C\u6CA1\u6709\u4E0A\u4E0B\u6587\u5207\u6362\u6548\u7387\u5C31\u662F\u6700\u9AD8\u7684!<strong>\u591A\u6B21\u8BFB\u5199\u90FD\u662F\u5728\u4E00\u4E2ACPU\u4E0A\u7684</strong>,\u5728\u5185\u5B58\u60C5\u51B5\u4E0B,\u8FD9\u4E2A\u5C31\u662F\u6700\u4F73\u7684\u65B9\u6848!</strong></p><h2 id="\u4E94\u5927\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u4E94\u5927\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> \u4E94\u5927\u6570\u636E\u7C7B\u578B</h2><p>Redis\u662F\u4E00\u4E2A\u5F00\u6E90(BSD\u8BB8\u53EF)\u7684,\u5185\u5B58\u4E2D\u7684\u6570\u636E\u7ED3\u6784\u5B58\u50A8\u7CFB\u7EDF,\u5B83\u53EF\u4EE5\u7528\u4F5C<strong>\u6570\u636E\u5E93\u3001\u7F13\u5B58\u548C\u6D88\u606F\u4E2D\u95F4\u4EF6MQ</strong>\u3002\u5B83\u652F\u6301\u591A\u79CD\u7C7B\u578B\u7684 \u6570\u636E\u7ED3\u6784,\u5982\u5B57\u7B26\u4E32( strings), \u6563\u5217( hashes), \u5217\u8868( lists), \u96C6\u5408(sets), \u6709\u5E8F\u96C6\u5408( sorted sets)\u4E0E\u8303\u56F4\u67E5\u8BE2, bitmaps, hyperloglogs\u548C\u5730\u7406\u7A7A\u95F4( geospatial)\u7D22\u5F15\u534A\u5F84\u67E5\u8BE2\u3002</p><p>Redis\u5185\u7F6E\u4E86\u590D\u5236( replication),LUA\u811A\u672C(Luascripting), LRU\u9A71\u52A8\u4E8B\u4EF6( LRU eviction), \u4E8B\u52A1( transactions)\u548C\u4E0D\u540C\u7EA7\u522B\u7684\u78C1\u76D8\u6301\u4E45\u5316( persistence),\u5E76\u901A\u8FC7Reds\u54E8\u5175(Sentinel)\u548C\u81EA\u52A8\u5206\u533A( Cluster)\u63D0\u4F9B\u9AD8\u53EF\u7528\u6027( high availability)\u3002</p><h3 id="redis-key" tabindex="-1"><a class="header-anchor" href="#redis-key" aria-hidden="true">#</a> Redis-Key</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys* <span class="token comment">#\u67E5\u770B\u6240\u6709\u7684key</span>
<span class="token punctuation">(</span>empty list or <span class="token builtin class-name">set</span><span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name shane <span class="token comment">#set key</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys*
<span class="token number">1</span><span class="token punctuation">)</span><span class="token string">&quot;name&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys*
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">127,0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS name <span class="token comment">#\u5224\u65AD\u5F53\u524Dkey\u662F\u5426\u5B58\u5728</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS name1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127,0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> move name <span class="token number">1</span> <span class="token comment">#1\u4EE3\u8868\u6570\u636E\u5E93\u4E00</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys*
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name shane
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;shane&quot;</span>
<span class="token number">127.0</span>.0,1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXPIRE name <span class="token number">10</span> <span class="token comment">#\u8BBE\u7F6Ekey\u7684\u8FC7\u671F\u65F6\u95F4,\u5355\u4F4D\u662F\u79D2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127,0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name <span class="token comment">#\u67E5\u770B\u5F53\u524Dkey\u5269\u4F59\u65F6\u95F4</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> tt1 name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> tt1 name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-2</span> <span class="token comment">#\u5DF2\u8FC7\u671F</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> name <span class="token comment">#\u67E5\u770B\u5F53\u524Dkey\u7C7B\u578B</span>
string

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,138),wn={href:"http://www.redis.cn/commands.html",target:"_blank",rel:"noopener noreferrer"},On=o("\u5B98\u7F51\u547D\u4EE4\u67E5\u8BE2\u5730\u5740"),Bn=s(`<h3 id="string-\u5B57\u7B26\u4E32" tabindex="-1"><a class="header-anchor" href="#string-\u5B57\u7B26\u4E32" aria-hidden="true">#</a> String(\u5B57\u7B26\u4E32)</h3><p>90%\u7684\u7A0B\u5E8F\u5458\u53EA\u4F1A\u4F7F\u7528\u7684\u7C7B\u578B</p><h4 id="\u8BBE\u7F6E\u83B7\u53D6" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u7F6E\u83B7\u53D6" aria-hidden="true">#</a> \u8BBE\u7F6E\u83B7\u53D6</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key v1 <span class="token comment">#\u8BBE\u7F6E\u503C</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key	   <span class="token comment">#\u83B7\u5F97\u503C</span>
<span class="token string">&quot;v1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> APPEND key <span class="token string">&quot;hello&quot;</span> <span class="token comment">#\u8FFD\u52A0\u5230\u539F\u5B57\u7B26\u4E32</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> STRLEN key <span class="token comment">#\u67E5\u770B\u5F53\u524D\u5B57\u7B26\u4E32\u957F\u5EA6</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span><span class="token number">7</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u81EA\u589E\u51CF" tabindex="-1"><a class="header-anchor" href="#\u81EA\u589E\u51CF" aria-hidden="true">#</a> \u81EA\u589E\u51CF</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> views <span class="token number">0</span> <span class="token comment">#\u8BBE\u7F6E\u503C</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key	   <span class="token comment">#\u83B7\u5F97\u503C</span>
<span class="token string">&quot;0&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views <span class="token comment">#\u81EA\u589E\u4E00</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decr views <span class="token comment">#\u81EA\u51CF\u4E00</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> INCRBY views <span class="token number">10</span> <span class="token comment">#+10</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DECRBY views <span class="token number">10</span> <span class="token comment">#-10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5B57\u7B26\u4E32\u8303\u56F4" tabindex="-1"><a class="header-anchor" href="#\u5B57\u7B26\u4E32\u8303\u56F4" aria-hidden="true">#</a> \u5B57\u7B26\u4E32\u8303\u56F4</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key <span class="token string">&quot;hello,world!!!&quot;</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GETRANGEkey <span class="token number">0</span> <span class="token number">3</span> <span class="token comment">#\u5B57\u7B26\u4E32\u622A\u53D6[0,3]</span>
<span class="token string">&quot;hell&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GETRANGE <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment">#\u83B7\u5F97\u5168\u90E8\u5B57\u7B26\u4E32 \u548C get key \u4E00\u6837</span>
<span class="token string">&quot;hello,world!!!&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u66FF\u6362" tabindex="-1"><a class="header-anchor" href="#\u66FF\u6362" aria-hidden="true">#</a> \u66FF\u6362</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key abcdefg
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key
<span class="token string">&quot;abcdefg&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SETRANGE key <span class="token number">1</span> xx <span class="token comment">#\u66FF\u6362\u6307\u5B9A\u4F4D\u7F6E\u5F00\u59CB\u7684\u5B57\u7B26\u4E32!</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key
<span class="token string">&quot;axxdefg&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u8FC7\u671F\u65F6\u95F4\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u8FC7\u671F\u65F6\u95F4\u8BBE\u7F6E" aria-hidden="true">#</a> \u8FC7\u671F\u65F6\u95F4\u8BBE\u7F6E</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># setex (set with expire) #\u8BBE\u7F6E\u8FC7\u671F\u65F6\u95F4</span>
<span class="token comment"># setnx (set if not exist) #\u4E0D\u5B58\u5728\u518D\u8BBE\u7F6E(\u5728\u5206\u5E03\u5F0F\u9501\u4E2D\u5E38\u7528)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex key <span class="token number">30</span> <span class="token string">&quot;hello&quot;</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl key
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">26</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey <span class="token string">&quot;redis&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span><span class="token number">1</span> <span class="token comment">#\u8BBE\u7F6E\u6210\u529F</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey <span class="token string">&quot;MongoDB&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span><span class="token number">0</span> <span class="token comment">#\u8BBE\u7F6E\u5931\u8D25</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6279\u91CF\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u6279\u91CF\u64CD\u4F5C" aria-hidden="true">#</a> \u6279\u91CF\u64CD\u4F5C</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset k1 v1 k2 v2 k3 v3
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget k1 k2 k3
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> msetnx k1 v1 k4 v4
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>	<span class="token comment">#\u539F\u5B50\u6027\u64CD\u4F5C,\u4E00\u8D77\u6210\u529F\u4E00\u8D77\u5931\u8D25</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k4
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#\u5BF9\u8C61" aria-hidden="true">#</a> \u5BF9\u8C61</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> user:1 <span class="token punctuation">{</span>name:shane, age:3<span class="token punctuation">}</span><span class="token comment"># \u8BBE\u7F6E\u4E00\u4E2Auser:1\u5BF9\u8C61\u503C\u4E3Ajson\u5B57\u7B26\u6765\u4FDD\u5B58\u4E00\u4E2A\u5BF9\u8C61</span>
<span class="token comment">#\u8FD9\u91CC\u7684key\u662F\u4E00\u4E2A\u5DE7\u5999\u7684\u8BBE\u8BA1: user:{id}:{filed}, \u5982\u6B64\u8BBE\u8BA1\u5728redis\u4E2D\u5B8C\u5168\u53EF\u884C</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset user:1:name shane user:1:age <span class="token number">2</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget user:1:name user:1:age
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="getset" tabindex="-1"><a class="header-anchor" href="#getset" aria-hidden="true">#</a> getset</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset bd redis <span class="token comment">#\u5982\u679C\u4E0D\u5B58\u5728\u503C,\u5219\u8FD4\u56DEnil</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset db mongobd <span class="token comment">#\u5982\u679C\u5B58\u5728\u503C,\u5219\u8FD4\u56DE\u5F53\u524D\u503C\u540E\u8BBE\u7F6E\u65B0\u503C</span>
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">&quot;mongobd&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>String\u7C7B\u578B\u7684\u4F7F\u7528\u573A\u666F: value\u9664\u4E86\u662F\u6211\u4EEC\u7684\u5B57\u7B26\u4E32\u8FD8\u53EF\u4EE5\u662F\u6211\u4EEC\u7684\u6570\u5B57!</p><ul><li>\u8BA1\u6570\u5668</li><li>\u7EDF\u8BA1\u591A\u5355\u4F4D\u7684\u6570\u91CF</li><li>\u7C89\u4E1D\u6570</li><li>\u5BF9\u8C61\u7F13\u5B58\u5B58\u50A8</li></ul><h3 id="list-\u5217\u8868" tabindex="-1"><a class="header-anchor" href="#list-\u5217\u8868" aria-hidden="true">#</a> List(\u5217\u8868)</h3><blockquote><p>\u5728redis\u91CC\u9762,\u6211\u4EEC\u53EF\u4EE5\u628Alist\u73A9\u6210\u6808, \u961F\u5217, \u963B\u585E\u961F\u5217!</p></blockquote><p>\u6240\u6709\u7684list\u547D\u4EE4\u90FD\u662F\u7528l\u5F00\u5934\u7684</p><h4 id="lpush-rpush" tabindex="-1"><a class="header-anchor" href="#lpush-rpush" aria-hidden="true">#</a> LPUSH&amp;RPUSH</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list one <span class="token comment">#\u5C06\u4E00\u4E2A\u6216\u591A\u4E2A\u503C\u63D2\u5165\u5217\u8868\u7684\u5934\u90E8</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list two
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment">#\u83B7\u53D6\u533A\u95F4\u503C,-1\u4E3A\u5168\u90E8</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush list four	<span class="token comment">#\u5C06\u4E00\u4E2A\u6216\u591A\u4E2A\u503C\u63D2\u5165\u5217\u8868\u7684\u5C3E\u90E8</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span> 
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lpop-rpop" tabindex="-1"><a class="header-anchor" href="#lpop-rpop" aria-hidden="true">#</a> LPOP&amp;RPOP</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span> 
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lpop list	<span class="token comment">#\u79FB\u9664\u5934\u90E8\u7B2C\u4E00\u4E2A\u5143\u7D20</span>
<span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpop list	<span class="token comment">#\u79FB\u9664\u5C3E\u90E8\u7B2C\u4E00\u4E2A\u5143\u7D20</span>
<span class="token string">&quot;four&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lindex" tabindex="-1"><a class="header-anchor" href="#lindex" aria-hidden="true">#</a> Lindex</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lindex list <span class="token number">1</span> <span class="token comment">#\u901A\u8FC7\u4E0B\u6807\u83B7\u5F97list\u67D0\u4E00\u4E2A\u503C</span>
<span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lindex list <span class="token number">0</span>
<span class="token string">&quot;two&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="llen" tabindex="-1"><a class="header-anchor" href="#llen" aria-hidden="true">#</a> Llen</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list one 
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list two
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Llen list	<span class="token comment">#\u8FD4\u56DE\u5217\u8868\u7684\u957F\u5EA6</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lrem" tabindex="-1"><a class="header-anchor" href="#lrem" aria-hidden="true">#</a> Lrem</h4><blockquote><p>\u79FB\u9664\u6307\u5B9A\u7684\u503C</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrem list <span class="token number">1</span> one <span class="token comment">#\u79FB\u9664\u4E00\u4E2A\u6307\u5B9A\u5EFA\u503C\u4E3Aone\u7684\u503C</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ltrim" tabindex="-1"><a class="header-anchor" href="#ltrim" aria-hidden="true">#</a> ltrim</h4><p>\u4FEE\u5EFA/\u622A\u65AD</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello1&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello2&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello3&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ltrim mylist <span class="token number">1</span> <span class="token number">2</span> <span class="token comment">#\u901A\u8FC7\u4E0B\u6807\u622A\u53D6\u6307\u5B9A\u7684\u957F\u5EA6,\u8FD9\u4E2Alist\u53EA\u5269\u4E0B\u5DF2\u7ECF\u622A\u53D6\u7684\u90E8\u5206</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE mylist <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="rpoolpush" tabindex="-1"><a class="header-anchor" href="#rpoolpush" aria-hidden="true">#</a> rpoolpush</h4><blockquote><p>\u79FB\u9664\u5E26\u5217\u8868\u6700\u540E\u4E00\u4E2A\u5143\u7D20,\u5E76\u5C06\u5B83\u79FB\u52A8\u5230\u65B0\u7684\u5217\u8868</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello1&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello2&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpoolpush mylist myotherlist
<span class="token string">&quot;hello2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lset" tabindex="-1"><a class="header-anchor" href="#lset" aria-hidden="true">#</a> Lset</h4><blockquote><p>\u5217\u8868\u5FC5\u987B\u5B58\u5728,\u5426\u5219\u62A5\u9519<code>(error) ERR no such key</code></p><p>\u5217\u8868\u7684index\u5FC5\u987B\u5B58\u5728,\u5426\u5219\u62A5\u9519<code>(error) ERR index out of range</code></p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list value
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token string">&quot;value&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset list <span class="token number">0</span> new
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token string">&quot;new&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="linsert" tabindex="-1"><a class="header-anchor" href="#linsert" aria-hidden="true">#</a> linsert</h4><blockquote><p>\u5C06\u67D0\u4E2A\u503C\u63D2\u5165\u5230\u7279\u5B9A\u503C\u7684\u524D\u9762/\u540E\u9762</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpush mylist <span class="token string">&quot;hello1&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LINSERT mylisy before <span class="token string">&quot;hello1&quot;</span> <span class="token string">&quot;hello2&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LINSERT mylisy after <span class="token string">&quot;hello1&quot;</span> <span class="token string">&quot;hello3&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello1&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;hello3&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u7ED3" aria-hidden="true">#</a> \u5C0F\u7ED3</h4><ul><li>list\u5B9E\u9645\u4E3A\u4E00\u4E2A\u94FE\u8868,before Node after, left, right \u90FD\u53EF\u4EE5\u63D2\u5165\u503C</li><li>\u5982\u679Ckey\u4E0D\u5B58\u5728,\u521B\u5EFA\u65B0\u7684\u8138</li><li>\u5982\u679Ckey\u5B58\u5728,\u65B0\u589E\u5185\u5BB9</li><li>\u5982\u679C\u79FB\u9664\u4E86\u6240\u6709\u503C,\u7A7A\u94FE\u8868,\u4E5F\u4EE3\u8868\u4E0D\u5B58\u5728</li><li>\u5728\u4E24\u8FB9\u63D2\u5165\u6216\u6539\u52A8\u503C,\u6548\u7387\u6700\u9AD8!</li><li>\u5728\u4E2D\u95F4\u5143\u7D20\u64CD\u4F5C,\u6548\u7387\u4F4E\u4E00\u70B9!</li></ul><p>\u6D88\u606F\u6392\u961F!\u6D88\u606F\u961F\u5217|(Lpush,Rpop), \u6808(Lpush,Lpop)</p><h3 id="set-\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#set-\u96C6\u5408" aria-hidden="true">#</a> Set(\u96C6\u5408)</h3><p>set\u4E2D\u7684\u503C\u662F\u4E0D\u80FD\u91CD\u590D\u7684</p><h4 id="sadd-smembers" tabindex="-1"><a class="header-anchor" href="#sadd-smembers" aria-hidden="true">#</a> sadd&amp;Smembers</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;hello&quot;</span> <span class="token comment">#\u6DFB\u52A0\u503C</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> I
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;shane&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;jack&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS myset <span class="token comment">#\u67E5\u770B\u96C6\u5408\u6240\u6709\u5143\u7D20</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;he11o&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;jack&quot;</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SISMEMBER myset hello <span class="token comment">#\u67E5\u770B\u6307\u5B9A\u5143\u7D20\u662F\u5426\u5B58\u5728</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SISMEMBER myset world
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="scard" tabindex="-1"><a class="header-anchor" href="#scard" aria-hidden="true">#</a> Scard</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> scard myset <span class="token comment">#\u83B7\u53D6set\u96C6\u5408\u4E2D\u7684\u5185\u5BB9\u5143\u7D20\u4E2A\u6570</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="srem" tabindex="-1"><a class="header-anchor" href="#srem" aria-hidden="true">#</a> SRem</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srem myset he1lo <span class="token comment">#\u79FB\u9664set\u96C6\u5408\u4E2D\u7684\u6307\u5B9A\u5143\u7D20</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> scard myset
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;jack&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="srandmember" tabindex="-1"><a class="header-anchor" href="#srandmember" aria-hidden="true">#</a> Srandmember</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SRANDMEMBER myset
<span class="token string">&quot;shane&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spop" tabindex="-1"><a class="header-anchor" href="#spop" aria-hidden="true">#</a> Spop</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;jack&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;luck&quot;</span>
<span class="token number">127.0</span>.0,1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Spop myset<span class="token comment">#\u968F\u673A\u5220\u9664\u4E00\u4E9Bset\u96C6\u5408\u4E2D\u7684\u5143\u7D20</span>
<span class="token string">&quot;jack&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Spop myset
<span class="token string">&quot;luck&quot;</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="smove" tabindex="-1"><a class="header-anchor" href="#smove" aria-hidden="true">#</a> Smove</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset hello
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset world
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset shane
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset2 <span class="token string">&quot;set2&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smove myset myset2 <span class="token string">&quot;shane&quot;</span>#\u5C06\u4E00\u4E2A\u6307\u5B9A\u7684\u503C,\u79FB\u52A8\u5230\u53E6\u5916\u4E00\u4E2Aset\u96C6\u5408<span class="token operator">!</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS myset2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;set2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6570\u5B57\u96C6\u5408\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u6570\u5B57\u96C6\u5408\u7C7B" aria-hidden="true">#</a> \u6570\u5B57\u96C6\u5408\u7C7B:</h4><ul><li>\u5DEE\u96C6</li><li>\u4EA4\u96C6</li><li>\u5E76\u96C6</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.6.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 a
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> 
<span class="token number">27.0</span>.6.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 b
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 c
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span><span class="token number">5</span> <span class="token function">add</span> key2 c
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 d
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.6.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 e
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SDIFF key1 key2 <span class="token comment">#\u5DEE\u96C6</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SINTER keyl key2<span class="token comment">#\u4EA4\u96C6 \u5171\u540C\u597D\u53CB\u5C31\u53EF\u4EE5\u8FD9\u6837\u5B9E\u73B0</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SUNION key1 key2<span class="token comment">#\u5E76\u96C6</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;e&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;d&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5FAE\u535A,A\u7528\u6237\u5C06\u6240\u6709\u5173\u6CE8\u7684\u4EBA\u653E\u5728\u4E00\u4E2Aset\u96C6\u5408\u4E2D!\u5C06\u4ED6\u7684\u7C89\u4E1D\u4E5F\u653E\u5728\u4E00\u4E2A\u96C6\u5408\u4E2D!</p><p>\u5171\u540C\u5173\u6CE8, \u5171\u540C\u7231\u597D, \u4E8C\u5EA6\u597D\u53CB, \u63A8\u8350\u597D\u53CB!(\u516D\u5EA6\u5206\u5272\u7406\u8BBA)</p><h3 id="hash-\u54C8\u5E0C" tabindex="-1"><a class="header-anchor" href="#hash-\u54C8\u5E0C" aria-hidden="true">#</a> Hash(\u54C8\u5E0C)</h3><p>Map\u96C6\u5408, key-map! \u65F6\u8FD9\u4E2A\u503C\u662F\u4E00\u4E2Amap\u96C6\u5408!\u672C\u8D28\u548Cstring\u7C7B\u578B\u6CA1\u6709\u592A\u5927\u7684\u533A\u522B,\u8FD8\u662F\u4E00\u4E2A\u7B80\u5355\u7684key-value!</p><h5 id="get-set" tabindex="-1"><a class="header-anchor" href="#get-set" aria-hidden="true">#</a> get&amp;set</h5><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash fieldl shane <span class="token comment">#set\u4E00\u4E2Akey-vlaue</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hget myhash field1 <span class="token comment">#\u83B7\u53D6\u4E00\u4E2A\u5B57\u6BB5\u503C</span>
<span class="token string">&quot;shane&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmset myhash field1 hello field2 world <span class="token comment">#set\u591A\u4E2Akey-vlaue</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmget myhash fieldl field2	<span class="token comment">#\u83B7\u53D6\u591A\u4E2A\u5B57\u6BB5\u503C</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;he1lo&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash <span class="token comment">#\u83B7\u53D6\u5168\u90E8\u7684\u6570\u636E</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;fieldl&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;he11o&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;field2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="hdel" tabindex="-1"><a class="header-anchor" href="#hdel" aria-hidden="true">#</a> hdel</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hdel myhash field1 <span class="token comment">#\u5220\u9664hash\u6307\u5B9Akey\u5B57\u6BB5!\u5BF9\u5E94\u7684value\u503C\u4E5F\u5C31\u6D88\u5931\u4E86!</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;field2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="hlen" tabindex="-1"><a class="header-anchor" href="#hlen" aria-hidden="true">#</a> hlen</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmset myhash fieldl hello field2 world
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> HGETALL myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;field2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;field1&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hlen myhash
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="hexists" tabindex="-1"><a class="header-anchor" href="#hexists" aria-hidden="true">#</a> hexists</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0,1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> HEXISTS myhash field1<span class="token comment">#\u5224\u65ADhash\u4E2D\u6307\u5B9A\u5B57\u6BB5\u662F\u5426\u5B58\u5728</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> HEXISTS myhash field3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="hkeys-hvals" tabindex="-1"><a class="header-anchor" href="#hkeys-hvals" aria-hidden="true">#</a> hkeys&amp;hvals</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u53EA\u83B7\u5F97\u6240\u6709 Field</span>
<span class="token comment">#\u53EA\u83B7\u5F97\u6240\u6709 value</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hkeys myhash <span class="token comment">#\u53EA\u83B7\u5F97\u6240\u6709 field</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;field2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;field1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hvals myhash <span class="token comment">#\u53EA\u83B7\u5F97\u6240\u6709value</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;he11o&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="incr-decr" tabindex="-1"><a class="header-anchor" href="#incr-decr" aria-hidden="true">#</a> incr&amp;decr</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash field3 <span class="token number">5</span> <span class="token comment">#\u6307\u5B9A\u589E\u91CF!</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> HINCRBY myhash field3 <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> HINCRBY myhash field3 <span class="token parameter variable">-1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash field4 he11o <span class="token comment">#\u5982\u679C\u4E0D\u5B58\u5728\u5219\u53EF\u4EE5\u8BBE\u7F6E</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash fie1d4 world <span class="token comment">#\u5982\u679C\u5B58\u5728\u5219\u4E0D\u80FD\u8BBE\u7F6E</span>
Integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>hash\u53D8\u66F4\u7684\u6570\u636E user name age,\u6709\u5176\u662F\u7528\u6237\u7684\u4FE1\u606F\u4E4B\u7C7B\u7684,\u7ECF\u5E38\u53D8\u52A8\u7684\u4FE1\u606F! hash\u66F4\u9002\u5408\u4E8E\u5BF9\u8C61\u7684\u5B58\u50A8,string\u66F4\u52A0\u9002\u5408\u5B57\u7B26\u4E32\u7684\u5B58\u50A8</p><h3 id="zset-\u6709\u5E8F\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#zset-\u6709\u5E8F\u96C6\u5408" aria-hidden="true">#</a> Zset(\u6709\u5E8F\u96C6\u5408)</h3><p>\u5728set\u7684\u57FA\u7840\u4E0A, \u589E\u52A0\u4E86\u4E00\u4E2A\u503C,</p><p><code>set k1 v1</code> <code>zset k1 score1 v1</code></p><h4 id="zadd" tabindex="-1"><a class="header-anchor" href="#zadd" aria-hidden="true">#</a> zadd</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379 <span class="token operator">&gt;</span> zadd myset 1one <span class="token comment">#\u6DFB\u52A0\u4E00\u4E2A\u503C</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd myset <span class="token number">2</span> two <span class="token number">3</span> three <span class="token comment">#\u6DFB\u52A0\u591A\u4E2A\u503C</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZRANGE myset <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="zrangebyscore" tabindex="-1"><a class="header-anchor" href="#zrangebyscore" aria-hidden="true">#</a> ZRANGEBYSCORE</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">2500</span> xiaohong
Integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">5000</span> zhangsan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">500</span> shane
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># ZRANGEBYS key min max</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZRANGEBYSCORE salary <span class="token parameter variable">-inf</span> +inf <span class="token comment">#\u663E\u793A\u5168\u90E8\u7528\u6237(\u4ECE\u5C0F\u5230\u5927)!</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsun&quot;</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZREVRANGE salary <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment">#\u663E\u793A\u5168\u90E8\u7528\u6237(\u4ECE\u5927\u5230\u5C0F)!</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsun&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZRANGEBYSCORE salary <span class="token parameter variable">-inf</span> +inf withscores <span class="token comment">#\u663E\u793A\u5168\u90E8\u7684\u7528\u6237\u5E76\u4E14\u9644\u5E26\u6570\u503C</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;5000&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZRANGEBYSCORE salary <span class="token parameter variable">-inf</span> <span class="token number">2500</span> withscores <span class="token comment">#\u9644\u5E26\u6570\u503C\u663E\u793A\u5DE5\u8D44\u5C0F\u4E8E2500\u5458\u5DE5\u7684\u5347\u5E8F\u6392\u5E8F!</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="zrem" tabindex="-1"><a class="header-anchor" href="#zrem" aria-hidden="true">#</a> zrem</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u79FB\u9664rem\u4E2D\u7684\u5143\u7D20</span>
<span class="token number">127.0</span>.0. <span class="token number">1</span>: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> <span class="token parameter variable">-l</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">127.0</span>.0.1: <span class="token number">637</span><span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrem salary xiaohong
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="zcard" tabindex="-1"><a class="header-anchor" href="#zcard" aria-hidden="true">#</a> zcard</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcard salary <span class="token comment"># \u83B7\u53D6\u6709\u5E8F\u96C6\u5408\u4E2D\u7684\u4E2A\u6570</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="zcount" tabindex="-1"><a class="header-anchor" href="#zcount" aria-hidden="true">#</a> zcount</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd myset <span class="token number">1</span> hello
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd myset <span class="token number">2</span> world <span class="token number">3</span> shane
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount myset <span class="token number">1</span> <span class="token number">3</span> <span class="token comment">#\u83B7\u53D6\u6307\u5B9A\u533A\u95F4\u7684\u6210\u5458\u6570\u91CF!</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount myset <span class="token number">1</span> <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6848\u4F8B\u601D\u8DEF: set\u6392\u5E8F \u5B58\u50A8\u73ED\u7EA7\u6210\u7EE9\u8868 \u5DE5\u8D44\u8868\u6392\u5E8F!</p><p>\u666E\u901A\u6D88\u606F(1) ,\u91CD\u8981\u6D88\u606F(2),\u5E26\u6743\u91CD\u8FDB\u884C\u5224\u65AD!</p><p>\u6392\u884C\u699C\u5E94\u7528\u5B9E\u73B0,\u53D6Top N\u6D4B\u8BD5</p><h2 id="\u4E09\u79CD\u7279\u6B8A\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u4E09\u79CD\u7279\u6B8A\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> \u4E09\u79CD\u7279\u6B8A\u6570\u636E\u7C7B\u578B</h2><h3 id="geospatial-\u5730\u7406\u4F4D\u7F6E" tabindex="-1"><a class="header-anchor" href="#geospatial-\u5730\u7406\u4F4D\u7F6E" aria-hidden="true">#</a> geospatial \u5730\u7406\u4F4D\u7F6E</h3><p>Redis\u7684Geo\u5728Redis3,2\u7248\u672C\u5C31\u63A8\u51FA\u4E86!\u8FD9\u4E2A\u529F\u80FD\u53EF\u4EE5\u63A8\u7B97\u5730\u7406\u4F4D\u7F6E\u7684\u4FE1\u606F,\u4E24\u5730\u4E4B\u95F4\u7684\u8DDD\u79BB,\u65B9\u5706\u51E0\u91CC\u7684\u4EBA!</p><p>\u53EF\u4EE5\u67E5\u8BE2\u4E00\u4E9B\u6D4B\u8BD5\u6570\u636E:http://www.jsons.cn/lngcodeinfo/0706D99C19A781A3/</p><p>\u4F7F\u7528\u7ECF\u7EAC\u5EA6\u5B9A\u4F4D\u5730\u7406\u5750\u6807\u5E76\u7528\u4E00\u4E2A\u6709\u5E8F\u96C6\u5408zset\u4FDD\u5B58\uFF0C\u6240\u4EE5zset\u547D\u4EE4\u4E5F\u53EF\u4EE5\u4F7F\u7528</p><ul><li><p><code>geoadd key longitud(\u7ECF\u5EA6) latitude(\u7EAC\u5EA6) member [..]</code> \u5C06\u5177\u4F53\u7ECF\u7EAC\u5EA6\u7684\u5750\u6807\u5B58\u5165\u4E00\u4E2A\u6709\u5E8F\u96C6\u5408</p><blockquote><p>\u89C4\u5219:\u4E24\u6781\u65E0\u6CD5\u76F4\u63A5\u6DFB\u52A0,\u6211\u4EEC\u4E00\u822C\u4F1A\u4E0B\u8F7D\u57CE\u5E02\u6570\u636E,\u6216\u8005\u901A\u8FC7java\u7A0B\u5E8F\u4E00\u6B21\u6027\u5BFC\u5165!</p><p>\u53C2\u6570key \u503C(\u7ECF\u5EA6. \u7EAC\u5EA6. \u540D\u79F0)</p></blockquote></li><li><p><code>geopos key member [member..]</code> \u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u4E00\u4E2A/\u591A\u4E2A\u6210\u5458\u5750\u6807</p></li><li><p><code>geodist key member1 member2 [unit]</code> \u8FD4\u56DE\u4E24\u4E2A\u7ED9\u5B9A\u4F4D\u7F6E\u4E4B\u95F4\u7684\u8DDD\u79BB\u3002\u9ED8\u8BA4\u4EE5\u7C73\u4F5C\u4E3A\u5355\u4F4D\u3002[unit]\u4E2D\u53EF\u4EE5\u4F7F\u7528\u4E0D\u540C\u7684\u5355\u4F4D</p></li><li><p><code>georadius key longitude latitude radius m|km|mi|ft [WITHCOORD][WITHDIST] [WITHHASH] [COUNT count]</code> \u4EE5\u7ED9\u5B9A\u7684\u7ECF\u7EAC\u5EA6\u4E3A\u4E2D\u5FC3\uFF0C \u8FD4\u56DE\u96C6\u5408\u5305\u542B\u7684\u4F4D\u7F6E\u5143\u7D20\u5F53\u4E2D\uFF0C \u4E0E\u4E2D\u5FC3\u7684\u8DDD\u79BB\u4E0D\u8D85\u8FC7\u7ED9\u5B9A\u6700\u5927\u8DDD\u79BB\u7684\u6240\u6709\u4F4D\u7F6E\u5143\u7D20\u3002</p></li><li><p><code>GEORADIUSBYMEMBER key member radius...</code> \u529F\u80FD\u4E0EGEORADIUS\u76F8\u540C\uFF0C\u53EA\u662F\u4E2D\u5FC3\u4F4D\u7F6E\u4E0D\u662F\u5177\u4F53\u7684\u7ECF\u7EAC\u5EA6\uFF0C\u800C\u662F\u4F7F\u7528\u7ED3\u5408\u4E2D<strong>\u5DF2\u6709\u7684\u6210\u5458\u4F5C\u4E3A\u4E2D\u5FC3\u70B9</strong>\u3002</p></li><li><p><code>geohash key member1 [member2..]</code> \u8FD4\u56DE\u4E00\u4E2A\u6216\u591A\u4E2A\u4F4D\u7F6E\u5143\u7D20\u7684Geohash\u8868\u793A\u3002\u4F7F\u7528Geohash\u4F4D\u7F6E52\u70B9\u6574\u6570\u7F16\u7801\u3002</p></li></ul><h4 id="\u6709\u6548\u7ECF\u7EAC\u5EA6" tabindex="-1"><a class="header-anchor" href="#\u6709\u6548\u7ECF\u7EAC\u5EA6" aria-hidden="true">#</a> \u6709\u6548\u7ECF\u7EAC\u5EA6</h4><ul><li>\u6709\u6548\u7684\u7ECF\u5EA6\u4ECE-180\u5EA6\u5230180\u5EA6\u3002</li><li>\u6709\u6548\u7684\u7EAC\u5EA6\u4ECE-85.05112878\u5EA6\u523085.05112878\u5EA6\u3002</li></ul><p>\u6307\u5B9A\u5355\u4F4D\u7684\u53C2\u6570 unit \u5FC5\u987B\u662F\u4EE5\u4E0B\u5355\u4F4D\u7684\u5176\u4E2D\u4E00\u4E2A\uFF1A</p><p>m \u8868\u793A\u5355\u4F4D\u4E3A\u7C73\u3002</p><p>km \u8868\u793A\u5355\u4F4D\u4E3A\u5343\u7C73\u3002</p><p>mi \u8868\u793A\u5355\u4F4D\u4E3A\u82F1\u91CC\u3002</p><p>ft \u8868\u793A\u5355\u4F4D\u4E3A\u82F1\u5C3A\u3002</p><h4 id="\u5173\u4E8Egeoradius\u7684\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u5173\u4E8Egeoradius\u7684\u53C2\u6570" aria-hidden="true">#</a> \u5173\u4E8EGEORADIUS\u7684\u53C2\u6570</h4><p>\u901A\u8FC7georadius\u5C31\u53EF\u4EE5\u5B8C\u6210 \u9644\u8FD1\u7684\u4EBA\u529F\u80FD</p><ul><li><p>withcoord:\u5E26\u4E0A\u5750\u6807</p></li><li><p>withdist:\u5E26\u4E0A\u8DDD\u79BB\uFF0C\u5355\u4F4D\u4E0E\u534A\u5F84\u5355\u4F4D\u76F8\u540C</p></li><li><p>COUNT n : \u53EA\u663E\u793A\u524Dn\u4E2A(\u6309\u8DDD\u79BB\u9012\u589E\u6392\u5E8F)</p></li></ul><p>\u4EE3\u7801:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>----------------georadius---------------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUS china:city <span class="token number">120</span> <span class="token number">30</span> <span class="token number">500</span> km withcoord withdist <span class="token comment"># \u67E5\u8BE2\u7ECF\u7EAC\u5EA6(120,30)\u5750\u6807500km\u534A\u5F84\u5185\u7684\u6210\u5458(withdist\u5E26\u4E0A\u8DDD\u79BB)</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hangzhou&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;29.4151&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;120.20000249147415&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;30.199999888333501&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shanghai&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;205.3611&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;121.40000134706497&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;31.400000253193539&quot;</span>
------------geohash---------------------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geohash china:city yichang shanghai <span class="token comment"># \u83B7\u53D6\u6210\u5458\u7ECF\u7EAC\u5750\u6807\u7684geohash\u8868\u793A</span>

<span class="token string">&quot;wmrjwbr5250&quot;</span>
<span class="token string">&quot;wtw6ds0y300&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="georadiusbymember" tabindex="-1"><a class="header-anchor" href="#georadiusbymember" aria-hidden="true">#</a> GEORADIUSBYMEMBER</h4><p>\u901A\u8FC7\u6307\u5B9A\u5143\u7D20\u627E\u51FA\u5468\u56F4\u7684\u5143\u7D20</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u627E\u51FA\u4F4D\u4E8E\u6307\u5B9A\u5143\u7D20\u5468\u56F4\u7684\u5176\u4ED6\u5143\u7D20
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUSBYMEMBER china:city beijing <span class="token number">1000</span> km
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;beijing&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUSBYMEMBER china:city shanghai <span class="token number">400</span> km
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hangzhou&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shanghai&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="geohash" tabindex="-1"><a class="header-anchor" href="#geohash" aria-hidden="true">#</a> GEOHASH</h4><p>\u8FD4\u56DE11\u4E2A\u5B57\u7B26\u7684Geohash\u5B57\u7B26\u4E32</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u5C06\u4E8C\u7EF4\u7684\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u4E00\u7EF4\u7684\u5B57\u7B26\u4E32,\u5982\u679C\u4E24\u4E2A\u5B57\u7B26\u4E32\u8D8A\u63A5\u8FD1,\u90A3\u4E48\u5219\u8DDD\u79BB\u8D8A\u8FD1!</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geohash china:city beijing chongqi
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;wx4fbxxfkeO&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;wm5xzrybtyo&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hyperloglog-\u57FA\u6570\u7EDF\u8BA1" tabindex="-1"><a class="header-anchor" href="#hyperloglog-\u57FA\u6570\u7EDF\u8BA1" aria-hidden="true">#</a> Hyperloglog(\u57FA\u6570\u7EDF\u8BA1)</h3><blockquote><p>Redis 2.8.9+</p></blockquote><p>Redis HyperLogLog \u662F\u7528\u6765\u505A\u57FA\u6570\u7EDF\u8BA1\u7684\u7B97\u6CD5\uFF0CHyperLogLog \u7684\u4F18\u70B9\u662F\uFF0C<strong>\u5728\u8F93\u5165\u5143\u7D20\u7684\u6570\u91CF\u6216\u8005\u4F53\u79EF\u975E\u5E38\u975E\u5E38\u5927\u65F6\uFF0C\u8BA1\u7B97\u57FA\u6570\u6240\u9700\u7684\u7A7A\u95F4\u603B\u662F\u56FA\u5B9A\u7684\u3001\u5E76\u4E14\u662F\u5F88\u5C0F\u7684\u3002</strong></p><p>\u82B1\u8D39 12 KB \u5185\u5B58\uFF0C\u5C31\u53EF\u4EE5\u8BA1\u7B97\u63A5\u8FD1 2^64 \u4E2A\u4E0D\u540C\u5143\u7D20\u7684\u57FA\u6570\u3002</p><p>\u56E0\u4E3A HyperLogLog \u53EA\u4F1A\u6839\u636E\u8F93\u5165\u5143\u7D20\u6765\u8BA1\u7B97\u57FA\u6570\uFF0C\u800C\u4E0D\u4F1A\u50A8\u5B58\u8F93\u5165\u5143\u7D20\u672C\u8EAB\uFF0C\u6240\u4EE5 HyperLogLog \u4E0D\u80FD\u50CF\u96C6\u5408\u90A3\u6837\uFF0C\u8FD4\u56DE\u8F93\u5165\u7684\u5404\u4E2A\u5143\u7D20\u3002<u>Hyperloglog\u4F1A\u67090.81%\u7684\u9519\u8BEF\u7387,\u4F20\u7EDFUV\u4EFB\u52A1,\u53EF\u4EE5\u5FFD\u7565</u></p><p>\u5176\u5E95\u5C42\u4F7F\u7528string\u6570\u636E\u7C7B\u578B\u3002</p><h4 id="\u4EC0\u4E48\u662F\u57FA\u6570" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662F\u57FA\u6570" aria-hidden="true">#</a> \u4EC0\u4E48\u662F\u57FA\u6570\uFF1F</h4><p>\u6570\u636E\u96C6\u4E2D\u4E0D\u91CD\u590D\u7684\u5143\u7D20\u7684\u4E2A\u6570\u3002</p><h4 id="\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> \u5E94\u7528\u573A\u666F\uFF1A</h4><p>\u7F51\u9875\u7684\u8BBF\u95EE\u91CF\uFF08UV\uFF09\uFF1A\u4E00\u4E2A\u7528\u6237\u591A\u6B21\u8BBF\u95EE\uFF0C\u4E5F\u53EA\u80FD\u7B97\u4F5C\u4E00\u4E2A\u4EBA\u3002</p><p>\u4F20\u7EDF\u5B9E\u73B0\uFF0C\u5B58\u50A8\u7528\u6237\u7684id,\u7136\u540E\u6BCF\u6B21\u8FDB\u884C\u6BD4\u8F83\u3002<strong>\u5F53\u7528\u6237\u53D8\u591A\u4E4B\u540E\u8FD9\u79CD\u65B9\u5F0F\u53CA\u5176\u6D6A\u8D39\u7A7A\u95F4\uFF0C\u800C\u6211\u4EEC\u7684\u76EE\u7684\u53EA\u662F\u8BA1\u6570\uFF0CHyperloglog\u5C31\u80FD\u5E2E\u52A9\u6211\u4EEC\u5229\u7528\u6700\u5C0F\u7684\u7A7A\u95F4\u5B8C\u6210\u3002</strong></p><ul><li><code>PFADD key element1 [elememt2..]</code> \u6DFB\u52A0\u6307\u5B9A\u5143\u7D20\u5230 HyperLogLog\u4E2D</li><li><code>PFCOUNT key [key]</code> \u8FD4\u56DE\u7ED9\u5B9A HyperLogLog \u7684\u57FA\u6570\u4F30\u7B97\u503C\u3002</li><li><code>PFMERGE destkey sourcekey [sourcekey..]</code> \u5C06\u591A\u4E2A HyperLogLog \u5408\u5E76\u4E3A\u4E00\u4E2A HyperLogLog</li></ul><h4 id="\u4EE3\u7801\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u793A\u4F8B" aria-hidden="true">#</a> \u4EE3\u7801\u793A\u4F8B</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>----------PFADD--PFCOUNT---------------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFADD myelemx a b c d e f g h i j k <span class="token comment"># \u6DFB\u52A0\u5143\u7D20</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> myelemx <span class="token comment"># hyperloglog\u5E95\u5C42\u4F7F\u7528String</span>
string
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFCOUNT myelemx <span class="token comment"># \u4F30\u7B97myelemx\u7684\u57FA\u6570</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFADD myelemy i j k z m c b <span class="token function">v</span> p q s
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFCOUNT myelemy
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
----------------PFMERGE-----------------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFMERGE myelemz myelemx myelemy <span class="token comment"># \u5408\u5E76myelemx\u548Cmyelemy\u6210\u4E3Amyelemz</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFCOUNT myelemz <span class="token comment"># \u4F30\u7B97\u57FA\u6570</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">17</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u5141\u8BB8\u5BB9\u9519, \u90A3\u4E48\u4E00\u5B9A\u53EF\u4EE5\u4F7F\u7528Hyperloglog!</p><p>\u5982\u679C\u4E0D\u5141\u8BB8\u5BB9\u9519, \u5C31\u4F7F\u7528set\u6216\u8005\u81EA\u5DF1\u7684\u6570\u636E\u7C7B\u578B\u5373\u53EF!</p><h3 id="bitmaps-\u4F4D\u56FE" tabindex="-1"><a class="header-anchor" href="#bitmaps-\u4F4D\u56FE" aria-hidden="true">#</a> BitMaps(\u4F4D\u56FE)</h3><p>\u4F7F\u7528\u4F4D\u5B58\u50A8\uFF0C\u4FE1\u606F\u72B6\u6001\u53EA\u6709 0 \u548C 1\u4E24\u4E2A\u72B6\u6001.</p><p>Bitmap\u662F\u4E00\u4E32\u8FDE\u7EED\u76842\u8FDB\u5236\u6570\u5B57\uFF080\u62161\uFF09\uFF0C\u6BCF\u4E00\u4F4D\u6240\u5728\u7684\u4F4D\u7F6E\u4E3A\u504F\u79FB(offset)\uFF0C\u5728bitmap\u4E0A\u53EF\u6267\u884CAND,OR,XOR,NOT\u4EE5\u53CA\u5176\u5B83\u4F4D\u64CD\u4F5C\u3002</p><h4 id="\u5E94\u7528\u573A\u666F-1" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u573A\u666F-1" aria-hidden="true">#</a> \u5E94\u7528\u573A\u666F:</h4><p>\u7B7E\u5230\u7EDF\u8BA1\u3001\u72B6\u6001\u7EDF\u8BA1</p><ul><li><code>setbit key offset value</code> \u4E3A\u6307\u5B9Akey\u7684offset\u4F4D\u8BBE\u7F6E\u503C</li><li><code>getbit key offset</code> \u83B7\u53D6offset\u4F4D\u7684\u503C</li><li><code>bitcount key [start end]</code> \u7EDF\u8BA1\u5B57\u7B26\u4E32\u88AB\u8BBE\u7F6E\u4E3A1\u7684bit\u6570\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u7EDF\u8BA1\u8303\u56F4\u6309\u5B57\u8282</li><li><code>bitop operration destkey key[key..]</code> \u5BF9\u4E00\u4E2A\u6216\u591A\u4E2A\u4FDD\u5B58\u4E8C\u8FDB\u5236\u4F4D\u7684\u5B57\u7B26\u4E32 key \u8FDB\u884C\u4F4D\u5143\u64CD\u4F5C\uFF0C\u5E76\u5C06\u7ED3\u679C\u4FDD\u5B58\u5230 destkey \u4E0A\u3002</li><li><code>BITPOS key bit [start] [end]</code> \u8FD4\u56DE\u5B57\u7B26\u4E32\u91CC\u9762\u7B2C\u4E00\u4E2A\u88AB\u8BBE\u7F6E\u4E3A1\u6216\u80050\u7684bit\u4F4D\u3002start\u548Cend\u53EA\u80FD\u6309\u5B57\u8282,\u4E0D\u80FD\u6309\u4F4D</li></ul><h4 id="\u4EE3\u7801\u793A\u4F8B-1" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u793A\u4F8B-1" aria-hidden="true">#</a> \u4EE3\u7801\u793A\u4F8B</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>------------setbit--getbit--------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">0</span> <span class="token number">1</span> <span class="token comment"># \u8BBE\u7F6Esign\u7684\u7B2C0\u4F4D\u4E3A 1 </span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">2</span> <span class="token number">1</span> <span class="token comment"># \u8BBE\u7F6Esign\u7684\u7B2C2\u4F4D\u4E3A 1  \u4E0D\u8BBE\u7F6E\u9ED8\u8BA4 \u662F0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">3</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">5</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> sign
string
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit sign <span class="token number">2</span> <span class="token comment"># \u83B7\u53D6\u7B2C2\u4F4D\u7684\u6570\u503C</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit sign <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit sign <span class="token number">4</span> <span class="token comment"># \u672A\u8BBE\u7F6E\u9ED8\u8BA4\u662F0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
-----------bitcount----------------------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> BITCOUNT sign <span class="token comment"># \u7EDF\u8BA1sign\u4E2D\u4E3A1\u7684\u4F4D\u6570</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8B\u52A1" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1" aria-hidden="true">#</a> \u4E8B\u52A1</h2><p><strong>Redis\u7684\u5355\u6761\u547D\u4EE4\u662F\u4FDD\u8BC1\u539F\u5B50\u6027\u7684\uFF0C\u4F46\u662Fredis\u4E8B\u52A1\u4E0D\u80FD\u4FDD\u8BC1\u539F\u5B50\u6027.</strong></p><h4 id="redis\u4E8B\u52A1\u672C\u8D28" tabindex="-1"><a class="header-anchor" href="#redis\u4E8B\u52A1\u672C\u8D28" aria-hidden="true">#</a> Redis\u4E8B\u52A1\u672C\u8D28:</h4><p><u>\u4E00\u7EC4\u547D\u4EE4\u7684\u96C6\u5408!</u></p><p>----------------- \u961F\u5217 set set set \u6267\u884C -------------------</p><p>\u4E8B\u52A1\u4E2D\u6BCF\u6761\u547D\u4EE4\u90FD\u4F1A\u88AB\u5E8F\u5217\u5316\uFF0C\u6267\u884C\u8FC7\u7A0B\u4E2D\u6309\u987A\u5E8F\u6267\u884C\uFF0C\u4E0D\u5141\u8BB8\u5176\u4ED6\u547D\u4EE4\u8FDB\u884C\u5E72\u6270\u3002</p><ul><li>\u4E00\u6B21\u6027</li><li>\u987A\u5E8F\u6027</li><li>\u6392\u4ED6\u6027</li></ul><p>Redis\u4E8B\u52A1\u6CA1\u6709\u9694\u79BB\u7EA7\u522B\u7684\u6982\u5FF5</p><p>Redis\u5355\u6761\u547D\u4EE4\u662F\u4FDD\u8BC1\u539F\u5B50\u6027\u7684\uFF0C\u4F46\u662F\u4E8B\u52A1\u4E0D\u4FDD\u8BC1\u539F\u5B50\u6027\uFF01</p><h4 id="redis\u4E8B\u52A1\u64CD\u4F5C\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#redis\u4E8B\u52A1\u64CD\u4F5C\u8FC7\u7A0B" aria-hidden="true">#</a> Redis\u4E8B\u52A1\u64CD\u4F5C\u8FC7\u7A0B</h4><ul><li>\u5F00\u542F\u4E8B\u52A1\uFF08multi\uFF09</li><li>\u547D\u4EE4\u5165\u961F</li><li>\u6267\u884C\u4E8B\u52A1\uFF08exec\uFF09</li></ul><p>\u6240\u4EE5\u4E8B\u52A1\u4E2D\u7684\u547D\u4EE4\u5728\u52A0\u5165\u65F6\u90FD\u6CA1\u6709\u88AB\u6267\u884C\uFF0C\u76F4\u5230\u63D0\u4EA4\u65F6\u624D\u4F1A\u5F00\u59CB\u6267\u884C(Exec)\u4E00\u6B21\u6027\u5B8C\u6210\u3002</p><h4 id="\u6B63\u5E38\u6267\u884C" tabindex="-1"><a class="header-anchor" href="#\u6B63\u5E38\u6267\u884C" aria-hidden="true">#</a> \u6B63\u5E38\u6267\u884C</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi <span class="token comment"># \u5F00\u542F\u4E8B\u52A1</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1 <span class="token comment"># \u547D\u4EE4\u5165\u961F</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k2 v2 <span class="token comment"># ..</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k3 v3
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span> <span class="token comment"># \u4E8B\u52A1\u6267\u884C</span>
<span class="token number">1</span><span class="token punctuation">)</span> OK
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> OK
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u53D6\u6D88\u4E8B\u52A1-discurd" tabindex="-1"><a class="header-anchor" href="#\u53D6\u6D88\u4E8B\u52A1-discurd" aria-hidden="true">#</a> \u53D6\u6D88\u4E8B\u52A1(discurd)</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DISCARD <span class="token comment"># \u653E\u5F03\u4E8B\u52A1</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXEC 
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR EXEC without MULTI <span class="token comment"># \u5F53\u524D\u672A\u5F00\u542F\u4E8B\u52A1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1 <span class="token comment"># \u88AB\u653E\u5F03\u4E8B\u52A1\u4E2D\u547D\u4EE4\u5E76\u672A\u6267\u884C</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u4E8B\u52A1\u9519\u8BEF" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1\u9519\u8BEF" aria-hidden="true">#</a> \u4E8B\u52A1\u9519\u8BEF</h4><blockquote><p>\u4EE3\u7801\u8BED\u6CD5\u9519\u8BEF\uFF08\u7F16\u8BD1\u65F6\u5F02\u5E38\uFF09\u6240\u6709\u7684\u547D\u4EE4\u90FD\u4E0D\u6267\u884C</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> error k1 <span class="token comment"># \u8FD9\u662F\u4E00\u6761\u8BED\u6CD5\u9519\u8BEF\u547D\u4EE4</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR unknown <span class="token builtin class-name">command</span> <span class="token variable"><span class="token variable">\`</span>error<span class="token variable">\`</span></span>, with args beginning with: <span class="token variable"><span class="token variable">\`</span>k1<span class="token variable">\`</span></span>, <span class="token comment"># \u4F1A\u62A5\u9519\u4F46\u662F\u4E0D\u5F71\u54CD\u540E\u7EED\u547D\u4EE4\u5165\u961F </span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k2
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXEC
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> EXECABORT Transaction discarded because of previous errors. <span class="token comment"># \u6267\u884C\u62A5\u9519</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1 
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span> <span class="token comment"># \u5176\u4ED6\u547D\u4EE4\u5E76\u6CA1\u6709\u88AB\u6267\u884C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u4EE3\u7801\u903B\u8F91\u9519\u8BEF (\u8FD0\u884C\u65F6\u5F02\u5E38) **\u5176\u4ED6\u547D\u4EE4\u53EF\u4EE5\u6B63\u5E38\u6267\u884C **</p><blockquote><p>\u6240\u4EE5\u4E0D\u4FDD\u8BC1\u4E8B\u52A1\u539F\u5B50\u6027</p></blockquote></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> INCR k1 <span class="token comment"># \u8FD9\u6761\u547D\u4EE4\u903B\u8F91\u9519\u8BEF\uFF08\u5BF9\u5B57\u7B26\u4E32\u8FDB\u884C\u589E\u91CF\uFF09</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k2
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>
<span class="token number">1</span><span class="token punctuation">)</span> OK
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR value is not an integer or out of range <span class="token comment"># \u8FD0\u884C\u65F6\u62A5\u9519</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span> <span class="token comment"># \u5176\u4ED6\u547D\u4EE4\u6B63\u5E38\u6267\u884C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u867D\u7136\u4E2D\u95F4\u6709\u4E00\u6761\u547D\u4EE4\u62A5\u9519\u4E86\uFF0C\u4F46\u662F\u540E\u9762\u7684\u6307\u4EE4\u4F9D\u65E7\u6B63\u5E38\u6267\u884C\u6210\u529F\u4E86\u3002 \u6240\u4EE5\u8BF4<strong>Redis\u5355\u6761\u6307\u4EE4\u4FDD\u8BC1\u539F\u5B50\u6027\uFF0C\u4F46\u662FRedis\u4E8B\u52A1\u4E0D\u80FD\u4FDD\u8BC1\u539F\u5B50\u6027\u3002</strong></p><h3 id="\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#\u76D1\u63A7" aria-hidden="true">#</a> \u76D1\u63A7</h3><h4 id="\u60B2\u89C2\u9501" tabindex="-1"><a class="header-anchor" href="#\u60B2\u89C2\u9501" aria-hidden="true">#</a> \u60B2\u89C2\u9501\uFF1A</h4><ul><li>\u5F88\u60B2\u89C2\uFF0C\u8BA4\u4E3A\u4EC0\u4E48\u65F6\u5019\u90FD\u4F1A\u51FA\u73B0\u95EE\u9898\uFF0C\u65E0\u8BBA\u505A\u4EC0\u4E48\u90FD\u4F1A\u52A0\u9501</li></ul><h4 id="\u4E50\u89C2\u9501" tabindex="-1"><a class="header-anchor" href="#\u4E50\u89C2\u9501" aria-hidden="true">#</a> \u4E50\u89C2\u9501\uFF1A</h4><ul><li>\u5F88\u4E50\u89C2\uFF0C\u8BA4\u4E3A\u4EC0\u4E48\u65F6\u5019\u90FD\u4E0D\u4F1A\u51FA\u73B0\u95EE\u9898\uFF0C\u6240\u4EE5\u4E0D\u4F1A\u4E0A\u9501\uFF01\u66F4\u65B0\u6570\u636E\u7684\u65F6\u5019\u53BB\u5224\u65AD\u4E00\u4E0B\uFF0C\u5728\u6B64\u671F\u95F4\u662F\u5426\u6709\u4EBA\u4FEE\u6539\u8FC7\u8FD9\u4E2A\u6570\u636E</li><li>\u83B7\u53D6version</li><li>\u66F4\u65B0\u7684\u65F6\u5019\u6BD4\u8F83version</li></ul><p>\u4F7F\u7528watch key\u76D1\u63A7\u6307\u5B9A\u6570\u636E\uFF0C\u76F8\u5F53\u4E8E\u4E50\u89C2\u9501\u52A0\u9501\u3002</p><h4 id="\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801" aria-hidden="true">#</a> \u4EE3\u7801</h4><p>\u6B63\u5E38\u6267\u884C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> money <span class="token number">100</span> <span class="token comment"># \u8BBE\u7F6E\u4F59\u989D:100</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> use <span class="token number">0</span> <span class="token comment"># \u652F\u51FA\u4F7F\u7528:0</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money <span class="token comment"># \u76D1\u89C6money (\u4E0A\u9501)</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DECRBY money <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> INCRBY use <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span> <span class="token comment"># \u76D1\u89C6\u503C\u6CA1\u6709\u88AB\u4E2D\u9014\u4FEE\u6539\uFF0C\u4E8B\u52A1\u6B63\u5E38\u6267\u884C</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">80</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u591A\u7EBF\u7A0B\u4FEE\u6539\u503C\uFF0C\u4F7F\u7528watch\u53EF\u4EE5\u5F53\u505Aredis\u7684\u4E50\u89C2\u9501\u64CD\u4F5C\uFF08\u76F8\u5F53\u4E8Egetversion\uFF09</p><p>\u6211\u4EEC\u542F\u52A8\u53E6\u5916\u4E00\u4E2A\u5BA2\u6237\u7AEF\u6A21\u62DF\u63D2\u961F\u7EBF\u7A0B\u3002</p><p>\u7EBF\u7A0B1\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money <span class="token comment"># money\u4E0A\u9501</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DECRBY money <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> INCRBY use <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>     <span class="token comment"># \u6B64\u65F6\u4E8B\u52A1\u5E76\u6CA1\u6709\u6267\u884C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6A21\u62DF\u7EBF\u7A0B\u63D2\u961F\uFF0C\u7EBF\u7A0B2\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> INCRBY money <span class="token number">500</span> <span class="token comment"># \u4FEE\u6539\u4E86\u7EBF\u7A0B\u4E00\u4E2D\u76D1\u89C6\u7684money</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">600</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u56DE\u5230\u7EBF\u7A0B1\uFF0C\u6267\u884C\u4E8B\u52A1\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXEC <span class="token comment"># \u6267\u884C\u4E4B\u524D\uFF0C\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u4FEE\u6539\u4E86\u6211\u4EEC\u7684\u503C\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u4F1A\u5BFC\u81F4\u4E8B\u52A1\u6267\u884C\u5931\u8D25</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span> <span class="token comment"># \u6CA1\u6709\u7ED3\u679C\uFF0C\u8BF4\u660E\u4E8B\u52A1\u6267\u884C\u5931\u8D25</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get money <span class="token comment"># \u7EBF\u7A0B2 \u4FEE\u6539\u751F\u6548</span>
<span class="token string">&quot;600&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get use <span class="token comment"># \u7EBF\u7A0B1\u4E8B\u52A1\u6267\u884C\u5931\u8D25\uFF0C\u6570\u503C\u6CA1\u6709\u88AB\u4FEE\u6539</span>
<span class="token string">&quot;0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u89E3\u9501\u83B7\u53D6\u6700\u65B0\u503C\uFF0C\u7136\u540E\u518D\u52A0\u9501\u8FDB\u884C\u4E8B\u52A1\u3002</p><p>unwatch\u8FDB\u884C\u89E3\u9501\u3002</p><p><strong>\u6CE8\u610F\uFF1A\u6BCF\u6B21\u63D0\u4EA4\u6267\u884Cexec\u540E\u90FD\u4F1A\u81EA\u52A8\u91CA\u653E\u9501\uFF0C\u4E0D\u7BA1\u662F\u5426\u6210\u529F</strong></p><h2 id="jedis" tabindex="-1"><a class="header-anchor" href="#jedis" aria-hidden="true">#</a> Jedis</h2><p>\u4F7F\u7528Java\u6765\u64CD\u4F5CRedis\uFF0CJedis\u662FRedis\u5B98\u65B9\u63A8\u8350\u4F7F\u7528\u7684Java\u8FDE\u63A5redis\u7684\u5BA2\u6237\u7AEF\u3002</p><ol><li>\u5BFC\u5165\u4F9D\u8D56</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5BFC\u5165jredis\u7684\u5305--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--fastjson--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.70<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u7801\u6D4B\u8BD5</li></ol><blockquote><ul><li>\u8FDE\u63A5\u6570\u636E\u5E93</li><li>\u64CD\u4F5C\u547D\u4EE4</li><li>\u65AD\u5F00\u8FDE\u63A5</li></ul></blockquote><p>\u4EE3\u7801\u793A\u4F8B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestPing</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;192.168.xx.xxx&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> response <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// PONG</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FAPONG</p><h3 id="\u5E38\u7528\u7684api" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u7684api" aria-hidden="true">#</a> \u5E38\u7528\u7684API</h3><p>string\u3001list\u3001set\u3001hash\u3001zset</p><p><strong>\u6240\u6709\u7684api\u547D\u4EE4\uFF0C\u5C31\u662F\u6211\u4EEC\u5BF9\u5E94\u7684\u4E0A\u9762\u5B66\u4E60\u7684\u6307\u4EE4\uFF0C\u4E00\u4E2A\u90FD\u6CA1\u6709\u53D8\u5316\uFF01</strong></p><div class="language-JAVA ext-JAVA line-numbers-mode"><pre class="language-JAVA"><code>public class TestTX {
    public static void main(String[] args) {
        Jedis jedis = new Jedis(&quot;127.0.0.1&quot;, 6379);
        jedis.flushDB();
        JSONObject jsonObject = new JSONObject();
        jsonObject.put(&quot;hello&quot;,&quot;world&quot;);
        jsonObject.put(&quot;name&quot;,&quot;kuangshen&quot;);
        // \u5F00\u542F\u4E8B\u52A1
        Transaction multi = jedis.multi();
        String result = jsonObject.toJSONString();
        // jedis.watch(result)
        try {
            multi.set(&quot;user1&quot;,result);
            multi.set(&quot;user2&quot;,result);
            int i = 1/0 ; // \u4EE3\u7801\u629B\u51FA\u5F02\u5E38\u4E8B\u52A1\uFF0C\u6267\u884C\u5931\u8D25\uFF01
            multi.exec(); // \u6267\u884C\u4E8B\u52A1\uFF01
        } catch (Exception e) {
            multi.discard(); // \u653E\u5F03\u4E8B\u52A1
            e.printStackTrace();
        } finally {
            System.out.println(jedis.get(&quot;user1&quot;));
            System.out.println(jedis.get(&quot;user2&quot;));
            jedis.close(); // \u5173\u95ED\u8FDE\u63A5
        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springboot\u6574\u5408" tabindex="-1"><a class="header-anchor" href="#springboot\u6574\u5408" aria-hidden="true">#</a> SpringBoot\u6574\u5408</h2><p>SpringBoot \u64CD\u4F5C\u6570\u636E\uFF1Aspring-data jpa jdbc mongodb redis\uFF01</p><p>SpringData \u4E5F\u662F\u548C SpringBoot \u9F50\u540D\u7684\u9879\u76EE\uFF01</p><blockquote><p><strong>\u8BF4\u660E\uFF1A \u5728 SpringBoot2.x \u4E4B\u540E\uFF0C\u539F\u6765\u4F7F\u7528\u7684jedis \u88AB\u66FF\u6362\u4E3A\u4E86 lettuce</strong></p></blockquote><p>jedis : \u91C7\u7528\u7684\u76F4\u8FDE\uFF0C\u591A\u4E2A\u7EBF\u7A0B\u64CD\u4F5C\u7684\u8BDD\uFF0C\u662F\u4E0D\u5B89\u5168\u7684\uFF0C\u5982\u679C\u60F3\u8981\u907F\u514D\u4E0D\u5B89\u5168\u7684\uFF0C\u4F7F\u7528 jedis pool \u8FDE\u63A5\u6C60\uFF01 \u66F4\u50CF BIO \u6A21\u5F0F</p><p>lettuce : \u91C7\u7528netty\uFF0C\u5B9E\u4F8B\u53EF\u4EE5\u518D\u591A\u4E2A\u7EBF\u7A0B\u4E2D\u8FDB\u884C\u5171\u4EAB\uFF0C\u4E0D\u5B58\u5728\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7684\u60C5\u51B5\uFF01\u53EF\u4EE5\u51CF\u5C11\u7EBF\u7A0B\u6570\u636E\u4E86\uFF0C\u66F4\u50CF NIO \u6A21\u5F0F</p><p>\u6E90\u7801\u5206\u6790\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;redisTemplate&quot;</span><span class="token punctuation">)</span> 
<span class="token comment">// \u6211\u4EEC\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u4E00\u4E2AredisTemplate\u6765\u66FF\u6362\u8FD9\u4E2A\u9ED8\u8BA4\u7684\uFF01</span>
<span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">{</span>
<span class="token comment">// \u9ED8\u8BA4\u7684 RedisTemplate \u6CA1\u6709\u8FC7\u591A\u7684\u8BBE\u7F6E\uFF0Credis \u5BF9\u8C61\u90FD\u662F\u9700\u8981\u5E8F\u5217\u5316\uFF01</span>
<span class="token comment">// \u4E24\u4E2A\u6CDB\u578B\u90FD\u662F Object, Object \u7684\u7C7B\u578B\uFF0C\u6211\u4EEC\u540E\u4F7F\u7528\u9700\u8981\u5F3A\u5236\u8F6C\u6362 &lt;String, Object&gt;</span>
    <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> template<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span> <span class="token comment">// \u7531\u4E8E String \u662Fredis\u4E2D\u6700\u5E38\u4F7F\u7528\u7684\u7C7B\u578B\uFF0C\u6240\u4EE5\u8BF4\u5355\u72EC\u63D0\u51FA\u6765\u4E86\u4E00\u4E2Abean\uFF01</span>
<span class="token keyword">public</span> <span class="token class-name">StringRedisTemplate</span> <span class="token function">stringRedisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">{</span>
    <span class="token class-name">StringRedisTemplate</span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> template<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6574\u5408\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u6574\u5408\u6D4B\u8BD5" aria-hidden="true">#</a> \u6574\u5408\u6D4B\u8BD5</h4><h5 id="_1-\u5BFC\u5165\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#_1-\u5BFC\u5165\u4F9D\u8D56" aria-hidden="true">#</a> 1.\u5BFC\u5165\u4F9D\u8D56</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>springboot 2.x\u540E \uFF0C\u539F\u6765\u4F7F\u7528\u7684 Jedis \u88AB lettuce \u66FF\u6362\u3002</p><p>jedis\uFF1A\u91C7\u7528\u7684\u76F4\u8FDE\uFF0C\u591A\u4E2A\u7EBF\u7A0B\u64CD\u4F5C\u7684\u8BDD\uFF0C\u662F\u4E0D\u5B89\u5168\u7684\u3002\u5982\u679C\u8981\u907F\u514D\u4E0D\u5B89\u5168\uFF0C\u4F7F\u7528jedis pool\u8FDE\u63A5\u6C60\uFF01\u66F4\u50CFBIO\u6A21\u5F0F</p><p>lettuce\uFF1A\u91C7\u7528netty\uFF0C\u5B9E\u4F8B\u53EF\u4EE5\u5728\u591A\u4E2A\u7EBF\u7A0B\u4E2D\u5171\u4EAB\uFF0C\u4E0D\u5B58\u5728\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7684\u60C5\u51B5\uFF01\u53EF\u4EE5\u51CF\u5C11\u7EBF\u7A0B\u6570\u636E\u4E86\uFF0C\u66F4\u50CFNIO\u6A21\u5F0F</p><p>\u6211\u4EEC\u5728\u5B66\u4E60SpringBoot\u81EA\u52A8\u914D\u7F6E\u7684\u539F\u7406\u65F6\uFF0C\u6574\u5408\u4E00\u4E2A\u7EC4\u4EF6\u5E76\u8FDB\u884C\u914D\u7F6E\u4E00\u5B9A\u4F1A\u6709\u4E00\u4E2A\u81EA\u52A8\u914D\u7F6E\u7C7BxxxAutoConfiguration,\u5E76\u4E14\u5728spring.factories\u4E2D\u4E5F\u4E00\u5B9A\u80FD\u627E\u5230\u8FD9\u4E2A\u7C7B\u7684\u5B8C\u5168\u9650\u5B9A\u540D\u3002Redis\u4E5F\u4E0D\u4F8B\u5916\u3002</p><p><img src="`+M+'" alt=""></p><p>\u90A3\u4E48\u5C31\u4E00\u5B9A\u8FD8\u5B58\u5728\u4E00\u4E2ARedisProperties\u7C7B</p><p><img src="'+C+'" alt=""></p><p>@ConditionalOnClass\u6CE8\u89E3\u4E2D\u6709\u4E24\u4E2A\u7C7B\u662F\u9ED8\u8BA4\u4E0D\u5B58\u5728\u7684\uFF0C\u6240\u4EE5Jedis\u662F\u65E0\u6CD5\u751F\u6548\u7684</p><p>\u7136\u540E\u518D\u770BLettuce\uFF1A</p><p><img src="'+F+'" alt=""></p><p>\u5B8C\u7F8E\u751F\u6548\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u56DE\u5230RedisAutoConfiguratio</p><p><img src="'+z+'" alt=""></p><p>\u53EA\u6709\u4E24\u4E2A\u7B80\u5355\u7684Bean</p><ul><li>RedisTemplate</li><li>StringRedisTemplate</li></ul><p>\u5F53\u770B\u5230xxTemplate\u65F6\u53EF\u4EE5\u5BF9\u6BD4RestTemplat\u3001SqlSessionTemplate,\u901A\u8FC7\u4F7F\u7528\u8FD9\u4E9BTemplate\u6765\u95F4\u63A5\u64CD\u4F5C\u7EC4\u4EF6\u3002\u90A3\u4E48\u8FD9\u4FE9\u4E5F\u4E0D\u4F1A\u4F8B\u5916\u3002\u5206\u522B\u7528\u4E8E\u64CD\u4F5CRedis\u548CRedis\u4E2D\u7684String\u6570\u636E\u7C7B\u578B\u3002</p><p>\u5728RedisTemplate\u4E0A\u4E5F\u6709\u4E00\u4E2A\u6761\u4EF6\u6CE8\u89E3\uFF0C\u8BF4\u660E\u6211\u4EEC\u662F\u53EF\u4EE5\u5BF9\u5176\u8FDB\u884C\u5B9A\u5236\u5316\u7684</p><p>\u8BF4\u5B8C\u8FD9\u4E9B\uFF0C\u6211\u4EEC\u9700\u8981\u77E5\u9053\u5982\u4F55\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u7136\u540E\u8FDE\u63A5Redis\uFF0C\u5C31\u9700\u8981\u9605\u8BFBRedisProperties</p><p><img src="'+P+'" alt=""></p><p>\u8FD9\u662F\u4E00\u4E9B\u57FA\u672C\u7684\u914D\u7F6E\u5C5E\u6027\u3002</p><p><img src="'+H+'" alt=""></p><p>\u8FD8\u6709\u4E00\u4E9B\u8FDE\u63A5\u6C60\u76F8\u5173\u7684\u914D\u7F6E\u3002\u6CE8\u610F\u4F7F\u7528\u65F6\u4E00\u5B9A\u4F7F\u7528<strong>Lettuce</strong>\u7684\u8FDE\u63A5\u6C60\u3002</p><p><img src="'+G+`" alt=""></p><h5 id="_2-\u7F16\u5199\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-\u7F16\u5199\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 2.\u7F16\u5199\u914D\u7F6E\u6587\u4EF6</h5><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># \u914D\u7F6Eredis</span>
<span class="token key attr-name">spring.redis.host</span><span class="token punctuation">=</span><span class="token value attr-value">39.99.xxx.xx</span>
<span class="token key attr-name">spring.redis.port</span><span class="token punctuation">=</span><span class="token value attr-value">6379</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-\u4F7F\u7528redistemplate" tabindex="-1"><a class="header-anchor" href="#_3-\u4F7F\u7528redistemplate" aria-hidden="true">#</a> 3.\u4F7F\u7528RedisTemplate</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Redis02SpringbootApplicationTests</span> <span class="token punctuation">{</span>
<span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// redisTemplate \u64CD\u4F5C\u4E0D\u540C\u7684\u6570\u636E\u7C7B\u578B\uFF0Capi\u548C\u6211\u4EEC\u7684\u6307\u4EE4\u662F\u4E00\u6837\u7684</span>
    <span class="token comment">// opsForValue \u64CD\u4F5C\u5B57\u7B26\u4E32 \u7C7B\u4F3CString</span>
    <span class="token comment">// opsForList \u64CD\u4F5CList \u7C7B\u4F3CList</span>
    <span class="token comment">// opsForSet</span>
    <span class="token comment">// opsForHash</span>
    <span class="token comment">// opsForZSet</span>
    <span class="token comment">// opsForGeo</span>
    <span class="token comment">// opsForHyperLog</span>

    <span class="token comment">// \u9664\u4E86\u57FA\u672C\u7684\u64CD\u4F5C\uFF0C\u6211\u4EEC\u5E38\u7528\u7684\u65B9\u6CD5\u90FD\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7redisTemplate\u64CD\u4F5C\uFF0C\u6BD4\u5982\u4E8B\u52A1\u548C\u57FA\u672C\u7684CRUD</span>

    <span class="token comment">// \u83B7\u53D6\u8FDE\u63A5\u5BF9\u8C61</span>
    <span class="token comment">//RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span>
    <span class="token comment">//connection.flushDb();</span>
    <span class="token comment">//connection.flushAll();</span>

    redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>quot<span class="token punctuation">;</span>mykey<span class="token operator">&amp;</span>quot<span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>quot<span class="token punctuation">;</span>kuangshen<span class="token operator">&amp;</span>quot<span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>quot<span class="token punctuation">;</span>mykey<span class="token operator">&amp;</span>quot<span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5728\u4F01\u4E1A\u4E2D,\u5927\u90E8\u5206\u60C5\u51B5\u4E0B\u4E0D\u4F1A\u4F7F\u7528\u8FD9\u79CD\u539F\u58F0\u5E26\u65B9\u5F0F\u53BB\u7F16\u5199\u4EE3\u7801.\u800C\u662F<strong>\u7528RedisUtils\u53BB\u5C01\u88C5</strong></p></blockquote><h5 id="_4-\u6D4B\u8BD5\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_4-\u6D4B\u8BD5\u7ED3\u679C" aria-hidden="true">#</a> 4.\u6D4B\u8BD5\u7ED3\u679C</h5><p>\u6B64\u65F6\u6211\u4EEC\u56DE\u5230Redis\u67E5\u770B\u6570\u636E\u65F6\u5019\uFF0C\u60CA\u5947\u53D1\u73B0\u5168\u662F\u4E71\u7801\uFF0C\u53EF\u662F\u7A0B\u5E8F\u4E2D\u53EF\u4EE5\u6B63\u5E38\u8F93\u51FA\u3002\u8FD9\u65F6\u5019\u5C31\u5173\u7CFB\u5230\u5B58\u50A8\u5BF9\u8C61\u7684\u5E8F\u5217\u5316\u95EE\u9898\uFF0C\u5728\u7F51\u7EDC\u4E2D\u4F20\u8F93\u7684\u5BF9\u8C61\u4E5F\u662F\u4E00\u6837\u9700\u8981\u5E8F\u5217\u5316\uFF0C\u5426\u8005\u5C31\u5168\u662F\u4E71\u7801\u3002</p><p>RedisTemplate\u5185\u90E8\u7684\u5E8F\u5217\u5316\u914D\u7F6E\u662F\u8FD9\u6837\u7684</p><p><img src="`+Q+'" alt=""></p><p>\u9ED8\u8BA4\u7684\u5E8F\u5217\u5316\u5668\u662F\u91C7\u7528JDK\u5E8F\u5217\u5316\u5668</p><p><img src="'+K+'" alt=""></p><p>\u540E\u7EED\u6211\u4EEC\u5B9A\u5236RedisTemplate\u5C31\u53EF\u4EE5\u5BF9\u5176\u8FDB\u884C\u4FEE\u6539\u3002</p><p>RedisSerializer\u63D0\u4F9B\u4E86\u591A\u79CD\u5E8F\u5217\u5316\u65B9\u6848\uFF1A</p><p><img src="'+J+`" alt=""></p><p>\u6211\u4EEC\u6765\u7F16\u5199\u4E00\u4E2A\u81EA\u5DF1\u7684 :</p><h4 id="redistemplete" tabindex="-1"><a class="header-anchor" href="#redistemplete" aria-hidden="true">#</a> RedisTemplete</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">JsonAutoDetect</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PropertyAccessor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span></span><span class="token class-name">RedisConnectionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">Jackson2JsonRedisSerializer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">StringRedisSerializer</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token punctuation">{</span>
<span class="token comment">// \u56FA\u5B9A\u6A21\u677F\uFF0C\u5728\u4F01\u4E1A\u4E2D\u62FF\u53BB\u5C31\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\uFF01</span>
<span class="token comment">// \u81EA\u5DF1\u5B9A\u4E49\u4E86\u4E00\u4E2A RedisTemplate</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// \u6211\u4EEC\u4E3A\u4E86\u81EA\u5DF1\u5F00\u53D1\u65B9\u4FBF\uFF0C\u4E00\u822C\u76F4\u63A5\u4F7F\u7528 &lt;String, Object&gt;</span>
  <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// Json\u5E8F\u5217\u5316\u914D\u7F6E</span>
<span class="token class-name">Jackson2JsonRedisSerializer</span> jackson2JsonRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span>
<span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ObjectMapper</span> om <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
om<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">PropertyAccessor</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">,</span> <span class="token class-name">JsonAutoDetect<span class="token punctuation">.</span>Visibility</span><span class="token punctuation">.</span><span class="token constant">ANY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
om<span class="token punctuation">.</span><span class="token function">enableDefaultTyping</span><span class="token punctuation">(</span><span class="token class-name">ObjectMapper<span class="token punctuation">.</span>DefaultTyping</span><span class="token punctuation">.</span><span class="token constant">NON_FINAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jackson2JsonRedisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>om<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// String \u7684\u5E8F\u5217\u5316</span>
<span class="token class-name">StringRedisSerializer</span> stringRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// key\u91C7\u7528String\u7684\u5E8F\u5217\u5316\u65B9\u5F0F</span>
template<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// hash\u7684key\u4E5F\u91C7\u7528String\u7684\u5E8F\u5217\u5316\u65B9\u5F0F</span>
template<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// value\u5E8F\u5217\u5316\u65B9\u5F0F\u91C7\u7528jackson</span>
template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// hash\u7684value\u5E8F\u5217\u5316\u65B9\u5F0F\u91C7\u7528jackson</span>
template<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
template<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> template<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6240\u6709\u7684redis\u64CD\u4F5C\uFF0C\u5176\u5B9E\u5BF9\u4E8Ejava\u5F00\u53D1\u4EBA\u5458\u6765\u8BF4\uFF0C\u5341\u5206\u7684\u7B80\u5355\uFF0C\u66F4\u91CD\u8981\u662F\u8981\u53BB\u7406\u89E3redis\u7684\u601D\u60F3\u548C\u6BCF\u4E00\u79CD\u6570\u636E\u7ED3\u6784\u7684\u7528\u5904\u548C\u4F5C\u7528\u573A\u666F\uFF01</p><h2 id="redis-conf" tabindex="-1"><a class="header-anchor" href="#redis-conf" aria-hidden="true">#</a> Redis.conf</h2><p>\u5BB9\u91CF\u5355\u4F4D\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF0CG\u548CGB\u6709\u533A\u522B</p><p><img src="`+V+'" alt=""></p><ol><li>\u914D\u7F6E\u6587\u4EF6unit\u5355\u4F4D\u5BF9\u5927\u5C0F\u5199\u4E0D\u654F\u611F!</li><li>\u53EF\u4EE5\u4F7F\u7528 include \u7EC4\u5408\u591A\u4E2A\u914D\u7F6E\u95EE\u9898</li></ol><p><img src="'+Y+`" alt=""></p><h3 id="\u7F51\u7EDC\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u7F51\u7EDC\u914D\u7F6E" aria-hidden="true">#</a> \u7F51\u7EDC\u914D\u7F6E</h3><div class="language-BASH ext-BASH line-numbers-mode"><pre class="language-BASH"><code>bind 127.0.0.1 # \u7ED1\u5B9A\u7684ip
protected-mode yes #\u4FDD\u62A4\u6A21\u5F0F
port 6379 #\u7AEF\u53E3\u8BBE\u7F6E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+X+`" alt=""></p><h3 id="\u901A\u7528-general" tabindex="-1"><a class="header-anchor" href="#\u901A\u7528-general" aria-hidden="true">#</a> \u901A\u7528 GENERAL</h3><div class="language-BASH ext-BASH line-numbers-mode"><pre class="language-BASH"><code>daemonize yes #\u4EE5\u5B88\u62A4\u8FDB\u7A0B\u7684\u65B9\u5F0F\u8FD0\u884C,\u9ED8\u8BA4\u662F\u9ED8\u8BA4\u5173\u95ED,\u9700\u8981\u5F00\u542F!
pidfile /var/run/redis-6379pid #\u5982\u679C\u4EE5\u540E\u53F0\u7684\u65B9\u5F0F\u8FD0\u884C,\u6211\u4EEC\u5C31\u9700\u8981\u6307\u5B9A\u4E00\u4E2Apid\u6587\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u65E5\u5FD7" aria-hidden="true">#</a> \u65E5\u5FD7</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u65E5\u5FD7</span>
<span class="token comment"># Specify the server verbosity level.</span>
<span class="token comment"># This can be one of:</span>
<span class="token comment"># debug (a lot of information, useful for development/testing)</span>
<span class="token comment"># verbose (many rarely useful info, but not a mess like the debug level)</span>
<span class="token comment"># notice (moderately verbose, what you want in production probably) \u751F\u4EA7\u73AF\u5883\u7528</span>
<span class="token comment"># warning (only very important / critical messages are logged)</span>
loglevel notice
logfile <span class="token string">&quot;&quot;</span> <span class="token comment"># \u65E5\u5FD7\u7684\u6587\u4EF6\u4F4D\u7F6E\u540D</span>
databases <span class="token number">16</span> <span class="token comment"># \u6570\u636E\u5E93\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u662F 16 \u4E2A\u6570\u636E\u5E93</span>
always-show-logo <span class="token function">yes</span> <span class="token comment"># \u662F\u5426\u603B\u662F\u663E\u793ALOGO</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u65E5\u5FD7\u8F93\u51FA\u7EA7\u522B</p><blockquote><ul><li>debug</li><li>verbose</li><li>notice</li><li>waring</li></ul></blockquote></blockquote><h3 id="\u5FEB\u7167" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u7167" aria-hidden="true">#</a> \u5FEB\u7167</h3><p><strong>\u6301\u4E45\u5316</strong>,\u5728\u89C4\u5B9A\u7684\u65F6\u95F4\u5185,\u6267\u884C\u4E86\u591A\u5C11\u6B21\u64CD\u4F5C,\u5219\u4F1A\u6301\u4E45\u5316\u5230\u6587\u4EF6 .rdb .aof</p><p>redis\u662F\u5185\u5B58\u6570\u636E\u5E93,<strong>\u5982\u679C\u6CA1\u6709\u6301\u4E45\u5316,\u90A3\u4E48\u6570\u636E\u65AD\u7535\u53CA\u5931!</strong></p><p>\u7531\u4E8ERedis\u662F\u57FA\u4E8E\u5185\u5B58\u7684\u6570\u636E\u5E93\uFF0C\u9700\u8981\u5C06\u6570\u636E\u7531\u5185\u5B58\u6301\u4E45\u5316\u5230\u6587\u4EF6\u4E2D</p><p>\u6301\u4E45\u5316\u65B9\u5F0F\uFF1A</p><ul><li>RDB</li><li>AOF</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5982\u679C900s\u5185\uFF0C\u5982\u679C\u81F3\u5C11\u6709\u4E00\u4E2A1 key\u8FDB\u884C\u4E86\u4FEE\u6539\uFF0C\u6211\u4EEC\u53CA\u8FDB\u884C\u6301\u4E45\u5316\u64CD\u4F5C</span>
save <span class="token number">900</span> <span class="token number">1</span>
<span class="token comment"># \u5982\u679C300s\u5185\uFF0C\u5982\u679C\u81F3\u5C1110 key\u8FDB\u884C\u4E86\u4FEE\u6539\uFF0C\u6211\u4EEC\u53CA\u8FDB\u884C\u6301\u4E45\u5316\u64CD\u4F5C</span>
save <span class="token number">300</span> <span class="token number">10</span>
<span class="token comment"># \u5982\u679C60s\u5185\uFF0C\u5982\u679C\u81F3\u5C1110000 key\u8FDB\u884C\u4E86\u4FEE\u6539\uFF0C\u6211\u4EEC\u53CA\u8FDB\u884C\u6301\u4E45\u5316\u64CD\u4F5C</span>
save <span class="token number">60</span> <span class="token number">10000</span>
<span class="token comment"># \u6211\u4EEC\u4E4B\u540E\u5B66\u4E60\u6301\u4E45\u5316\uFF0C\u4F1A\u81EA\u5DF1\u5B9A\u4E49\u8FD9\u4E2A\u6D4B\u8BD5\uFF01</span>
stop-writes-on-bgsave-error <span class="token function">yes</span> <span class="token comment"># \u6301\u4E45\u5316\u5982\u679C\u51FA\u9519\uFF0C\u662F\u5426\u8FD8\u9700\u8981\u7EE7\u7EED\u5DE5\u4F5C\uFF01</span>
rdbcompression <span class="token function">yes</span> <span class="token comment"># \u662F\u5426\u538B\u7F29 rdb \u6587\u4EF6\uFF0C\u9700\u8981\u6D88\u8017\u4E00\u4E9Bcpu\u8D44\u6E90\uFF01</span>
rdbchecksum <span class="token function">yes</span> <span class="token comment"># \u4FDD\u5B58rdb\u6587\u4EF6\u7684\u65F6\u5019\uFF0C\u8FDB\u884C\u9519\u8BEF\u7684\u68C0\u67E5\u6821\u9A8C\uFF01</span>
<span class="token function">dir</span> ./ <span class="token comment"># rdb\u6587\u4EF6\u4FDD\u5B58\u7684\u76EE\u5F55\uFF01</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="security-\u5B89\u5168" tabindex="-1"><a class="header-anchor" href="#security-\u5B89\u5168" aria-hidden="true">#</a> SECURITY \u5B89\u5168</h3><p>\u53EF\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6Eredis\u7684\u5BC6\u7801\uFF0C\u9ED8\u8BA4\u662F\u6CA1\u6709\u5BC6\u7801\uFF01</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">ping</span>
PONG
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get requirepass <span class="token comment"># \u83B7\u53D6redis\u7684\u5BC6\u7801</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;requirepass&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config <span class="token builtin class-name">set</span> requirepass <span class="token string">&quot;123456&quot;</span> <span class="token comment"># \u8BBE\u7F6Eredis\u7684\u5BC6\u7801</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get requirepass <span class="token comment"># \u53D1\u73B0\u6240\u6709\u7684\u547D\u4EE4\u90FD\u6CA1\u6709\u6743\u9650\u4E86</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> NOAUTH Authentication required.
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">ping</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> NOAUTH Authentication required.
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> auth <span class="token number">123456</span> <span class="token comment"># \u4F7F\u7528\u5BC6\u7801\u8FDB\u884C\u767B\u5F55\uFF01</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get requirepass
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;requirepass&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;123456&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u9650\u5236-clients-\u5BA2\u6237\u7AEF\u8FDE\u63A5\u76F8\u5173" tabindex="-1"><a class="header-anchor" href="#\u9650\u5236-clients-\u5BA2\u6237\u7AEF\u8FDE\u63A5\u76F8\u5173" aria-hidden="true">#</a> \u9650\u5236 CLIENTS\uFF08\u5BA2\u6237\u7AEF\u8FDE\u63A5\u76F8\u5173\uFF09</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>maxclients <span class="token number">10000</span> <span class="token comment"># \u8BBE\u7F6E\u80FD\u8FDE\u63A5\u4E0Aredis\u7684\u6700\u5927\u5BA2\u6237\u7AEF\u7684\u6570\u91CF</span>
maxmemory <span class="token operator">&lt;</span>bytes<span class="token operator">&gt;</span> <span class="token comment"># redis \u914D\u7F6E\u6700\u5927\u7684\u5185\u5B58\u5BB9\u91CF</span>
maxmemory-policy noeviction <span class="token comment"># \u5185\u5B58\u5230\u8FBE\u4E0A\u9650\u4E4B\u540E\u7684\u5904\u7406\u7B56\u7565</span>
<span class="token number">1</span>\u3001volatile-lru\uFF1A\u53EA\u5BF9\u8BBE\u7F6E\u4E86\u8FC7\u671F\u65F6\u95F4\u7684key\u8FDB\u884CLRU\uFF08\u9ED8\u8BA4\u503C\uFF09
<span class="token number">2</span>\u3001allkeys-lru \uFF1A \u5220\u9664lru\u7B97\u6CD5\u7684key
<span class="token number">3</span>\u3001volatile-random\uFF1A\u968F\u673A\u5220\u9664\u5373\u5C06\u8FC7\u671Fkey
<span class="token number">4</span>\u3001allkeys-random\uFF1A\u968F\u673A\u5220\u9664
<span class="token number">5</span>\u3001volatile-ttl \uFF1A \u5220\u9664\u5373\u5C06\u8FC7\u671F\u7684
<span class="token number">6</span>\u3001noeviction \uFF1A \u6C38\u4E0D\u8FC7\u671F\uFF0C\u8FD4\u56DE\u9519\u8BEF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="append-only-\u6A21\u5F0F-aof\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#append-only-\u6A21\u5F0F-aof\u914D\u7F6E" aria-hidden="true">#</a> APPEND ONLY \u6A21\u5F0F aof\u914D\u7F6E</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>appendonly no <span class="token comment"># \u9ED8\u8BA4\u662F\u4E0D\u5F00\u542Faof\u6A21\u5F0F\u7684\uFF0C\u9ED8\u8BA4\u662F\u4F7F\u7528rdb\u65B9\u5F0F\u6301\u4E45\u5316\u7684\uFF0C\u5728\u5927\u90E8\u5206\u6240\u6709\u7684\u60C5\u51B5\u4E0B\uFF0Crdb\u5B8C\u5168\u591F\u7528\uFF01</span>
appendfilename <span class="token string">&quot;appendonly.aof&quot;</span> <span class="token comment"># \u6301\u4E45\u5316\u7684\u6587\u4EF6\u7684\u540D\u5B57</span>
<span class="token comment"># appendfsync always # \u6BCF\u6B21\u4FEE\u6539\u90FD\u4F1A sync\u3002\u6D88\u8017\u6027\u80FD</span>
appendfsync everysec <span class="token comment"># \u6BCF\u79D2\u6267\u884C\u4E00\u6B21 sync\uFF0C\u53EF\u80FD\u4F1A\u4E22\u5931\u8FD91s\u7684\u6570\u636E\uFF01</span>
<span class="token comment"># appendfsync no # \u4E0D\u6267\u884C sync\uFF0C\u8FD9\u4E2A\u65F6\u5019\u64CD\u4F5C\u7CFB\u7EDF\u81EA\u5DF1\u540C\u6B65\u6570\u636E\uFF0C\u901F\u5EA6\u6700\u5FEB\uFF01</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="redis\u6301\u4E45\u5316" tabindex="-1"><a class="header-anchor" href="#redis\u6301\u4E45\u5316" aria-hidden="true">#</a> Redis\u6301\u4E45\u5316</h2><blockquote><p>\u9762\u8BD5\u548C\u5DE5\u4F5C\uFF0C\u6301\u4E45\u5316\u90FD\u662F\u91CD\u70B9\uFF01</p></blockquote><p>Redis \u662F\u5185\u5B58\u6570\u636E\u5E93\uFF0C\u5982\u679C\u4E0D\u5C06\u5185\u5B58\u4E2D\u7684\u6570\u636E\u5E93\u72B6\u6001\u4FDD\u5B58\u5230\u78C1\u76D8\uFF0C\u90A3\u4E48\u4E00\u65E6\u670D\u52A1\u5668\u8FDB\u7A0B\u9000\u51FA\uFF0C\u670D\u52A1\u5668\u4E2D\u7684\u6570\u636E\u5E93\u72B6\u6001\u4E5F\u4F1A\u6D88\u5931\u3002\u6240\u4EE5 Redis \u63D0\u4F9B\u4E86\u6301\u4E45\u5316\u529F\u80FD\uFF01</p><h3 id="rdb-redis-database" tabindex="-1"><a class="header-anchor" href="#rdb-redis-database" aria-hidden="true">#</a> RDB\uFF08Redis DataBase\uFF09</h3><blockquote><p>\u5728\u4E3B\u4ECE\u590D\u5236\u4E2D,RDB\u5C31\u662F\u5907\u7528\u7684,\u5728\u4ECE\u673A\u4E0A\u9762!</p></blockquote><p><img src="`+Z+'" alt=""></p><blockquote><p>\u5728\u6307\u5B9A\u65F6\u95F4\u95F4\u9694\u540E\uFF0C\u5C06\u5185\u5B58\u4E2D\u7684\u6570\u636E\u96C6\u5FEB\u7167\u5199\u5165\u6570\u636E\u5E93 \uFF1B</p><p>\u5728\u6062\u590D\u65F6\u5019\uFF0C\u76F4\u63A5\u8BFB\u53D6\u5FEB\u7167\u6587\u4EF6\uFF0C\u8FDB\u884C\u6570\u636E\u7684\u6062\u590D \uFF1B</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C Redis \u5C06\u6570\u636E\u5E93\u5FEB\u7167\u4FDD\u5B58\u5728\u540D\u5B57\u4E3A dump.rdb\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u4E2D\u3002\u6587\u4EF6\u540D\u53EF\u4EE5\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u8FDB\u884C\u81EA\u5B9A\u4E49\u3002</p></blockquote><p>\u5728\u6307\u5B9A\u7684\u65F6\u95F4\u95F4\u9694\u5185\u5C06\u5185\u5B58\u4E2D\u7684\u6570\u636E\u96C6\u5FEB\u7167\u5199\u5165\u78C1\u76D8\uFF0C\u4E5F\u5C31\u662F\u884C\u8BDD\u8BB2\u7684Snapshot\u5FEB\u7167\uFF0C\u5B83\u6062\u590D\u65F6\u662F\u5C06\u5FEB\u7167\u6587\u4EF6\u76F4\u63A5\u8BFB\u5230\u5185\u5B58\u91CC\u3002</p><p>Redis\u4F1A\u5355\u72EC\u521B\u5EFA\uFF08fork\uFF09\u4E00\u4E2A\u5B50\u8FDB\u7A0B\u6765\u8FDB\u884C\u6301\u4E45\u5316\uFF0C\u4F1A\u5148\u5C06\u6570\u636E\u5199\u5165\u5230\u4E00\u4E2A\u4E34\u65F6\u6587\u4EF6\u4E2D\uFF0C\u5F85\u6301\u4E45\u5316\u8FC7\u7A0B\u90FD\u7ED3\u675F\u4E86\uFF0C\u518D\u7528\u8FD9\u4E2A\u4E34\u65F6\u6587\u4EF6\u66FF\u6362\u4E0A\u6B21\u6301\u4E45\u5316\u597D\u7684\u6587\u4EF6\u3002\u6574\u4E2A\u8FC7\u7A0B\u4E2D\uFF0C\u4E3B\u8FDB\u7A0B\u662F\u4E0D\u8FDB\u884C\u4EFB\u4F55IO\u64CD\u4F5C\u7684\u3002</p><p>\u8FD9\u5C31\u786E\u4FDD\u4E86\u6781\u9AD8\u7684\u6027\u80FD\u3002\u5982\u679C\u9700\u8981\u8FDB\u884C\u5927\u89C4\u6A21\u6570\u636E\u7684\u6062\u590D\uFF0C\u4E14\u5BF9\u4E8E\u6570\u636E\u6062\u590D\u7684\u5B8C\u6574\u6027\u4E0D\u662F\u975E\u5E38\u654F\u611F\uFF0C\u90A3RDB\u65B9\u5F0F\u8981\u6BD4AOF\u65B9\u5F0F\u66F4\u52A0\u7684\u9AD8\u6548\u3002RDB\u7684\u7F3A\u70B9\u662F\u6700\u540E\u4E00\u6B21\u6301\u4E45\u5316\u540E\u7684\u6570\u636E\u53EF\u80FD\u4E22\u5931\u3002\u6211\u4EEC\u9ED8\u8BA4\u7684\u5C31\u662FRDB\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u4E0D\u9700\u8981\u4FEE\u6539\u8FD9\u4E2A\u914D\u7F6E\uFF01 \u6709\u65F6\u5019\u5728\u751F\u4EA7\u73AF\u5883\u6211\u4EEC\u4F1A\u5C06\u8FD9\u4E2A\u6587\u4EF6\u8FDB\u884C\u5907\u4EFD\uFF01 rdb\u4FDD\u5B58\u7684\u6587\u4EF6\u662Fdump.rdb \u90FD\u662F\u5728\u6211\u4EEC\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5FEB\u7167\u4E2D\u8FDB\u884C\u914D\u7F6E\u7684\uFF01</p><h4 id="\u5DE5\u4F5C\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u4F5C\u539F\u7406" aria-hidden="true">#</a> \u5DE5\u4F5C\u539F\u7406</h4><p>\u5728\u8FDB\u884C RDB \u7684\u65F6\u5019\uFF0Credis \u7684\u4E3B\u7EBF\u7A0B\u662F\u4E0D\u4F1A\u505A io \u64CD\u4F5C\u7684\uFF0C\u4E3B\u7EBF\u7A0B\u4F1A fork \u4E00\u4E2A\u5B50\u7EBF\u7A0B\u6765\u5B8C\u6210\u8BE5\u64CD\u4F5C\uFF1B</p><ol><li>Redis \u8C03\u7528forks\u3002\u540C\u65F6\u62E5\u6709\u7236\u8FDB\u7A0B\u548C\u5B50\u8FDB\u7A0B\u3002</li><li>\u5B50\u8FDB\u7A0B\u5C06\u6570\u636E\u96C6\u5199\u5165\u5230\u4E00\u4E2A\u4E34\u65F6 RDB \u6587\u4EF6\u4E2D\u3002</li><li>\u5F53\u5B50\u8FDB\u7A0B\u5B8C\u6210\u5BF9\u65B0 RDB \u6587\u4EF6\u7684\u5199\u5165\u65F6\uFF0CRedis \u7528\u65B0 RDB \u6587\u4EF6\u66FF\u6362\u539F\u6765\u7684 RDB \u6587\u4EF6\uFF0C\u5E76\u5220\u9664\u65E7\u7684 RDB \u6587\u4EF6\u3002</li></ol><p>\u8FD9\u79CD\u5DE5\u4F5C\u65B9\u5F0F\u4F7F\u5F97 Redis \u53EF\u4EE5\u4ECE\u5199\u65F6\u590D\u5236\uFF08copy-on-write\uFF09\u673A\u5236\u4E2D\u83B7\u76CA(\u56E0\u4E3A\u662F\u4F7F\u7528\u5B50\u8FDB\u7A0B\u8FDB\u884C\u5199\u64CD\u4F5C\uFF0C\u800C\u7236\u8FDB\u7A0B\u4F9D\u7136\u53EF\u4EE5\u63A5\u6536\u6765\u81EA\u5BA2\u6237\u7AEF\u7684\u8BF7\u6C42\u3002)</p><p><img src="'+W+'" alt=""></p><h4 id="\u89E6\u53D1\u673A\u5236" tabindex="-1"><a class="header-anchor" href="#\u89E6\u53D1\u673A\u5236" aria-hidden="true">#</a> \u89E6\u53D1\u673A\u5236</h4><ol><li>save\u7684\u89C4\u5219\u6EE1\u8DB3\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F1A\u81EA\u52A8\u89E6\u53D1rdb\u539F\u5219</li><li>\u6267\u884Cflushall\u547D\u4EE4\uFF0C\u4E5F\u4F1A\u89E6\u53D1\u6211\u4EEC\u7684rdb\u539F\u5219</li><li>\u9000\u51FAredis\uFF0C\u4E5F\u4F1A\u81EA\u52A8\u4EA7\u751Frdb\u6587\u4EF6</li></ol><p>\u5907\u4EFD\u4F1A\u81EA\u52A8\u751F\u6210\u4E00\u4E2Adump.rdb</p><p><img src="'+$+'" alt=""></p><h4 id="save" tabindex="-1"><a class="header-anchor" href="#save" aria-hidden="true">#</a> save</h4><p>\u4F7F\u7528 save \u547D\u4EE4\uFF0C\u4F1A\u7ACB\u523B\u5BF9\u5F53\u524D\u5185\u5B58\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u6301\u4E45\u5316 ,\u4F46\u662F\u4F1A\u963B\u585E\uFF0C\u4E5F\u5C31\u662F\u4E0D\u63A5\u53D7\u5176\u4ED6\u64CD\u4F5C\u4E86\uFF1B</p><blockquote><p>\u7531\u4E8E save \u547D\u4EE4\u662F\u540C\u6B65\u547D\u4EE4\uFF0C\u4F1A\u5360\u7528Redis\u7684\u4E3B\u8FDB\u7A0B\u3002\u82E5Redis\u6570\u636E\u975E\u5E38\u591A\u65F6\uFF0Csave\u547D\u4EE4\u6267\u884C\u901F\u5EA6\u4F1A\u975E\u5E38\u6162\uFF0C\u963B\u585E\u6240\u6709\u5BA2\u6237\u7AEF\u7684\u8BF7\u6C42\u3002</p></blockquote><p>\u793A\u610F\u56FE</p><p><img src="'+nn+`" alt=""></p><h4 id="flushall\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#flushall\u547D\u4EE4" aria-hidden="true">#</a> flushall\u547D\u4EE4</h4><p>flushall \u547D\u4EE4\u4E5F\u4F1A\u89E6\u53D1\u6301\u4E45\u5316 \uFF1B</p><p>\u89E6\u53D1\u6301\u4E45\u5316\u89C4\u5219 \u6EE1\u8DB3\u914D\u7F6E\u6761\u4EF6\u4E2D\u7684\u89E6\u53D1\u6761\u4EF6 \uFF1B</p><blockquote><p>\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u5BF9 Redis \u8FDB\u884C\u8BBE\u7F6E\uFF0C \u8BA9\u5B83\u5728\u201C N \u79D2\u5185\u6570\u636E\u96C6\u81F3\u5C11\u6709 M \u4E2A\u6539\u52A8\u201D\u8FD9\u4E00\u6761\u4EF6\u88AB\u6EE1\u8DB3\u65F6\uFF0C \u81EA\u52A8\u8FDB\u884C\u6570\u636E\u96C6\u4FDD\u5B58\u64CD\u4F5C\u3002</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6301\u4E45\u5316\u89C4\u5219, \u6301\u4E45\u5316\u5230\u6587\u4EF6 .db .aof</span>
<span class="token comment"># \u5982\u679C\u4E86900\u79D2\u5185\u81F3\u5C111\u4E2Akey\u8FDB\u884C\u4E86\u4FEE\u6539,\u5C31\u8FDB\u884C\u6301\u4E45\u5316</span>
save <span class="token number">900</span> <span class="token number">1</span>
<span class="token comment"># 300\u79D2\u518510\u4E2Akey\u8FDB\u884C\u4E86\u4FEE\u6539</span>
save <span class="token number">300</span> <span class="token number">10</span>
save <span class="token number">60</span> <span class="token number">10000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+sn+'" alt=""></p><h4 id="bgsave" tabindex="-1"><a class="header-anchor" href="#bgsave" aria-hidden="true">#</a> bgsave</h4><p>bgsave \u662F\u5F02\u6B65\u8FDB\u884C\uFF0C\u8FDB\u884C\u6301\u4E45\u5316\u7684\u65F6\u5019\uFF0Credis \u8FD8\u53EF\u4EE5\u5C06\u7EE7\u7EED\u54CD\u5E94\u5BA2\u6237\u7AEF\u8BF7\u6C42 \uFF1B</p><p><img src="'+an+`" alt=""></p><h4 id="bgsave\u548Csave\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#bgsave\u548Csave\u5BF9\u6BD4" aria-hidden="true">#</a> bgsave\u548Csave\u5BF9\u6BD4</h4><table><thead><tr><th style="text-align:left;">\u547D\u4EE4</th><th style="text-align:left;">save</th><th style="text-align:left;">bgsave</th></tr></thead><tbody><tr><td style="text-align:left;">IO\u7C7B\u578B</td><td style="text-align:left;">\u540C\u6B65</td><td style="text-align:left;">\u5F02\u6B65</td></tr><tr><td style="text-align:left;">\u963B\u585E\uFF1F</td><td style="text-align:left;">\u662F</td><td style="text-align:left;">\u662F\uFF08\u963B\u585E\u53D1\u751F\u5728fock()\uFF0C\u901A\u5E38\u975E\u5E38\u5FEB\uFF09</td></tr><tr><td style="text-align:left;">\u590D\u6742\u5EA6</td><td style="text-align:left;">O(n)</td><td style="text-align:left;">O(n)</td></tr><tr><td style="text-align:left;">\u4F18\u70B9</td><td style="text-align:left;">\u4E0D\u4F1A\u6D88\u8017\u989D\u5916\u7684\u5185\u5B58</td><td style="text-align:left;">\u4E0D\u963B\u585E\u5BA2\u6237\u7AEF\u547D\u4EE4</td></tr><tr><td style="text-align:left;">\u7F3A\u70B9</td><td style="text-align:left;">\u963B\u585E\u5BA2\u6237\u7AEF\u547D\u4EE4</td><td style="text-align:left;">\u9700\u8981fock\u5B50\u8FDB\u7A0B\uFF0C\u6D88\u8017\u5185\u5B58</td></tr></tbody></table><h4 id="\u6062\u590D\u673A\u5236" tabindex="-1"><a class="header-anchor" href="#\u6062\u590D\u673A\u5236" aria-hidden="true">#</a> \u6062\u590D\u673A\u5236</h4><ol><li><p>\u53EA\u9700\u8981\u5C06rdb\u6587\u4EF6\u653E\u7F6E\u6211\u4EECredis\u7684\u542F\u52A8\u76EE\u5F55\u5373\u53EF,redis\u542F\u52A8\u65F6\u4F1A\u81EA\u52A8\u68C0\u67E5dump.rdb\u6587\u4EF6,\u6062\u590D\u5176\u4E2D\u7684\u6570\u636E</p></li><li><p>\u67E5\u770B\u9700\u8981\u5B58\u653E\u7684\u4F4D\u7F6E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get <span class="token function">dir</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;dir&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;/usr/local/bin&quot;</span> <span class="token comment">#\u5982\u679C\u5728\u8BE5\u76EE\u5F55\u5B58\u5728dump.rdb\u6587\u4EF6\u542F\u52A8\u5C31\u4F1A\u81EA\u52A8\u626B\u63CF\u5176\u4E2D\u7684\u6570\u636E</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> \u4F18\u7F3A\u70B9</h4><blockquote><p>\u4F18\u70B9\uFF1A</p></blockquote><ol><li>\u9002\u5408\u5927\u89C4\u6A21\u7684\u6570\u636E\u6062\u590D</li><li>\u5BF9\u6570\u636E\u7684\u5B8C\u6574\u6027\u8981\u6C42\u4E0D\u9AD8</li></ol><blockquote><p>\u7F3A\u70B9\uFF1A</p></blockquote><ol><li>\u9700\u8981\u4E00\u5B9A\u7684\u65F6\u95F4\u95F4\u9694\u8FDB\u884C\u64CD\u4F5C\uFF0C\u5982\u679Credis\u610F\u5916\u5B95\u673A\u4E86\uFF0C\u8FD9\u4E2A\u6700\u540E\u4E00\u6B21\u4FEE\u6539\u7684\u6570\u636E\u5C31\u6CA1\u6709\u4E86\u3002</li><li>fork\u8FDB\u7A0B\u7684\u65F6\u5019\uFF0C\u4F1A\u5360\u7528\u4E00\u5B9A\u7684\u5185\u5BB9\u7A7A\u95F4\u3002</li></ol><h3 id="aof" tabindex="-1"><a class="header-anchor" href="#aof" aria-hidden="true">#</a> AOF</h3><blockquote><p>Append Only File</p></blockquote><p>\u5C06\u6211\u4EEC\u6240\u6709\u7684\u547D\u4EE4\u90FD\u8BB0\u5F55\u4E0B\u6765\uFF0Chistory\uFF0C\u6062\u590D\u7684\u65F6\u5019\u5C31\u628A\u8FD9\u4E2A\u6587\u4EF6\u5168\u90E8\u518D\u6267\u884C\u4E00\u904D</p><p><img src="`+en+'" alt=""></p><p>\u4EE5\u65E5\u5FD7\u7684\u5F62\u5F0F\u6765\u8BB0\u5F55\u6BCF\u4E2A\u5199\u7684\u64CD\u4F5C\uFF0C\u5C06Redis\u6267\u884C\u8FC7\u7684\u6240\u6709\u6307\u4EE4\u8BB0\u5F55\u4E0B\u6765\uFF08\u8BFB\u64CD\u4F5C\u4E0D\u8BB0\u5F55\uFF09\uFF0C\u53EA\u8BB8\u8FFD\u52A0\u6587\u4EF6\u4F46\u4E0D\u53EF\u4EE5\u6539\u5199\u6587\u4EF6\uFF0Credis\u542F\u52A8\u4E4B\u521D\u4F1A\u8BFB\u53D6\u8BE5\u6587\u4EF6\u91CD\u65B0\u6784\u5EFA\u6570\u636E\uFF0C\u6362\u8A00\u4E4B\uFF0Credis\u91CD\u542F\u7684\u8BDD\u5C31\u6839\u636E\u65E5\u5FD7\u6587\u4EF6\u7684\u5185\u5BB9<strong>\u5C06\u5199\u6307\u4EE4\u4ECE\u524D\u5230\u540E\u6267\u884C\u4E00\u6B21</strong>\u4EE5\u5B8C\u6210\u6570\u636E\u7684\u6062\u590D\u5DE5\u4F5C\u3002</p><blockquote><p>Aof\u4FDD\u5B58\u7684\u662F appendonly.aof\u6587\u4EF6</p></blockquote><h4 id="\u4EC0\u4E48\u662Faof" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662Faof" aria-hidden="true">#</a> \u4EC0\u4E48\u662FAOF</h4><p>\u5FEB\u7167\u529F\u80FD\uFF08RDB\uFF09\u5E76\u4E0D\u662F\u975E\u5E38\u8010\u4E45\uFF08durable\uFF09\uFF1A \u5982\u679C Redis \u56E0\u4E3A\u67D0\u4E9B\u539F\u56E0\u800C\u9020\u6210\u6545\u969C\u505C\u673A\uFF0C \u90A3\u4E48\u670D\u52A1\u5668\u5C06\u4E22\u5931\u6700\u8FD1\u5199\u5165\u3001\u4EE5\u53CA\u672A\u4FDD\u5B58\u5230\u5FEB\u7167\u4E2D\u7684\u90A3\u4E9B\u6570\u636E\u3002 \u4ECE 1.1 \u7248\u672C\u5F00\u59CB\uFF0C Redis \u589E\u52A0\u4E86\u4E00\u79CD\u5B8C\u5168\u8010\u4E45\u7684\u6301\u4E45\u5316\u65B9\u5F0F\uFF1A AOF \u6301\u4E45\u5316\u3002</p><p><img src="'+tn+'" alt=""></p><p>appendonly no yes\u5219\u8868\u793A\u542F\u7528AOF</p><p>\u9ED8\u8BA4\u662F\u4E0D\u5F00\u542F\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u624B\u52A8\u914D\u7F6E\uFF0C\u7136\u540E\u91CD\u542Fredis\uFF0C\u5C31\u53EF\u4EE5\u751F\u6548\u4E86\uFF01</p><p><strong>\u8BB0\u5F55\u7684\u6587\u4EF6\u4E3A</strong><code>appendonly.aof</code></p><p>\u5982\u679C\u8FD9\u4E2Aaof\u6587\u4EF6\u6709\u9519\u4F4D\uFF0C\u8FD9\u65F6\u5019redis\u662F\u542F\u52A8\u4E0D\u8D77\u6765\u7684\uFF0C\u6211\u9700\u8981\u4FEE\u6539\u8FD9\u4E2Aaof\u6587\u4EF6</p><p>redis\u7ED9\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5177redis-check-aof --fix</p><p><img src="'+pn+`" alt=""></p><p>\u5982\u679C\u6587\u4EF6\u6B63\u5E38\u4E86,\u91CD\u542F\u5C31\u53EF\u4EE5\u6062\u590D\u4E86</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>appendonly <span class="token function">yes</span>  <span class="token comment"># \u9ED8\u8BA4\u662F\u4E0D\u5F00\u542Faof\u6A21\u5F0F\u7684\uFF0C\u9ED8\u8BA4\u662F\u4F7F\u7528rdb\u65B9\u5F0F\u6301\u4E45\u5316\u7684\uFF0C\u5728\u5927\u90E8\u5206\u7684\u60C5\u51B5\u4E0B\uFF0Crdb\u5B8C\u5168\u591F\u7528</span>
appendfilename <span class="token string">&quot;appendonly.aof&quot;</span>
appendfsync always <span class="token comment"># \u6BCF\u6B21\u4FEE\u6539\u90FD\u4F1Async \u6D88\u8017\u6027\u80FD</span>
appendfsync everysec <span class="token comment"># \u6BCF\u79D2\u6267\u884C\u4E00\u6B21 sync \u53EF\u80FD\u4F1A\u4E22\u5931\u8FD9\u4E00\u79D2\u7684\u6570\u636E</span>
appendfsync no <span class="token comment"># \u4E0D\u6267\u884C sync ,\u8FD9\u65F6\u5019\u64CD\u4F5C\u7CFB\u7EDF\u81EA\u5DF1\u540C\u6B65\u6570\u636E\uFF0C\u901F\u5EA6\u6700\u5FEB</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u91CD\u5199\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#\u91CD\u5199\u89C4\u5219" aria-hidden="true">#</a> \u91CD\u5199\u89C4\u5219</h4><blockquote><p>aof\u9ED8\u8BA4\u5C31\u662F\u6587\u4EF6\u7684\u65E0\u9650\u8FFD\u52A0,\u6587\u4EF6\u4F1A\u8D8A\u6765\u8D8A\u5927!</p></blockquote><p><img src="`+ln+'" alt=""></p><p>\u5982\u679Caof\u6587\u4EF6\u5927\u4E8E64MB,fork\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6765\u5C06\u6211\u4EEC\u7684\u6587\u4EF6\u8FDB\u884C\u91CD\u5199!</p><h4 id="\u4F18\u7F3A\u70B9-1" tabindex="-1"><a class="header-anchor" href="#\u4F18\u7F3A\u70B9-1" aria-hidden="true">#</a> \u4F18\u7F3A\u70B9</h4><p>\u4F18\u70B9</p><ol><li>\u6BCF\u4E00\u6B21\u4FEE\u6539\u90FD\u4F1A\u540C\u6B65\uFF0C\u6587\u4EF6\u7684\u5B8C\u6574\u6027\u4F1A\u66F4\u52A0\u597D</li><li>\u6BCF\u79D2\u540C\u6B65\u4E00\u6B21\uFF0C\u53EF\u80FD\u4F1A\u4E22\u5931\u4E00\u79D2\u7684\u6570\u636E</li><li>\u4ECE\u4E0D\u540C\u6B65\uFF0C\u6548\u7387\u6700\u9AD8</li></ol><p>\u7F3A\u70B9</p><ol><li>\u76F8\u5BF9\u4E8E\u6570\u636E\u6587\u4EF6\u6765\u8BF4\uFF0Caof\u8FDC\u8FDC\u5927\u4E8Erdb\uFF0C\u4FEE\u590D\u901F\u5EA6\u6BD4rdb\u6162\uFF01</li><li>Aof\u8FD0\u884C\u6548\u7387\u4E5F\u8981\u6BD4rdb\u6162\uFF0C\u6240\u4EE5\u6211\u4EECredis\u9ED8\u8BA4\u7684\u914D\u7F6E\u5C31\u662Frdb\u6301\u4E45\u5316</li></ol><h3 id="\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#\u6269\u5C55" aria-hidden="true">#</a> \u6269\u5C55\uFF1A</h3><ol><li>RDB \u6301\u4E45\u5316\u65B9\u5F0F\u80FD\u591F\u5728\u6307\u5B9A\u7684\u65F6\u95F4\u95F4\u9694\u5185\u5BF9\u4F60\u7684\u6570\u636E\u8FDB\u884C\u5FEB\u7167\u5B58\u50A8</li><li>AOF \u6301\u4E45\u5316\u65B9\u5F0F\u8BB0\u5F55\u6BCF\u6B21\u5BF9\u670D\u52A1\u5668\u5199\u7684\u64CD\u4F5C\uFF0C\u5F53\u670D\u52A1\u5668\u91CD\u542F\u7684\u65F6\u5019\u4F1A\u91CD\u65B0\u6267\u884C\u8FD9\u4E9B\u547D\u4EE4\u6765\u6062\u590D\u539F\u59CB\u7684\u6570\u636E\uFF0CAOF\u547D\u4EE4\u4EE5Redis \u534F\u8BAE\u8FFD\u52A0\u4FDD\u5B58\u6BCF\u6B21\u5199\u7684\u64CD\u4F5C\u5230\u6587\u4EF6\u672B\u5C3E\uFF0CRedis\u8FD8\u80FD\u5BF9AOF\u6587\u4EF6\u8FDB\u884C\u540E\u53F0\u91CD\u5199\uFF0C\u4F7F\u5F97AOF\u6587\u4EF6\u7684\u4F53\u79EF\u4E0D\u81F3\u4E8E\u8FC7\u5927\u3002</li><li><strong>\u53EA\u505A\u7F13\u5B58\uFF0C\u5982\u679C\u4F60\u53EA\u5E0C\u671B\u4F60\u7684\u6570\u636E\u5728\u670D\u52A1\u5668\u8FD0\u884C\u7684\u65F6\u5019\u5B58\u5728\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u4E0D\u4F7F\u7528\u4EFB\u4F55\u6301\u4E45\u5316</strong></li><li>\u540C\u65F6\u5F00\u542F\u4E24\u79CD\u6301\u4E45\u5316\u65B9\u5F0F</li></ol><ul><li>\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5F53redis\u91CD\u542F\u7684\u65F6\u5019\u4F1A\u4F18\u5148\u8F7D\u5165AOF\u6587\u4EF6\u6765\u6062\u590D\u539F\u59CB\u7684\u6570\u636E\uFF0C\u56E0\u4E3A\u5728\u901A\u5E38\u60C5\u51B5\u4E0BAOF\u6587\u4EF6\u4FDD\u5B58\u7684\u6570\u636E\u96C6\u8981\u6BD4RDB\u6587\u4EF6\u4FDD\u5B58\u7684\u6570\u636E\u96C6\u8981\u5B8C\u6574\u3002</li><li>RDB \u7684\u6570\u636E\u4E0D\u5B9E\u65F6\uFF0C\u540C\u65F6\u4F7F\u7528\u4E24\u8005\u65F6\u670D\u52A1\u5668\u91CD\u542F\u4E5F\u53EA\u4F1A\u627EAOF\u6587\u4EF6\uFF0C\u90A3\u8981\u4E0D\u8981\u53EA\u4F7F\u7528AOF\u5462\uFF1F\u4F5C\u8005\u5EFA\u8BAE\u4E0D\u8981\uFF0C\u56E0\u4E3ARDB\u66F4\u9002\u5408\u7528\u4E8E\u5907\u4EFD\u6570\u636E\u5E93\uFF08AOF\u5728\u4E0D\u65AD\u53D8\u5316\u4E0D\u597D\u5907\u4EFD\uFF09\uFF0C\u5FEB\u901F\u91CD\u542F\uFF0C\u800C\u4E14\u4E0D\u4F1A\u6709AOF\u53EF\u80FD\u6F5C\u5728\u7684Bug\uFF0C\u7559\u7740\u4F5C\u4E3A\u4E00\u4E2A\u4E07\u4E00\u7684\u624B\u6BB5\u3002</li></ul><ol start="5"><li>\u6027\u80FD\u5EFA\u8BAE</li></ol><ul><li>\u56E0\u4E3ARDB\u6587\u4EF6\u53EA\u7528\u4F5C\u540E\u5907\u7528\u9014\uFF0C\u5EFA\u8BAE\u53EA\u5728Slave\u4E0A\u6301\u4E45\u5316RDB\u6587\u4EF6\uFF0C\u800C\u4E14\u53EA\u898115\u5206\u949F\u5907\u4EFD\u4E00\u6B21\u5C31\u591F\u4E86\uFF0C<strong>\u53EA\u4FDD\u7559 save 900 1</strong> \u8FD9\u6761\u89C4\u5219\u3002</li><li>\u5982\u679CEnable AOF \uFF0C\u597D\u5904\u662F\u5728\u6700\u6076\u52A3\u60C5\u51B5\u4E0B\u4E5F\u53EA\u4F1A\u4E22\u5931\u4E0D\u8D85\u8FC7\u4E24\u79D2\u6570\u636E\uFF0C\u542F\u52A8\u811A\u672C\u8F83\u7B80\u5355\u53EAload\u81EA\u5DF1\u7684AOF\u6587\u4EF6\u5C31\u53EF\u4EE5\u4E86\uFF0C\u4EE3\u4EF7\u4E00\u662F\u5E26\u6765\u4E86\u6301\u7EED\u7684IO\uFF0C\u4E8C\u662FAOF rewrite \u7684\u6700\u540E\u5C06 rewrite \u8FC7\u7A0B\u4E2D\u4EA7\u751F\u7684\u65B0\u6570\u636E\u5199\u5230\u65B0\u6587\u4EF6\u9020\u6210\u7684\u963B\u585E\u51E0\u4E4E\u662F\u4E0D\u53EF\u907F\u514D\u7684\u3002\u53EA\u8981\u786C\u76D8\u8BB8\u53EF\uFF0C\u5E94\u8BE5\u5C3D\u91CF\u51CF\u5C11AOF rewrite\u7684\u9891\u7387\uFF0CAOF\u91CD\u5199\u7684\u57FA\u7840\u5927\u5C0F\u9ED8\u8BA4\u503C64M\u592A\u5C0F\u4E86\uFF0C\u53EF\u4EE5\u8BBE\u52305G\u4EE5\u4E0A\uFF0C\u9ED8\u8BA4\u8D85\u8FC7\u539F\u5927\u5C0F100%\u5927\u5C0F\u91CD\u5199\u53EF\u4EE5\u6539\u5230\u9002\u5F53\u7684\u6570\u503C\u3002</li><li>\u5982\u679C\u4E0DEnable AOF \uFF0C\u4EC5\u9760 Master-Slave Repllcation \u5B9E\u73B0\u9AD8\u53EF\u7528\u6027\u4E5F\u53EF\u4EE5\uFF0C\u80FD\u7701\u6389\u4E00\u5927\u7B14IO\uFF0C\u4E5F\u51CF\u5C11\u4E86rewrite\u65F6\u5E26\u6765\u7684\u7CFB\u7EDF\u6CE2\u52A8\u3002\u4EE3\u4EF7\u662F\u5982\u679CMaster/Slave \u540C\u65F6\u5012\u6389\uFF0C\u4F1A\u4E22\u5931\u5341\u51E0\u5206\u949F\u7684\u6570\u636E\uFF0C\u542F\u52A8\u811A\u672C\u4E5F\u8981\u6BD4\u8F83\u4E24\u4E2A Master/Slave \u4E2D\u7684 RDB\u6587\u4EF6\uFF0C\u8F7D\u5165\u8F83\u65B0\u7684\u90A3\u4E2A\uFF0C\u5FAE\u535A\u5C31\u662F\u8FD9\u79CD\u67B6\u6784\u3002</li></ul><h3 id="\u5982\u4F55\u9009\u62E9\u4F7F\u7528\u54EA\u79CD\u6301\u4E45\u5316\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u9009\u62E9\u4F7F\u7528\u54EA\u79CD\u6301\u4E45\u5316\u65B9\u5F0F" aria-hidden="true">#</a> \u5982\u4F55\u9009\u62E9\u4F7F\u7528\u54EA\u79CD\u6301\u4E45\u5316\u65B9\u5F0F\uFF1F</h3><p>\u4E00\u822C\u6765\u8BF4\uFF0C \u5982\u679C\u60F3\u8FBE\u5230\u8DB3\u4EE5\u5AB2\u7F8E PostgreSQL \u7684\u6570\u636E\u5B89\u5168\u6027\uFF0C \u4F60\u5E94\u8BE5\u540C\u65F6\u4F7F\u7528\u4E24\u79CD\u6301\u4E45\u5316\u529F\u80FD\u3002</p><p>\u5982\u679C\u4F60\u975E\u5E38\u5173\u5FC3\u4F60\u7684\u6570\u636E\uFF0C \u4F46\u4ECD\u7136\u53EF\u4EE5\u627F\u53D7\u6570\u5206\u949F\u4EE5\u5185\u7684\u6570\u636E\u4E22\u5931\uFF0C \u90A3\u4E48\u4F60\u53EF\u4EE5\u53EA\u4F7F\u7528 RDB \u6301\u4E45\u5316\u3002</p><p>\u6709\u5F88\u591A\u7528\u6237\u90FD\u53EA\u4F7F\u7528 AOF \u6301\u4E45\u5316\uFF0C \u4F46\u5E76\u4E0D\u63A8\u8350\u8FD9\u79CD\u65B9\u5F0F\uFF1A \u56E0\u4E3A\u5B9A\u65F6\u751F\u6210 RDB \u5FEB\u7167\uFF08snapshot\uFF09\u975E\u5E38\u4FBF\u4E8E\u8FDB\u884C\u6570\u636E\u5E93\u5907\u4EFD\uFF0C \u5E76\u4E14 RDB \u6062\u590D\u6570\u636E\u96C6\u7684\u901F\u5EA6\u4E5F\u8981\u6BD4 AOF \u6062\u590D\u7684\u901F\u5EA6\u8981\u5FEB\u3002</p><h2 id="redis\u53D1\u5E03\u8BA2\u9605" tabindex="-1"><a class="header-anchor" href="#redis\u53D1\u5E03\u8BA2\u9605" aria-hidden="true">#</a> Redis\u53D1\u5E03\u8BA2\u9605</h2><p>Redis \u53D1\u5E03\u8BA2\u9605(pub/sub)\u662F\u4E00\u79CD\u6D88\u606F\u901A\u4FE1\u6A21\u5F0F\uFF1A</p><p>\u53D1\u9001\u8005(pub)\u53D1\u9001\u6D88\u606F\uFF0C\u8BA2\u9605\u8005(sub)\u63A5\u6536\u6D88\u606F\u3002</p><p>\u5FAE\u4FE1\u3001 \u5FAE\u535A\u3001\u5173\u6CE8\u7CFB\u7EDF\uFF01</p><p>Redis \u5BA2\u6237\u7AEF\u53EF\u4EE5\u8BA2\u9605\u4EFB\u610F\u6570\u91CF\u7684\u9891\u9053\u3002</p><p>\u8BA2\u9605/\u53D1\u5E03\u6D88\u606F\u56FE\uFF1A <img src="'+on+'" alt=""> \u7B2C\u4E00\u4E2A\uFF1A\u6D88\u606F\u53D1\u9001\u8005</p><p>\u7B2C\u4E8C\u4E2A\uFF1A\u9891\u9053</p><p>\u7B2C\u4E09\u4E2A\uFF1A\u6D88\u606F\u8BA2\u9605\u8005</p><p>\u4E0B\u56FE\u5C55\u793A\u4E86\u9891\u9053 channel1 \uFF0C \u4EE5\u53CA\u8BA2\u9605\u8FD9\u4E2A\u9891\u9053\u7684\u4E09\u4E2A\u5BA2\u6237\u7AEF \u2014\u2014 client2 \u3001 client5 \u548C client1 \u4E4B\u95F4\u7684\u5173\u7CFB\uFF1A</p><p><img src="'+cn+'" alt=""></p><p>\u5F53\u6709\u65B0\u6D88\u606F\u901A\u8FC7 PUBLISH \u547D\u4EE4\u53D1\u9001\u7ED9\u9891\u9053 channel1 \u65F6\uFF0C \u8FD9\u4E2A\u6D88\u606F\u5C31\u4F1A\u88AB\u53D1\u9001\u7ED9\u8BA2\u9605\u5B83\u7684\u4E09\u4E2A\u5BA2\u6237\u7AEF\uFF1A</p><p><img src="'+rn+`" alt=""></p><h3 id="\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u547D\u4EE4" aria-hidden="true">#</a> \u547D\u4EE4</h3><ul><li><code>PSUBSCRIBE pattern [pattern..]</code> \u8BA2\u9605\u4E00\u4E2A\u6216\u591A\u4E2A\u7B26\u5408\u7ED9\u5B9A\u6A21\u5F0F\u7684\u9891\u9053\u3002</li><li><code>PUNSUBSCRIBE pattern [pattern..]</code> \u9000\u8BA2\u4E00\u4E2A\u6216\u591A\u4E2A\u7B26\u5408\u7ED9\u5B9A\u6A21\u5F0F\u7684\u9891\u9053\u3002</li><li><code>PUBSUB subcommand [argument[argument]]</code> \u67E5\u770B\u8BA2\u9605\u4E0E\u53D1\u5E03\u7CFB\u7EDF\u72B6\u6001\u3002</li><li><code>PUBLISH channel message</code> \u5411\u6307\u5B9A\u9891\u9053\u53D1\u5E03\u6D88\u606F</li><li><code>SUBSCRIBE channel [channel..]</code> \u8BA2\u9605\u7ED9\u5B9A\u7684\u4E00\u4E2A\u6216\u591A\u4E2A\u9891\u9053\u3002</li><li><code>UNSUBSCRIBE channel [channel..]</code> \u9000\u8BA2\u4E00\u4E2A\u6216\u591A\u4E2A\u9891\u9053</li></ul><h3 id="\u4EE3\u7801\u793A\u4F8B-2" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u793A\u4F8B-2" aria-hidden="true">#</a> \u4EE3\u7801\u793A\u4F8B</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>------------\u8BA2\u9605\u7AEF----------------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SUBSCRIBE shane <span class="token comment"># \u8BA2\u9605shane\u9891\u9053</span>
Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span> <span class="token comment"># \u7B49\u5F85\u63A5\u6536\u6D88\u606F</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;subscribe&quot;</span> <span class="token comment"># \u8BA2\u9605\u6210\u529F\u7684\u6D88\u606F</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;message&quot;</span> <span class="token comment"># \u63A5\u6536\u5230\u6765\u81EAshane\u9891\u9053\u7684\u6D88\u606F &quot;hello world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span> 
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello world&quot;</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;message&quot;</span> <span class="token comment"># \u63A5\u6536\u5230\u6765\u81EAshane\u9891\u9053\u7684\u6D88\u606F &quot;hello i am shane&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shane&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello i am shane&quot;</span>
--------------\u6D88\u606F\u53D1\u5E03\u7AEF-------------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PUBLISH shane <span class="token string">&quot;hello world&quot;</span> <span class="token comment"># \u53D1\u5E03\u6D88\u606F\u5230shane\u9891\u9053</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PUBLISH shane <span class="token string">&quot;hello i am shane&quot;</span> <span class="token comment"># \u53D1\u5E03\u6D88\u606F</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
-----------------\u67E5\u770B\u6D3B\u8DC3\u7684\u9891\u9053------------
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PUBSUB channels

<span class="token string">&quot;shane&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u539F\u7406" aria-hidden="true">#</a> \u539F\u7406</h3><p>Redis\u662F\u4F7F\u7528C\u5B9E\u73B0\u7684\uFF0C\u901A\u8FC7\u5206\u6790 Redis \u6E90\u7801\u91CC\u7684 pubsub.c \u6587\u4EF6\uFF0C\u4E86\u89E3\u53D1\u5E03\u548C\u8BA2\u9605\u673A\u5236\u7684\u5E95\u5C42\u5B9E\u73B0\uFF0C\u7C4D\u6B64\u52A0\u6DF1\u5BF9 Redis \u7684\u7406\u89E3\u3002</p><p>Redis \u901A\u8FC7 PUBLISH \u3001SUBSCRIBE \u548C PSUBSCRIBE \u7B49\u547D\u4EE4\u5B9E\u73B0\u53D1\u5E03\u548C\u8BA2\u9605\u529F\u80FD\u3002</p><p>\u6BCF\u4E2A Redis \u670D\u52A1\u5668\u8FDB\u7A0B\u90FD\u7EF4\u6301\u7740\u4E00\u4E2A\u8868\u793A\u670D\u52A1\u5668\u72B6\u6001\u7684 redis.h/redisServer \u7ED3\u6784\uFF0C \u7ED3\u6784\u7684 pubsub_channels \u5C5E\u6027\u662F\u4E00\u4E2A\u5B57\u5178\uFF0C \u8FD9\u4E2A\u5B57\u5178\u5C31\u7528\u4E8E\u4FDD\u5B58\u8BA2\u9605\u9891\u9053\u7684\u4FE1\u606F\uFF0C\u5176\u4E2D\uFF0C\u5B57\u5178\u7684\u952E\u4E3A\u6B63\u5728\u88AB\u8BA2\u9605\u7684\u9891\u9053\uFF0C \u800C\u5B57\u5178\u7684\u503C\u5219\u662F\u4E00\u4E2A\u94FE\u8868\uFF0C \u94FE\u8868\u4E2D\u4FDD\u5B58\u4E86\u6240\u6709\u8BA2\u9605\u8FD9\u4E2A\u9891\u9053\u7684\u5BA2\u6237\u7AEF\u3002</p><p><img src="`+dn+'" alt=""></p><p>\u5BA2\u6237\u7AEF\u8BA2\u9605\uFF0C\u5C31\u88AB\u94FE\u63A5\u5230\u5BF9\u5E94\u9891\u9053\u7684\u94FE\u8868\u7684\u5C3E\u90E8\uFF0C\u9000\u8BA2\u5219\u5C31\u662F\u5C06\u5BA2\u6237\u7AEF\u8282\u70B9\u4ECE\u94FE\u8868\u4E2D\u79FB\u9664\u3002</p><h3 id="\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#\u7F3A\u70B9" aria-hidden="true">#</a> \u7F3A\u70B9</h3><ol><li>\u5982\u679C\u4E00\u4E2A\u5BA2\u6237\u7AEF\u8BA2\u9605\u4E86\u9891\u9053\uFF0C\u4F46\u81EA\u5DF1\u8BFB\u53D6\u6D88\u606F\u7684\u901F\u5EA6\u5374\u4E0D\u591F\u5FEB\u7684\u8BDD\uFF0C\u90A3\u4E48\u4E0D\u65AD\u79EF\u538B\u7684\u6D88\u606F\u4F1A\u4F7Fredis\u8F93\u51FA\u7F13\u51B2\u533A\u7684\u4F53\u79EF\u53D8\u5F97\u8D8A\u6765\u8D8A\u5927\uFF0C\u8FD9\u53EF\u80FD\u4F7F\u5F97redis\u672C\u8EAB\u7684\u901F\u5EA6\u53D8\u6162\uFF0C\u751A\u81F3\u76F4\u63A5\u5D29\u6E83\u3002</li><li>\u8FD9\u548C\u6570\u636E\u4F20\u8F93\u53EF\u9760\u6027\u6709\u5173\uFF0C\u5982\u679C\u5728\u8BA2\u9605\u65B9\u65AD\u7EBF\uFF0C\u90A3\u4E48\u4ED6\u5C06\u4F1A\u4E22\u5931\u6240\u6709\u5728\u77ED\u7EBF\u671F\u95F4\u53D1\u5E03\u8005\u53D1\u5E03\u7684\u6D88\u606F\u3002</li></ol><h3 id="\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528" aria-hidden="true">#</a> \u5E94\u7528</h3><ol><li>\u6D88\u606F\u8BA2\u9605\uFF1A\u516C\u4F17\u53F7\u8BA2\u9605\uFF0C\u5FAE\u535A\u5173\u6CE8\u7B49\u7B49\uFF08\u8D77\u59CB\u66F4\u591A\u662F\u4F7F\u7528\u6D88\u606F\u961F\u5217\u6765\u8FDB\u884C\u5B9E\u73B0\uFF09</li><li>\u591A\u4EBA\u5728\u7EBF\u804A\u5929\u5BA4\u3002</li></ol><p>\u7A0D\u5FAE\u590D\u6742\u7684\u573A\u666F\uFF0C\u6211\u4EEC\u5C31\u4F1A\u4F7F\u7528\u6D88\u606F\u4E2D\u95F4\u4EF6MQ\u5904\u7406\u3002</p><h2 id="redis\u4E3B\u4ECE\u590D\u5236" tabindex="-1"><a class="header-anchor" href="#redis\u4E3B\u4ECE\u590D\u5236" aria-hidden="true">#</a> Redis\u4E3B\u4ECE\u590D\u5236</h2><h3 id="\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u6982\u5FF5" aria-hidden="true">#</a> \u6982\u5FF5</h3><p>\u4E3B\u4ECE\u590D\u5236\uFF0C\u662F\u6307\u5C06\u4E00\u53F0Redis\u670D\u52A1\u5668\u7684\u6570\u636E\uFF0C\u590D\u5236\u5230\u5176\u4ED6\u7684Redis\u670D\u52A1\u5668\u3002\u524D\u8005\u79F0\u4E3A\u4E3B\u8282\u70B9\uFF08Master/Leader\uFF09,\u540E\u8005\u79F0\u4E3A\u4ECE\u8282\u70B9\uFF08Slave/Follower\uFF09\uFF0C \u6570\u636E\u7684\u590D\u5236\u662F\u5355\u5411\u7684\uFF01\u53EA\u80FD\u7531\u4E3B\u8282\u70B9\u590D\u5236\u5230\u4ECE\u8282\u70B9\uFF08<u>\u4E3B\u8282\u70B9\u4EE5\u5199\u4E3A\u4E3B\u3001\u4ECE\u8282\u70B9\u4EE5\u8BFB\u4E3A\u4E3B</u>\uFF09\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6BCF\u53F0Redis\u670D\u52A1\u5668\u90FD\u662F\u4E3B\u8282\u70B9\uFF0C\u4E00\u4E2A\u4E3B\u8282\u70B9\u53EF\u4EE5\u67090\u4E2A\u6216\u8005\u591A\u4E2A\u4ECE\u8282\u70B9\uFF0C\u4F46\u6BCF\u4E2A\u4ECE\u8282\u70B9\u53EA\u80FD\u7531\u4E00\u4E2A\u4E3B\u8282\u70B9\u3002</p><h3 id="\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#\u4F5C\u7528" aria-hidden="true">#</a> \u4F5C\u7528</h3><ol><li>\u6570\u636E\u5197\u4F59\uFF1A\u4E3B\u4ECE\u590D\u5236\u5B9E\u73B0\u4E86\u6570\u636E\u7684\u70ED\u5907\u4EFD\uFF0C\u662F\u6301\u4E45\u5316\u4E4B\u5916\u7684\u4E00\u79CD\u6570\u636E\u5197\u4F59\u7684\u65B9\u5F0F\u3002</li><li>\u6545\u969C\u6062\u590D\uFF1A\u5F53\u4E3B\u8282\u70B9\u6545\u969C\u65F6\uFF0C\u4ECE\u8282\u70B9\u53EF\u4EE5\u6682\u65F6\u66FF\u4EE3\u4E3B\u8282\u70B9\u63D0\u4F9B\u670D\u52A1\uFF0C\u662F\u4E00\u79CD\u670D\u52A1\u5197\u4F59\u7684\u65B9\u5F0F</li><li>\u8D1F\u8F7D\u5747\u8861\uFF1A\u5728\u4E3B\u4ECE\u590D\u5236\u7684\u57FA\u7840\u4E0A\uFF0C\u914D\u5408\u8BFB\u5199\u5206\u79BB\uFF0C\u7531\u4E3B\u8282\u70B9\u8FDB\u884C\u5199\u64CD\u4F5C\uFF0C\u4ECE\u8282\u70B9\u8FDB\u884C\u8BFB\u64CD\u4F5C\uFF0C\u5206\u62C5\u670D\u52A1\u5668\u7684\u8D1F\u8F7D\uFF1B\u5C24\u5176\u662F\u5728\u591A\u8BFB\u5C11\u5199\u7684\u573A\u666F\u4E0B\uFF0C\u901A\u8FC7\u591A\u4E2A\u4ECE\u8282\u70B9\u5206\u62C5\u8D1F\u8F7D\uFF0C\u63D0\u9AD8\u5E76\u53D1\u91CF\u3002</li><li>\u9AD8\u53EF\u7528\u57FA\u77F3\uFF1A\u4E3B\u4ECE\u590D\u5236\u8FD8\u662F\u54E8\u5175\u548C\u96C6\u7FA4\u80FD\u591F\u5B9E\u65BD\u7684\u57FA\u7840\u3002</li></ol><h3 id="\u4E3A\u4EC0\u4E48\u4F7F\u7528\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u4F7F\u7528\u96C6\u7FA4" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u4F7F\u7528\u96C6\u7FA4</h3><p>\u4E00\u822C\u6765\u8BF4\uFF0C\u8981\u5C06Redis\u8FD0\u7528\u4E8E\u5DE5\u7A0B\u9879\u76EE\u4E2D\uFF0C\u53EA\u4F7F\u7528\u4E00\u53F0Redis\u662F\u4E07\u4E07\u4E0D\u80FD\u7684\uFF08\u5B95\u673A\uFF09\uFF0C\u539F\u56E0\u5982\u4E0B\uFF1A</p><ol><li><p>\u4ECE\u7ED3\u6784\u4E0A\uFF0C\u5355\u4E2ARedis\u670D\u52A1\u5668\u4F1A\u53D1\u751F\u5355\u70B9\u6545\u969C\uFF0C\u5E76\u4E14\u4E00\u53F0\u670D\u52A1\u5668\u9700\u8981\u5904\u7406\u6240\u6709\u7684\u8BF7\u6C42\u8D1F\u8F7D\uFF0C\u538B\u529B\u8F83\u5927\uFF1B</p></li><li><p>\u4ECE\u5BB9\u91CF\u4E0A\uFF0C\u5355\u4E2ARedis\u670D\u52A1\u5668\u5185\u5B58\u5BB9\u91CF\u6709\u9650\uFF0C\u5C31\u7B97\u4E00\u53F0Redis\u670D\u52A1\u5668\u5185\u5B58\u5BB9\u91CF\u4E3A256G\uFF0C\u4E5F\u4E0D\u80FD\u5C06\u6240\u6709\u5185\u5B58\u7528\u4F5CRedis\u5B58\u50A8\u5185\u5B58\uFF0C\u4E00\u822C\u6765\u8BF4\uFF0C\u5355\u53F0Redis\u6700\u5927\u4F7F\u7528\u5185\u5B58\u4E0D\u5E94\u8BE5\u8D85\u8FC720G\u3002</p></li></ol><p>\u7535\u5546\u7F51\u7AD9\u4E0A\u7684\u5546\u54C1\uFF0C\u4E00\u822C\u90FD\u662F\u4E00\u6B21\u4E0A\u4F20\uFF0C\u65E0\u6570\u6B21\u6D4F\u89C8\u7684\uFF0C\u8BF4\u4E13\u4E1A\u70B9\u4E5F\u5C31\u662F&quot;\u591A\u8BFB\u5C11\u5199&quot;\u3002</p><p>\u5BF9\u4E8E\u8FD9\u79CD\u573A\u666F\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u5982\u4E0B\u8FD9\u79CD\u67B6\u6784\uFF1A</p><p><img src="'+un+`" alt=""></p><p>\u4E3B\u4ECE\u590D\u5236\uFF0C\u8BFB\u5199\u5206\u79BB\uFF01 80% \u7684\u60C5\u51B5\u4E0B\u90FD\u662F\u5728\u8FDB\u884C\u8BFB\u64CD\u4F5C\uFF01\u51CF\u7F13\u670D\u52A1\u5668\u7684\u538B\u529B\uFF01\u67B6\u6784\u4E2D\u7ECF\u5E38\u4F7F\u7528\uFF01 \u4E00\u4E3B\u4E8C\u4ECE\uFF01</p><p>\u53EA\u8981\u5728\u516C\u53F8\u4E2D\uFF0C\u4E3B\u4ECE\u590D\u5236\u5C31\u662F\u5FC5\u987B\u8981\u4F7F\u7528\u7684\uFF0C\u56E0\u4E3A\u5728\u771F\u5B9E\u7684\u9879\u76EE\u4E2D\u4E0D\u53EF\u80FD\u5355\u673A\u4F7F\u7528Redis\uFF01</p><h3 id="\u603B\u7ED3-1" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3-1" aria-hidden="true">#</a> \u603B\u7ED3</h3><ol><li>\u5355\u53F0\u670D\u52A1\u5668\u96BE\u4EE5\u8D1F\u8F7D\u5927\u91CF\u7684\u8BF7\u6C42</li><li>\u5355\u53F0\u670D\u52A1\u5668\u6545\u969C\u7387\u9AD8\uFF0C\u7CFB\u7EDF\u5D29\u574F\u6982\u7387\u5927</li><li>\u5355\u53F0\u670D\u52A1\u5668\u5185\u5B58\u5BB9\u91CF\u6709\u9650\u3002</li></ol><h3 id="\u73AF\u5883\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a> \u73AF\u5883\u914D\u7F6E</h3><p>\u53EA\u914D\u7F6E\u4ECE\u5E93\uFF0C\u4E0D\u7528\u914D\u7F6E\u4E3B\u5E93\uFF01</p><blockquote><p>\u56E0\u4E3A\u9ED8\u8BA4\u5C31\u662F\u4E3B\u8282\u70B9</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> info replication
<span class="token comment"># Replication</span>
role:master <span class="token comment"># \u89D2\u8272</span>
connected_slaves:0 <span class="token comment"># \u4ECE\u673A\u6570\u91CF</span>
master_replid:3b54deef5b7b7b7f7dd8acefa23be48879b4fcff
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:0
second_repl_offset:-1
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u590D\u52363\u4E2A\u914D\u7F6E\u6587\u4EF6\uFF0C\u7136\u540E\u4FEE\u6539\u5BF9\u5E94\u7684\u4FE1\u606F</p><ol><li>\u7AEF\u53E3</li><li>pid\u540D\u5B57</li><li>log\u6587\u4EF6\u540D</li><li>dump.rdb\u540D\u5B57</li><li>\u4FEE\u6539\u5B8C\u6BD5\u4E4B\u540E,\u542F\u52A8\u6211\u4EEC\u7684\u4E09\u4E2Aredis\u670D\u52A1\u5668,\u53EF\u901A\u8FC7\u8FDB\u7A0B\u4FE1\u606F\u67E5\u770B!</li></ol><p>\u542F\u52A8\u5355\u673A\u591A\u670D\u52A1\u96C6\u7FA4\uFF1A</p><p><img src="`+mn+'" alt=""></p><h3 id="\u4E00\u4E3B\u4E8C\u4ECE" tabindex="-1"><a class="header-anchor" href="#\u4E00\u4E3B\u4E8C\u4ECE" aria-hidden="true">#</a> \u4E00\u4E3B\u4E8C\u4ECE</h3><h4 id="\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h4><p><strong>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6BCF\u53F0Redis\u670D\u52A1\u5668\u90FD\u662F\u4E3B\u8282\u70B9</strong>\uFF1B\u6211\u4EEC\u4E00\u822C\u60C5\u51B5\u4E0B\u53EA\u7528\u914D\u7F6E\u4ECE\u673A\u5C31\u597D\u4E86\uFF01</p><p>\u8BA4\u8001\u5927\uFF01\u4E00\u4E3B\uFF0879\uFF09\u4E8C\u4ECE\uFF0880\uFF0C81\uFF09</p><p>\u4F7F\u7528<code>SLAVEOF host port</code>\u5C31\u53EF\u4EE5\u4E3A\u4ECE\u673A\u914D\u7F6E\u4E3B\u673A\u4E86\u3002</p><p><img src="'+kn+'" alt=""></p><p><strong>\u8BF4\u660E</strong></p><ul><li><code>SLAVEOF host 6379</code> \u627E\u8C01\u5F53\u81EA\u5DF1\u7684\u8001\u5927\uFF01</li><li><code>role:slave</code> # \u5F53\u524D\u89D2\u8272\u662F\u4ECE\u673A</li><li><code>master_host:127.0.0.1</code> # \u53EF\u4EE5\u7684\u770B\u5230\u4E3B\u673A\u7684\u4FE1\u606F</li></ul><p>\u7136\u540E\u4E3B\u673A\u4E0A\u4E5F\u80FD\u770B\u5230\u4ECE\u673A\u7684\u72B6\u6001\uFF1A</p><p><img src="'+bn+`" alt=""></p><p><strong>\u8BF4\u660E</strong></p><ul><li><code>connected_slaves:1</code> # \u591A\u4E86\u4ECE\u673A\u7684\u914D\u7F6E</li><li><code>slave0:ip=127.0.0.1,port=6380,state=online,offset=42,lag=1</code> # \u591A\u4E86\u4ECE\u673A\u7684\u914D\u7F6E</li></ul><p>\u771F\u5B9E\u7684\u4ECE\u4E3B\u914D\u7F6E\u5E94\u8BE5\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E\uFF0C\u8FD9\u6837\u7684\u8BDD\u662F\u6C38\u4E45\u7684\uFF0C\u6211\u4EEC\u8FD9\u91CC\u4F7F\u7528\u7684\u662F\u547D\u4EE4\uFF0C\u6682\u65F6\u7684\uFF01</p><h4 id="\u4F7F\u7528\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u89C4\u5219" aria-hidden="true">#</a> \u4F7F\u7528\u89C4\u5219</h4><ol><li>\u4ECE\u673A\u53EA\u80FD\u8BFB\uFF0C\u4E0D\u80FD\u5199\uFF0C\u4E3B\u673A\u53EF\u8BFB\u53EF\u5199\u4F46\u662F\u591A\u7528\u4E8E\u5199\u3002</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> name shane <span class="token comment"># \u4ECE\u673A6381\u5199\u5165\u5931\u8D25</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> READONLY You can<span class="token string">&#39;t write against a read only replica.
127.0.0.1:6380&gt; set name shane # \u4ECE\u673A6380\u5199\u5165\u5931\u8D25
(error) READONLY You can&#39;</span>t <span class="token function">write</span> against a <span class="token builtin class-name">read</span> only replica.
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name shane
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;shane&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>\u5F53\u4E3B\u673A\u65AD\u7535\u5B95\u673A\u540E\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4ECE\u673A\u7684\u89D2\u8272\u4E0D\u4F1A\u53D1\u751F\u53D8\u5316 \uFF0C\u96C6\u7FA4\u4E2D\u53EA\u662F\u5931\u53BB\u4E86\u5199\u64CD\u4F5C\uFF0C\u5F53\u4E3B\u673A\u6062\u590D\u4EE5\u540E\uFF0C\u53C8\u4F1A\u8FDE\u63A5\u4E0A\u4ECE\u673A\u6062\u590D\u539F\u72B6\u3002</p></li><li><p>\u5F53\u4ECE\u673A\u65AD\u7535\u5B95\u673A\u540E\uFF0C\u82E5\u4E0D\u662F\u4F7F\u7528\u914D\u7F6E\u6587\u4EF6\u914D\u7F6E\u7684\u4ECE\u673A\uFF0C\u518D\u6B21\u542F\u52A8\u540E\u4F5C\u4E3A\u4E3B\u673A\u662F\u65E0\u6CD5\u83B7\u53D6\u4E4B\u524D\u4E3B\u673A\u7684\u6570\u636E\u7684\uFF0C\u82E5\u6B64\u65F6\u91CD\u65B0\u914D\u7F6E\u79F0\u4E3A\u4ECE\u673A\uFF0C\u53C8\u53EF\u4EE5\u83B7\u53D6\u5230\u4E3B\u673A\u7684\u6240\u6709\u6570\u636E\u3002\u8FD9\u91CC\u5C31\u8981\u63D0\u5230\u4E00\u4E2A\u540C\u6B65\u539F\u7406\u3002</p></li><li><p>\u7B2C\u4E8C\u6761\u4E2D\u63D0\u5230\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u4E3B\u673A\u6545\u969C\u540E\uFF0C\u4E0D\u4F1A\u51FA\u73B0\u65B0\u7684\u4E3B\u673A\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\u53EF\u4EE5\u4EA7\u751F\u65B0\u7684\u4E3B\u673A\uFF1A</p></li></ol><ul><li>\u4ECE\u673A\u624B\u52A8\u6267\u884C\u547D\u4EE4slaveof no one,\u8FD9\u6837\u6267\u884C\u4EE5\u540E\u4ECE\u673A\u4F1A\u72EC\u7ACB\u51FA\u6765\u6210\u4E3A\u4E00\u4E2A\u4E3B\u673A</li><li>\u4F7F\u7528\u54E8\u5175\u6A21\u5F0F\uFF08\u81EA\u52A8\u9009\u4E3E\uFF09</li></ul><blockquote><p>\u5982\u679C\u6CA1\u6709\u8001\u5927\u4E86\uFF0C\u8FD9\u4E2A\u65F6\u5019\u80FD\u4E0D\u80FD\u9009\u62E9\u51FA\u6765\u4E00\u4E2A\u8001\u5927\u5462\uFF1F\u624B\u52A8\uFF01</p></blockquote><p>\u5982\u679C\u4E3B\u673A\u65AD\u5F00\u4E86\u8FDE\u63A5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528<code>SLAVEOF no one</code>\u8BA9\u81EA\u5DF1\u53D8\u6210\u4E3B\u673A\uFF01\u5176\u4ED6\u7684\u8282\u70B9\u5C31\u53EF\u4EE5\u624B\u52A8\u8FDE\u63A5\u5230\u6700\u65B0\u7684\u4E3B\u8282\u70B9\uFF08\u624B\u52A8\uFF09\uFF01\u5982\u679C\u8FD9\u4E2A\u65F6\u5019\u8001\u5927\u4FEE\u590D\u4E86\uFF0C\u90A3\u4E48\u5C31\u91CD\u65B0\u8FDE\u63A5\uFF01</p><h4 id="\u590D\u5236\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u590D\u5236\u539F\u7406" aria-hidden="true">#</a> \u590D\u5236\u539F\u7406</h4><p>Slave \u542F\u52A8\u6210\u529F\u8FDE\u63A5\u5230 master \u540E\u4F1A\u53D1\u9001\u4E00\u4E2Async\u540C\u6B65\u547D\u4EE4</p><p>Master \u63A5\u5230\u547D\u4EE4\uFF0C\u542F\u52A8\u540E\u53F0\u7684\u5B58\u76D8\u8FDB\u7A0B\uFF0C\u540C\u65F6\u6536\u96C6\u6240\u6709\u63A5\u6536\u5230\u7684\u7528\u4E8E\u4FEE\u6539\u6570\u636E\u96C6\u547D\u4EE4\uFF0C\u5728\u540E\u53F0\u8FDB\u7A0B\u6267\u884C\u5B8C\u6BD5\u4E4B\u540E\uFF0C<strong>master\u5C06\u4F20\u9001\u6574\u4E2A\u6570\u636E\u6587\u4EF6\u5230slave\uFF0C\u5E76\u5B8C\u6210\u4E00\u6B21\u5B8C\u5168\u540C\u6B65</strong>\u3002</p><p><strong>\u5168\u91CF\u590D\u5236</strong>\uFF1A\u800Cslave\u670D\u52A1\u5728\u63A5\u6536\u5230\u6570\u636E\u5E93\u6587\u4EF6\u6570\u636E\u540E\uFF0C\u5C06\u5176\u5B58\u76D8\u5E76\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D\u3002</p><p><strong>\u589E\u91CF\u590D\u5236</strong>\uFF1AMaster \u7EE7\u7EED\u5C06\u65B0\u7684\u6240\u6709\u6536\u96C6\u5230\u7684\u4FEE\u6539\u547D\u4EE4\u4F9D\u6B21\u4F20\u7ED9slave\uFF0C\u5B8C\u6210\u540C\u6B65</p><p>\u4F46\u662F\u53EA\u8981\u662F\u91CD\u65B0\u8FDE\u63A5master\uFF0C\u4E00\u6B21\u5B8C\u5168\u540C\u6B65\uFF08\u5168\u91CF\u590D\u5236\uFF09\u5C06\u88AB\u81EA\u52A8\u6267\u884C\uFF01 \u6211\u4EEC\u7684\u6570\u636E\u4E00\u5B9A\u53EF\u4EE5\u5728\u4ECE\u673A\u4E2D\u770B\u5230\uFF01</p><h3 id="\u5C42\u5C42\u94FE\u8DEF" tabindex="-1"><a class="header-anchor" href="#\u5C42\u5C42\u94FE\u8DEF" aria-hidden="true">#</a> \u5C42\u5C42\u94FE\u8DEF</h3><p>\u4E0A\u4E00\u4E2AM\u94FE\u63A5\u4E0B\u4E00\u4E2AS,\u4E0B\u4E00\u4E2A\u4ECE\u673A\u7684\u4E3B\u673A\u4E00\u76F4\u662F\u4E0A\u4E00\u4E2A\u8282\u70B9.</p><p>\u6B64\u65F6\u53EA\u6709\u7B2C\u4E00\u4E2A\u8282\u70B9\u4E3A\u4E3B\u673A,\u5B83\u7684\u6570\u636E\u4F1A\u540C\u6B65\u7ED9\u4E4B\u540E\u7684\u6240\u6709\u4ECE\u673A(\u4E4B\u540E\u7684\u8282\u70B9\u90FD\u4F1A\u4F5C\u4E3A\u4ECE\u673A)</p><blockquote><p>\u4E3B\u673A\u65AD\u4E86\u53EF\u4EE5\u4F7F\u7528<code>SLAVEOF no one</code>\u4F7F\u81EA\u5DF1\u53D8\u4E3A\u4E3B\u673A!\u5176\u4ED6\u8282\u70B9\u5C31\u9700\u8981\u624B\u52A8\u8FDE\u63A5\u5230\u8FD9\u4E2A\u4E3B\u8282\u70B9</p></blockquote><h2 id="\u54E8\u5175\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u54E8\u5175\u6A21\u5F0F" aria-hidden="true">#</a> \u54E8\u5175\u6A21\u5F0F</h2><blockquote><p>\u81EA\u52A8\u9009\u4E3E\u8001\u5927\u7684\u6A21\u5F0F</p></blockquote><h3 id="\u6982\u8FF0-1" tabindex="-1"><a class="header-anchor" href="#\u6982\u8FF0-1" aria-hidden="true">#</a> \u6982\u8FF0</h3><p>\u4E3B\u4ECE\u5207\u6362\u6280\u672F\u7684\u65B9\u6CD5\u662F\uFF1A\u5F53\u4E3B\u670D\u52A1\u5668\u5B95\u673A\u540E\uFF0C\u9700\u8981\u624B\u52A8\u628A\u4E00\u53F0\u4ECE\u670D\u52A1\u5668\u5207\u6362\u4E3A\u4E3B\u670D\u52A1\u5668\uFF0C\u8FD9\u5C31\u9700\u8981\u4EBA\u5DE5\u5E72\u9884\uFF0C\u8D39\u4E8B\u8D39\u529B\uFF0C\u8FD8\u4F1A\u9020\u6210\u4E00\u6BB5\u65F6\u95F4\u5185\u670D\u52A1\u4E0D\u53EF\u7528\u3002\u8FD9\u4E0D\u662F\u4E00\u79CD\u63A8\u8350\u7684\u65B9\u5F0F\uFF0C\u66F4\u591A\u65F6\u5019\uFF0C\u6211\u4EEC\u4F18\u5148\u8003\u8651\u54E8\u5175\u6A21\u5F0F\u3002Redis\u4ECE2.8\u5F00\u59CB\u6B63\u5F0F\u63D0\u4F9B\u4E86Sentinel\uFF08\u54E8\u5175\uFF09 \u67B6\u6784\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002<strong>\u80FD\u591F\u540E\u53F0\u76D1\u63A7\u4E3B\u673A\u662F\u5426\u6545\u969C\uFF0C\u5982\u679C\u6545\u969C\u4E86\u6839\u636E\u6295\u7968\u6570\u81EA\u52A8\u5C06\u4ECE\u5E93\u8F6C\u6362\u4E3A\u4E3B\u5E93\u3002</strong></p><p>\u54E8\u5175\u6A21\u5F0F\u662F\u4E00\u79CD\u7279\u6B8A\u7684\u6A21\u5F0F\uFF0C\u9996\u5148Redis\u63D0\u4F9B\u4E86\u54E8\u5175\u7684\u547D\u4EE4\uFF0C\u54E8\u5175\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u8FDB\u7A0B\uFF0C\u4F5C\u4E3A\u8FDB\u7A0B\uFF0C\u5B83\u4F1A\u72EC\u7ACB\u8FD0\u884C\u3002\u5176\u539F\u7406\u662F\u54E8\u5175\u901A\u8FC7\u53D1\u9001\u547D\u4EE4\uFF0C\u7B49\u5F85Redis\u670D\u52A1\u5668\u54CD\u5E94\uFF0C\u4ECE\u800C\u76D1\u63A7\u8FD0\u884C\u7684\u591A\u4E2ARedis\u5B9E\u4F8B\u3002</p><p><img src="`+vn+'" alt=""></p><p>\u54E8\u5175\u7684\u4F5C\u7528\uFF1A</p><ul><li>\u901A\u8FC7\u53D1\u9001\u547D\u4EE4\uFF0C\u8BA9Redis\u670D\u52A1\u5668\u8FD4\u56DE\u76D1\u63A7\u5176\u8FD0\u884C\u72B6\u6001\uFF0C\u5305\u62EC\u4E3B\u670D\u52A1\u5668\u548C\u4ECE\u670D\u52A1\u5668\u3002</li><li>\u5F53\u54E8\u5175\u76D1\u6D4B\u5230master\u5B95\u673A\uFF0C\u4F1A\u81EA\u52A8\u5C06slave\u5207\u6362\u6210master\uFF0C\u7136\u540E\u901A\u8FC7\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F\u901A\u77E5\u5176\u4ED6\u7684\u4ECE\u670D\u52A1\u5668\uFF0C\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u8BA9\u5B83\u4EEC\u5207\u6362\u4E3B\u673A\u3002</li></ul><p>\u7136\u800C\u4E00\u4E2A\u54E8\u5175\u8FDB\u7A0B\u5BF9Redis\u670D\u52A1\u5668\u8FDB\u884C\u76D1\u63A7\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u95EE\u9898\uFF0C\u4E3A\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u591A\u4E2A\u54E8\u5175\u8FDB\u884C\u76D1\u63A7\u3002\u5404\u4E2A\u54E8\u5175\u4E4B\u95F4\u8FD8\u4F1A\u8FDB\u884C\u76D1\u63A7\uFF0C\u8FD9\u6837\u5C31\u5F62\u6210\u4E86<strong>\u591A\u54E8\u5175\u6A21\u5F0F</strong>\u3002</p><p><img src="'+hn+`" alt=""></p><p>\u5047\u8BBE\u4E3B\u670D\u52A1\u5668\u5B95\u673A\uFF0C\u54E8\u51751\u5148\u68C0\u6D4B\u5230\u8FD9\u4E2A\u7ED3\u679C\uFF0C\u7CFB\u7EDF\u5E76\u4E0D\u4F1A\u9A6C\u4E0A\u8FDB\u884Cfailover\u8FC7\u7A0B\uFF0C\u4EC5\u4EC5\u662F\u54E8\u51751\u4E3B\u89C2\u7684\u8BA4\u4E3A\u4E3B\u670D\u52A1\u5668\u4E0D\u53EF\u7528\uFF0C\u8FD9\u4E2A\u73B0\u8C61\u6210\u4E3A\u4E3B\u89C2\u4E0B\u7EBF\u3002\u5F53\u540E\u9762\u7684\u54E8\u5175\u4E5F\u68C0\u6D4B\u5230\u4E3B\u670D\u52A1\u5668\u4E0D\u53EF\u7528\uFF0C\u5E76\u4E14\u6570\u91CF\u8FBE\u5230\u4E00\u5B9A\u503C\u65F6\uFF0C\u90A3\u4E48\u54E8\u5175\u4E4B\u95F4\u5C31\u4F1A\u8FDB\u884C\u4E00\u6B21\u6295\u7968\uFF0C\u6295\u7968\u7684\u7ED3\u679C\u7531\u4E00\u4E2A\u54E8\u5175\u53D1\u8D77\uFF0C\u8FDB\u884Cfailover[\u6545\u969C\u8F6C\u79FB]\u64CD\u4F5C\u3002\u5207\u6362\u6210\u529F\u540E\uFF0C\u5C31\u4F1A\u901A\u8FC7\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F\uFF0C\u8BA9\u5404\u4E2A\u54E8\u5175\u628A\u81EA\u5DF1\u76D1\u63A7\u7684\u4ECE\u670D\u52A1\u5668\u5B9E\u73B0\u5207\u6362\u4E3B\u673A\uFF0C\u8FD9\u4E2A\u8FC7\u7A0B\u79F0\u4E3A<strong>\u5BA2\u89C2\u4E0B\u7EBF</strong>\u3002</p><h3 id="\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a> \u6D4B\u8BD5</h3><ol><li>\u914D\u7F6E\u54E8\u5175\u914D\u7F6E\u6587\u4EF6 sentinel.conf</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># sentinel monitor \u88AB\u76D1\u63A7\u7684\u540D\u79F0 host port 1</span>
sentinel monitor myredis <span class="token number">127.0</span>.0.1 <span class="token number">6379</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u540E\u9762\u7684\u8FD9\u4E2A\u6570\u5B571\uFF0C\u4EE3\u8868\u4E3B\u673A\u6302\u4E86\uFF0Cslave\u6295\u7968\u770B\u8BA9\u8C01\u63A5\u66FF\u6210\u4E3A\u4E3B\u673A\uFF0C\u7968\u6570\u6700\u591A\u7684\uFF0C\u5C31\u4F1A\u6210\u4E3A\u4E3B\u673A\uFF01</p><ol start="2"><li>\u542F\u52A8\u54E8\u5175\uFF01</li></ol><p><img src="`+gn+'" alt=""></p><ol start="3"><li>\u6B64\u65F6\u54E8\u5175\u76D1\u89C6\u7740\u6211\u4EEC\u7684\u4E3B\u673A6379\uFF0C\u5F53\u6211\u4EEC\u65AD\u5F00\u4E3B\u673A\u540E\uFF1A</li></ol><p><img src="'+fn+`" alt=""></p><h2 id="\u54E8\u5175\u6A21\u5F0F\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#\u54E8\u5175\u6A21\u5F0F\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> \u54E8\u5175\u6A21\u5F0F\u4F18\u7F3A\u70B9</h2><p>\u4F18\u70B9\uFF1A</p><ol><li>\u54E8\u5175\u96C6\u7FA4\uFF0C\u57FA\u4E8E\u4E3B\u4ECE\u590D\u5236\u6A21\u5F0F\uFF0C\u6240\u6709\u4E3B\u4ECE\u590D\u5236\u7684\u4F18\u70B9\uFF0C\u5B83\u90FD\u6709</li><li>\u4E3B\u4ECE\u53EF\u4EE5\u5207\u6362\uFF0C\u6545\u969C\u53EF\u4EE5\u8F6C\u79FB\uFF0C\u7CFB\u7EDF\u7684\u53EF\u7528\u6027\u66F4\u597D</li><li>\u54E8\u5175\u6A21\u5F0F\u662F\u4E3B\u4ECE\u6A21\u5F0F\u7684\u5347\u7EA7\uFF0C\u624B\u52A8\u5230\u81EA\u52A8\uFF0C\u66F4\u52A0\u5065\u58EE</li></ol><p>\u7F3A\u70B9\uFF1A</p><ol><li>Redis\u4E0D\u597D\u5728\u7EBF\u6269\u5BB9\uFF0C\u96C6\u7FA4\u5BB9\u91CF\u4E00\u65E6\u8FBE\u5230\u4E0A\u9650\uFF0C\u5728\u7EBF\u6269\u5BB9\u5C31\u5341\u5206\u9EBB\u70E6</li><li>\u5B9E\u73B0\u54E8\u5175\u6A21\u5F0F\u7684\u914D\u7F6E\u5176\u5B9E\u662F\u5F88\u9EBB\u70E6\u7684\uFF0C\u91CC\u9762\u6709\u5F88\u591A\u914D\u7F6E\u9879</li></ol><h2 id="\u54E8\u5175\u6A21\u5F0F\u7684\u5168\u90E8\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u54E8\u5175\u6A21\u5F0F\u7684\u5168\u90E8\u914D\u7F6E" aria-hidden="true">#</a> \u54E8\u5175\u6A21\u5F0F\u7684\u5168\u90E8\u914D\u7F6E</h2><p>\u5B8C\u6574\u7684\u54E8\u5175\u6A21\u5F0F\u914D\u7F6E\u6587\u4EF6 sentinel.conf</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Example sentinel.conf</span>
<span class="token comment">#\u54E8\u5175sentinel\u5B9E\u4F8B\u8FD0\u884C\u7684\u7AEF\u53E3 \u9ED8\u8BA426379</span>
port <span class="token number">26379</span>
<span class="token comment">#\u54E8\u5175sentinel\u7684\u5DE5\u4F5C\u76EE\u5F55</span>
<span class="token function">dir</span> /tmp
<span class="token comment">#\u54E8\u5175sentinel\u76D1\u63A7\u7684redis\u4E3B\u8282\u70B9\u7684 ip port</span>
<span class="token comment">#master-name  \u53EF\u4EE5\u81EA\u5DF1\u547D\u540D\u7684\u4E3B\u8282\u70B9\u540D\u5B57 \u53EA\u80FD\u7531\u5B57\u6BCDA-z\u3001\u6570\u5B570-9 \u3001\u8FD9\u4E09\u4E2A\u5B57\u7B26&quot;.-_&quot;\u7EC4\u6210\u3002</span>
<span class="token comment">#quorum \u5F53\u8FD9\u4E9Bquorum\u4E2A\u6570sentinel\u54E8\u5175\u8BA4\u4E3Amaster\u4E3B\u8282\u70B9\u5931\u8054 \u90A3\u4E48\u8FD9\u65F6 \u5BA2\u89C2\u4E0A\u8BA4\u4E3A\u4E3B\u8282\u70B9\u5931\u8054\u4E86</span>
<span class="token comment">#sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span>
sentinel monitor mymaster <span class="token number">127.0</span>.0.1 <span class="token number">6379</span> <span class="token number">1</span>
<span class="token comment">#\u5F53\u5728Redis\u5B9E\u4F8B\u4E2D\u5F00\u542F\u4E86requirepass foobared \u6388\u6743\u5BC6\u7801 \u8FD9\u6837\u6240\u6709\u8FDE\u63A5Redis\u5B9E\u4F8B\u7684\u5BA2\u6237\u7AEF\u90FD\u8981\u63D0\u4F9B\u5BC6\u7801</span>
<span class="token comment">#\u8BBE\u7F6E\u54E8\u5175sentinel \u8FDE\u63A5\u4E3B\u4ECE\u7684\u5BC6\u7801 \u6CE8\u610F\u5FC5\u987B\u4E3A\u4E3B\u4ECE\u8BBE\u7F6E\u4E00\u6837\u7684\u9A8C\u8BC1\u5BC6\u7801</span>
<span class="token comment">#sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span>
sentinel auth-pass mymaster MySUPER--secret-0123passw0rd
<span class="token comment">#\u6307\u5B9A\u591A\u5C11\u6BEB\u79D2\u4E4B\u540E \u4E3B\u8282\u70B9\u6CA1\u6709\u5E94\u7B54\u54E8\u5175sentinel \u6B64\u65F6 \u54E8\u5175\u4E3B\u89C2\u4E0A\u8BA4\u4E3A\u4E3B\u8282\u70B9\u4E0B\u7EBF \u9ED8\u8BA430\u79D2</span>
<span class="token comment">#sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span>
sentinel down-after-milliseconds mymaster <span class="token number">30000</span>
<span class="token comment">#\u8FD9\u4E2A\u914D\u7F6E\u9879\u6307\u5B9A\u4E86\u5728\u53D1\u751Ffailover\u4E3B\u5907\u5207\u6362\u65F6\u6700\u591A\u53EF\u4EE5\u6709\u591A\u5C11\u4E2Aslave\u540C\u65F6\u5BF9\u65B0\u7684master\u8FDB\u884C \u540C\u6B65\uFF0C</span>
<span class="token comment">#\u8FD9\u4E2A\u6570\u5B57\u8D8A\u5C0F\uFF0C\u5B8C\u6210failover\u6240\u9700\u7684\u65F6\u95F4\u5C31\u8D8A\u957F\uFF0C</span>
<span class="token comment">#\u4F46\u662F\u5982\u679C\u8FD9\u4E2A\u6570\u5B57\u8D8A\u5927\uFF0C\u5C31\u610F\u5473\u7740\u8D8A \u591A\u7684slave\u56E0\u4E3Areplication\u800C\u4E0D\u53EF\u7528\u3002</span>
<span class="token comment">#\u53EF\u4EE5\u901A\u8FC7\u5C06\u8FD9\u4E2A\u503C\u8BBE\u4E3A 1 \u6765\u4FDD\u8BC1\u6BCF\u6B21\u53EA\u6709\u4E00\u4E2Aslave \u5904\u4E8E\u4E0D\u80FD\u5904\u7406\u547D\u4EE4\u8BF7\u6C42\u7684\u72B6\u6001\u3002</span>
<span class="token comment">#sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span>
sentinel parallel-syncs mymaster <span class="token number">1</span>
<span class="token comment">#\u6545\u969C\u8F6C\u79FB\u7684\u8D85\u65F6\u65F6\u95F4 failover-timeout \u53EF\u4EE5\u7528\u5728\u4EE5\u4E0B\u8FD9\u4E9B\u65B9\u9762\uFF1A</span>
<span class="token comment">#1. \u540C\u4E00\u4E2Asentinel\u5BF9\u540C\u4E00\u4E2Amaster\u4E24\u6B21failover\u4E4B\u95F4\u7684\u95F4\u9694\u65F6\u95F4\u3002</span>
<span class="token comment">#2. \u5F53\u4E00\u4E2Aslave\u4ECE\u4E00\u4E2A\u9519\u8BEF\u7684master\u90A3\u91CC\u540C\u6B65\u6570\u636E\u5F00\u59CB\u8BA1\u7B97\u65F6\u95F4\u3002\u76F4\u5230slave\u88AB\u7EA0\u6B63\u4E3A\u5411\u6B63\u786E\u7684master\u90A3\u91CC\u540C\u6B65\u6570\u636E\u65F6\u3002</span>
<span class="token comment">#3.\u5F53\u60F3\u8981\u53D6\u6D88\u4E00\u4E2A\u6B63\u5728\u8FDB\u884C\u7684failover\u6240\u9700\u8981\u7684\u65F6\u95F4\u3002</span>
<span class="token comment">#4.\u5F53\u8FDB\u884Cfailover\u65F6\uFF0C\u914D\u7F6E\u6240\u6709slaves\u6307\u5411\u65B0\u7684master\u6240\u9700\u7684\u6700\u5927\u65F6\u95F4\u3002\u4E0D\u8FC7\uFF0C\u5373\u4F7F\u8FC7\u4E86\u8FD9\u4E2A\u8D85\u65F6\uFF0Cslaves\u4F9D\u7136\u4F1A\u88AB\u6B63\u786E\u914D\u7F6E\u4E3A\u6307\u5411master\uFF0C\u4F46\u662F\u5C31\u4E0D\u6309parallel-syncs\u6240\u914D\u7F6E\u7684\u89C4\u5219\u6765\u4E86</span>
<span class="token comment">#\u9ED8\u8BA4\u4E09\u5206\u949F</span>
<span class="token comment">#sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span>
sentinel failover-timeout mymaster <span class="token number">180000</span>
SCRIPTS EXECUTION
<span class="token comment">#\u914D\u7F6E\u5F53\u67D0\u4E00\u4E8B\u4EF6\u53D1\u751F\u65F6\u6240\u9700\u8981\u6267\u884C\u7684\u811A\u672C\uFF0C\u53EF\u4EE5\u901A\u8FC7\u811A\u672C\u6765\u901A\u77E5\u7BA1\u7406\u5458\uFF0C\u4F8B\u5982\u5F53\u7CFB\u7EDF\u8FD0\u884C\u4E0D\u6B63\u5E38\u65F6\u53D1\u90AE\u4EF6\u901A\u77E5\u76F8\u5173\u4EBA\u5458\u3002</span>
<span class="token comment">#\u5BF9\u4E8E\u811A\u672C\u7684\u8FD0\u884C\u7ED3\u679C\u6709\u4EE5\u4E0B\u89C4\u5219\uFF1A</span>
<span class="token comment">#\u82E5\u811A\u672C\u6267\u884C\u540E\u8FD4\u56DE1\uFF0C\u90A3\u4E48\u8BE5\u811A\u672C\u7A0D\u540E\u5C06\u4F1A\u88AB\u518D\u6B21\u6267\u884C\uFF0C\u91CD\u590D\u6B21\u6570\u76EE\u524D\u9ED8\u8BA4\u4E3A10</span>
<span class="token comment">#\u82E5\u811A\u672C\u6267\u884C\u540E\u8FD4\u56DE2\uFF0C\u6216\u8005\u6BD42\u66F4\u9AD8\u7684\u4E00\u4E2A\u8FD4\u56DE\u503C\uFF0C\u811A\u672C\u5C06\u4E0D\u4F1A\u91CD\u590D\u6267\u884C\u3002</span>
<span class="token comment">#\u5982\u679C\u811A\u672C\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u7531\u4E8E\u6536\u5230\u7CFB\u7EDF\u4E2D\u65AD\u4FE1\u53F7\u88AB\u7EC8\u6B62\u4E86\uFF0C\u5219\u540C\u8FD4\u56DE\u503C\u4E3A1\u65F6\u7684\u884C\u4E3A\u76F8\u540C\u3002</span>
<span class="token comment">#\u4E00\u4E2A\u811A\u672C\u7684\u6700\u5927\u6267\u884C\u65F6\u95F4\u4E3A60s\uFF0C\u5982\u679C\u8D85\u8FC7\u8FD9\u4E2A\u65F6\u95F4\uFF0C\u811A\u672C\u5C06\u4F1A\u88AB\u4E00\u4E2ASIGKILL\u4FE1\u53F7\u7EC8\u6B62\uFF0C\u4E4B\u540E\u91CD\u65B0\u6267\u884C\u3002</span>
<span class="token comment">#\u901A\u77E5\u578B\u811A\u672C:\u5F53sentinel\u6709\u4EFB\u4F55\u8B66\u544A\u7EA7\u522B\u7684\u4E8B\u4EF6\u53D1\u751F\u65F6\uFF08\u6BD4\u5982\u8BF4redis\u5B9E\u4F8B\u7684\u4E3B\u89C2\u5931\u6548\u548C\u5BA2\u89C2\u5931\u6548\u7B49\u7B49\uFF09\uFF0C\u5C06\u4F1A\u53BB\u8C03\u7528\u8FD9\u4E2A\u811A\u672C\uFF0C</span>
<span class="token comment">#\u8FD9\u65F6\u8FD9\u4E2A\u811A\u672C\u5E94\u8BE5\u901A\u8FC7\u90AE\u4EF6\uFF0CSMS\u7B49\u65B9\u5F0F\u53BB\u901A\u77E5\u7CFB\u7EDF\u7BA1\u7406\u5458\u5173\u4E8E\u7CFB\u7EDF\u4E0D\u6B63\u5E38\u8FD0\u884C\u7684\u4FE1\u606F\u3002\u8C03\u7528\u8BE5\u811A\u672C\u65F6\uFF0C\u5C06\u4F20\u7ED9\u811A\u672C\u4E24\u4E2A\u53C2\u6570\uFF0C</span>
<span class="token comment">#\u4E00\u4E2A\u662F\u4E8B\u4EF6\u7684\u7C7B\u578B\uFF0C</span>
<span class="token comment">#\u4E00\u4E2A\u662F\u4E8B\u4EF6\u7684\u63CF\u8FF0\u3002</span>
<span class="token comment">#\u5982\u679Csentinel.conf\u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E\u4E86\u8FD9\u4E2A\u811A\u672C\u8DEF\u5F84\uFF0C\u90A3\u4E48\u5FC5\u987B\u4FDD\u8BC1\u8FD9\u4E2A\u811A\u672C\u5B58\u5728\u4E8E\u8FD9\u4E2A\u8DEF\u5F84\uFF0C\u5E76\u4E14\u662F\u53EF\u6267\u884C\u7684\uFF0C\u5426\u5219sentinel\u65E0\u6CD5\u6B63\u5E38\u542F\u52A8\u6210\u529F\u3002</span>
<span class="token comment">#\u901A\u77E5\u811A\u672C</span>
<span class="token comment">#sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;</span>
sentinel notification-script mymaster /var/redis/notify.sh
<span class="token comment">#\u5BA2\u6237\u7AEF\u91CD\u65B0\u914D\u7F6E\u4E3B\u8282\u70B9\u53C2\u6570\u811A\u672C</span>
<span class="token comment">#\u5F53\u4E00\u4E2Amaster\u7531\u4E8Efailover\u800C\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u8FD9\u4E2A\u811A\u672C\u5C06\u4F1A\u88AB\u8C03\u7528\uFF0C\u901A\u77E5\u76F8\u5173\u7684\u5BA2\u6237\u7AEF\u5173\u4E8Emaster\u5730\u5740\u5DF2\u7ECF\u53D1\u751F\u6539\u53D8\u7684\u4FE1\u606F\u3002</span>
<span class="token comment">#\u4EE5\u4E0B\u53C2\u6570\u5C06\u4F1A\u5728\u8C03\u7528\u811A\u672C\u65F6\u4F20\u7ED9\u811A\u672C:</span>
<span class="token comment">#&lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span>
<span class="token comment">#\u76EE\u524D&lt;state&gt;\u603B\u662F\u201Cfailover\u201D,</span>
<span class="token comment">#&lt;role&gt;\u662F\u201Cleader\u201D\u6216\u8005\u201Cobserver\u201D\u4E2D\u7684\u4E00\u4E2A\u3002</span>
<span class="token comment">#\u53C2\u6570 from-ip, from-port, to-ip, to-port\u662F\u7528\u6765\u548C\u65E7\u7684master\u548C\u65B0\u7684master(\u5373\u65E7\u7684slave)\u901A\u4FE1\u7684</span>
<span class="token comment">#\u8FD9\u4E2A\u811A\u672C\u5E94\u8BE5\u662F\u901A\u7528\u7684\uFF0C\u80FD\u88AB\u591A\u6B21\u8C03\u7528\uFF0C\u4E0D\u662F\u9488\u5BF9\u6027\u7684\u3002</span>
<span class="token comment">#sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</span>
sentinel client-reconfig-script mymaster /var/redis/reconfig.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F13\u5B58\u7A7F\u900F\u4E0E\u96EA\u5D29" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58\u7A7F\u900F\u4E0E\u96EA\u5D29" aria-hidden="true">#</a> \u7F13\u5B58\u7A7F\u900F\u4E0E\u96EA\u5D29</h2><h3 id="\u7F13\u5B58\u7A7F\u900F" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58\u7A7F\u900F" aria-hidden="true">#</a> \u7F13\u5B58\u7A7F\u900F</h3><blockquote><p>\u5373\u67E5\u8BE2\u4E0D\u5230</p></blockquote><h3 id="\u6982\u5FF5-1" tabindex="-1"><a class="header-anchor" href="#\u6982\u5FF5-1" aria-hidden="true">#</a> \u6982\u5FF5</h3><p>\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7528\u6237\u8BF7\u6C42\u6570\u636E\u65F6\uFF0C\u4F1A\u5148\u5728\u7F13\u5B58(Redis)\u4E2D\u67E5\u627E\uFF0C\u82E5\u6CA1\u627E\u5230\u5373\u7F13\u5B58\u672A\u547D\u4E2D\uFF0C\u518D\u5728\u6570\u636E\u5E93\u4E2D\u8FDB\u884C\u67E5\u627E\uFF0C\u6570\u91CF\u5C11\u53EF\u80FD\u95EE\u9898\u4E0D\u5927\uFF0C\u53EF\u662F\u4E00\u65E6\u5927\u91CF\u7684\u8BF7\u6C42\u6570\u636E\uFF08\u4F8B\u5982\u79D2\u6740\u573A\u666F\uFF09\u7F13\u5B58\u90FD\u6CA1\u6709\u547D\u4E2D\u7684\u8BDD\uFF0C\u5C31\u4F1A\u5168\u90E8\u8F6C\u79FB\u5230\u6570\u636E\u5E93\u4E0A\uFF0C\u9020\u6210\u6570\u636E\u5E93\u6781\u5927\u7684\u538B\u529B\uFF0C\u5C31\u6709\u53EF\u80FD\u5BFC\u81F4\u6570\u636E\u5E93\u5D29\u6E83\u3002\u7F51\u7EDC\u5B89\u5168\u4E2D\u4E5F\u6709\u4EBA\u6076\u610F\u4F7F\u7528\u8FD9\u79CD\u624B\u6BB5\u8FDB\u884C\u653B\u51FB\u88AB\u79F0\u4E3A\u6D2A\u6C34\u653B\u51FB\u3002</p><p><img src="`+qn+'" alt=""></p><h3 id="\u89E3\u51B3\u65B9\u6848-1" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3\u65B9\u6848-1" aria-hidden="true">#</a> \u89E3\u51B3\u65B9\u6848</h3><h4 id="\u5E03\u9686\u8FC7\u6EE4\u5668" tabindex="-1"><a class="header-anchor" href="#\u5E03\u9686\u8FC7\u6EE4\u5668" aria-hidden="true">#</a> \u5E03\u9686\u8FC7\u6EE4\u5668</h4><p>\u5BF9\u6240\u6709\u53EF\u80FD\u67E5\u8BE2\u7684\u53C2\u6570\u4EE5Hash\u7684\u5F62\u5F0F\u5B58\u50A8\uFF0C\u4EE5\u4FBF\u5FEB\u901F\u786E\u5B9A\u662F\u5426\u5B58\u5728\u8FD9\u4E2A\u503C\uFF0C\u5728\u63A7\u5236\u5C42\u5148\u8FDB\u884C\u62E6\u622A\u6821\u9A8C\uFF0C\u6821\u9A8C\u4E0D\u901A\u8FC7\u76F4\u63A5\u6253\u56DE\uFF0C\u51CF\u8F7B\u4E86\u5B58\u50A8\u7CFB\u7EDF\u7684\u538B\u529B\u3002</p><p><img src="'+yn+'" alt=""></p><h4 id="\u7F13\u5B58\u7A7A\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58\u7A7A\u5BF9\u8C61" aria-hidden="true">#</a> \u7F13\u5B58\u7A7A\u5BF9\u8C61</h4><p>\u4E00\u6B21\u8BF7\u6C42\u82E5\u5728\u7F13\u5B58\u548C\u6570\u636E\u5E93\u4E2D\u90FD\u6CA1\u627E\u5230\uFF0C\u5C31\u5728\u7F13\u5B58\u4E2D\u65B9\u4E00\u4E2A\u7A7A\u5BF9\u8C61\u7528\u4E8E\u5904\u7406\u540E\u7EED\u8FD9\u4E2A\u8BF7\u6C42\u3002</p><p><img src="'+xn+'" alt=""></p><p>\u8FD9\u6837\u505A\u6709\u4E00\u4E2A\u7F3A\u9677\uFF1A\u5B58\u50A8\u7A7A\u5BF9\u8C61\u4E5F\u9700\u8981\u7A7A\u95F4\uFF0C\u5927\u91CF\u7684\u7A7A\u5BF9\u8C61\u4F1A\u8017\u8D39\u4E00\u5B9A\u7684\u7A7A\u95F4\uFF0C\u5B58\u50A8\u6548\u7387\u5E76\u4E0D\u9AD8\u3002\u89E3\u51B3\u8FD9\u4E2A\u7F3A\u9677\u7684\u65B9\u5F0F\u5C31\u662F\u8BBE\u7F6E\u8F83\u77ED\u8FC7\u671F\u65F6\u95F4</p><p>\u5373\u4F7F\u5BF9\u7A7A\u503C\u8BBE\u7F6E\u4E86\u8FC7\u671F\u65F6\u95F4\uFF0C\u8FD8\u662F\u4F1A\u5B58\u5728\u7F13\u5B58\u5C42\u548C\u5B58\u50A8\u5C42\u7684\u6570\u636E\u4F1A\u6709\u4E00\u6BB5\u65F6\u95F4\u7A97\u53E3\u7684\u4E0D\u4E00\u81F4\uFF0C\u8FD9\u5BF9\u4E8E\u9700\u8981\u4FDD\u6301\u4E00\u81F4\u6027\u7684\u4E1A\u52A1\u4F1A\u6709\u5F71\u54CD\u3002</p><h3 id="\u7F13\u5B58\u51FB\u7A7F" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58\u51FB\u7A7F" aria-hidden="true">#</a> \u7F13\u5B58\u51FB\u7A7F</h3><blockquote><p>\u5373\u91CF\u592A\u5927\uFF0C\u7F13\u5B58\u8FC7\u671F</p></blockquote><h3 id="\u6982\u5FF5-2" tabindex="-1"><a class="header-anchor" href="#\u6982\u5FF5-2" aria-hidden="true">#</a> \u6982\u5FF5</h3><p>\u76F8\u8F83\u4E8E\u7F13\u5B58\u7A7F\u900F\uFF0C\u7F13\u5B58\u51FB\u7A7F\u7684\u76EE\u7684\u6027\u66F4\u5F3A\uFF0C\u4E00\u4E2A\u5B58\u5728\u7684key\uFF0C\u5728\u7F13\u5B58\u8FC7\u671F\u7684\u4E00\u523B\uFF0C\u540C\u65F6\u6709\u5927\u91CF\u7684\u8BF7\u6C42\uFF0C\u8FD9\u4E9B\u8BF7\u6C42\u90FD\u4F1A\u51FB\u7A7F\u5230DB\uFF0C\u9020\u6210\u77AC\u65F6DB\u8BF7\u6C42\u91CF\u5927\u3001\u538B\u529B\u9AA4\u589E\u3002\u8FD9\u5C31\u662F\u7F13\u5B58\u88AB\u51FB\u7A7F\uFF0C\u53EA\u662F\u9488\u5BF9\u5176\u4E2D\u67D0\u4E2Akey\u7684\u7F13\u5B58\u4E0D\u53EF\u7528\u800C\u5BFC\u81F4\u51FB\u7A7F\uFF0C\u4F46\u662F\u5176\u4ED6\u7684key\u4F9D\u7136\u53EF\u4EE5\u4F7F\u7528\u7F13\u5B58\u54CD\u5E94\u3002</p><p>\u6BD4\u5982\u70ED\u641C\u6392\u884C\u4E0A\uFF0C\u4E00\u4E2A\u70ED\u70B9\u65B0\u95FB\u88AB\u540C\u65F6\u5927\u91CF\u8BBF\u95EE\u5C31\u53EF\u80FD\u5BFC\u81F4\u7F13\u5B58\u51FB\u7A7F\u3002</p><h3 id="\u89E3\u51B3\u65B9\u6848-2" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3\u65B9\u6848-2" aria-hidden="true">#</a> \u89E3\u51B3\u65B9\u6848</h3><ol><li>\u8BBE\u7F6E\u70ED\u70B9\u6570\u636E\u6C38\u4E0D\u8FC7\u671F</li></ol><p>\u8FD9\u6837\u5C31\u4E0D\u4F1A\u51FA\u73B0\u70ED\u70B9\u6570\u636E\u8FC7\u671F\u7684\u60C5\u51B5\uFF0C\u4F46\u662F\u5F53Redis\u5185\u5B58\u7A7A\u95F4\u6EE1\u7684\u65F6\u5019\u4E5F\u4F1A\u6E05\u7406\u90E8\u5206\u6570\u636E\uFF0C\u800C\u4E14\u6B64\u79CD\u65B9\u6848\u4F1A\u5360\u7528\u7A7A\u95F4\uFF0C\u4E00\u65E6\u70ED\u70B9\u6570\u636E\u591A\u4E86\u8D77\u6765\uFF0C\u5C31\u4F1A\u5360\u7528\u90E8\u5206\u7A7A\u95F4\u3002</p><ol start="2"><li>\u52A0\u4E92\u65A5\u9501(\u5206\u5E03\u5F0F\u9501)</li></ol><p>\u5728\u8BBF\u95EEkey\u4E4B\u524D\uFF0C\u91C7\u7528SETNX\uFF08set if not exists\uFF09\u6765\u8BBE\u7F6E\u53E6\u4E00\u4E2A\u77ED\u671Fkey\u6765\u9501\u4F4F\u5F53\u524Dkey\u7684\u8BBF\u95EE\uFF0C\u8BBF\u95EE\u7ED3\u675F\u518D\u5220\u9664\u8BE5\u77ED\u671Fkey\u3002\u4FDD\u8BC1\u540C\u65F6\u523B\u53EA\u6709\u4E00\u4E2A\u7EBF\u7A0B\u8BBF\u95EE\u3002\u8FD9\u6837\u5BF9\u9501\u7684\u8981\u6C42\u5C31\u5341\u5206\u9AD8\u3002</p><p><img src="'+Rn+'" alt=""></p><h3 id="\u7F13\u5B58\u96EA\u5D29" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58\u96EA\u5D29" aria-hidden="true">#</a> \u7F13\u5B58\u96EA\u5D29</h3><h3 id="\u6982\u5FF5-3" tabindex="-1"><a class="header-anchor" href="#\u6982\u5FF5-3" aria-hidden="true">#</a> \u6982\u5FF5</h3><p>\u5927\u91CF\u7684key\u8BBE\u7F6E\u4E86\u76F8\u540C\u7684\u8FC7\u671F\u65F6\u95F4\uFF0C\u5BFC\u81F4\u5728\u7F13\u5B58\u5728\u540C\u4E00\u65F6\u523B\u5168\u90E8\u5931\u6548\uFF0C\u9020\u6210\u77AC\u65F6DB\u8BF7\u6C42\u91CF\u5927\u3001\u538B\u529B\u9AA4\u589E\uFF0C\u5F15\u8D77\u96EA\u5D29\u3002</p><p>\u7F13\u5B58\u96EA\u5D29\uFF0C\u662F\u6307\u5728\u67D0\u4E00\u4E2A\u65F6\u95F4\u6BB5\uFF0C\u7F13\u5B58\u96C6\u4E2D\u8FC7\u671F\u5931\u6548\u3002Redis \u5B95\u673A\uFF01</p><p>\u4EA7\u751F\u96EA\u5D29\u7684\u539F\u56E0\u4E4B\u4E00\uFF0C\u6BD4\u5982\u5728\u5199\u672C\u6587\u7684\u65F6\u5019\uFF0C\u9A6C\u4E0A\u5C31\u8981\u5230\u53CC\u5341\u4E8C\u96F6\u70B9\uFF0C\u5F88\u5FEB\u5C31\u4F1A\u8FCE\u6765\u4E00\u6CE2\u62A2\u8D2D\uFF0C\u8FD9\u6CE2\u5546\u54C1\u65F6\u95F4\u6BD4\u8F83\u96C6\u4E2D\u7684\u653E\u5165\u4E86\u7F13\u5B58\uFF0C\u5047\u8BBE\u7F13\u5B58\u4E00\u4E2A\u5C0F\u65F6\u3002\u90A3\u4E48\u5230\u4E86\u51CC\u6668\u4E00\u70B9\u949F\u7684\u65F6\u5019\uFF0C\u8FD9\u6279\u5546\u54C1\u7684\u7F13\u5B58\u5C31\u90FD\u8FC7\u671F\u4E86\u3002\u800C\u5BF9\u8FD9\u6279\u5546\u54C1\u7684\u8BBF\u95EE\u67E5\u8BE2\uFF0C\u90FD\u843D\u5230\u4E86\u6570\u636E\u5E93\u4E0A\uFF0C\u5BF9\u4E8E\u6570\u636E\u5E93\u800C\u8A00\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5468\u671F\u6027\u7684\u538B\u529B\u6CE2\u5CF0\u3002\u4E8E\u662F\u6240\u6709\u7684\u8BF7\u6C42\u90FD\u4F1A\u8FBE\u5230\u5B58\u50A8\u5C42\uFF0C\u5B58\u50A8\u5C42\u7684\u8C03\u7528\u91CF\u4F1A\u66B4\u589E\uFF0C\u9020\u6210\u5B58\u50A8\u5C42\u4E5F\u4F1A\u6302\u6389\u7684\u60C5\u51B5\u3002</p><p><img src="'+Sn+'" alt=""></p><p>\u5176\u5B9E\u96C6\u4E2D\u8FC7\u671F\uFF0C\u5012\u4E0D\u662F\u975E\u5E38\u81F4\u547D\uFF0C\u6BD4\u8F83\u81F4\u547D\u7684\u7F13\u5B58\u96EA\u5D29\uFF0C\u662F\u7F13\u5B58\u670D\u52A1\u5668\u67D0\u4E2A\u8282\u70B9\u5B95\u673A\u6216\u65AD\u7F51\u3002\u56E0\u4E3A\u81EA\u7136\u5F62\u6210\u7684\u7F13\u5B58\u96EA\u5D29\uFF0C\u4E00\u5B9A\u662F\u5728\u67D0\u4E2A\u65F6\u95F4\u6BB5\u96C6\u4E2D\u521B\u5EFA\u7F13\u5B58\uFF0C\u8FD9\u4E2A\u65F6\u5019\uFF0C\u6570\u636E\u5E93\u4E5F\u662F\u53EF\u4EE5\u9876\u4F4F\u538B\u529B\u7684\u3002\u65E0\u975E\u5C31\u662F\u5BF9\u6570\u636E\u5E93\u4EA7\u751F\u5468\u671F\u6027\u7684\u538B\u529B\u800C\u5DF2\u3002\u800C\u7F13\u5B58\u670D\u52A1\u8282\u70B9\u7684\u5B95\u673A\uFF0C\u5BF9\u6570\u636E\u5E93\u670D\u52A1\u5668\u9020\u6210\u7684\u538B\u529B\u662F\u4E0D\u53EF\u9884\u77E5\u7684\uFF0C\u5F88\u6709\u53EF\u80FD\u77AC\u95F4\u5C31\u628A\u6570\u636E\u5E93\u538B\u57AE\u3002</p><h3 id="\u89E3\u51B3\u65B9\u6848-3" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3\u65B9\u6848-3" aria-hidden="true">#</a> \u89E3\u51B3\u65B9\u6848</h3><h4 id="redis\u9AD8\u53EF\u7528" tabindex="-1"><a class="header-anchor" href="#redis\u9AD8\u53EF\u7528" aria-hidden="true">#</a> redis\u9AD8\u53EF\u7528</h4><p>\u8FD9\u4E2A\u601D\u60F3\u7684\u542B\u4E49\u662F\uFF0C\u65E2\u7136redis\u6709\u53EF\u80FD\u6302\u6389\uFF0C\u90A3\u6211\u591A\u589E\u8BBE\u51E0\u53F0redis\uFF0C\u8FD9\u6837\u4E00\u53F0\u6302\u6389\u4E4B\u540E\u5176\u4ED6\u7684\u8FD8\u53EF\u4EE5\u7EE7\u7EED\u5DE5\u4F5C\uFF0C\u5176\u5B9E\u5C31\u662F\u642D\u5EFA\u7684\u96C6\u7FA4.</p><blockquote><p>\u5F02\u5730\u591A\u6D3B</p></blockquote><h4 id="\u9650\u6D41\u964D\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u9650\u6D41\u964D\u7EA7" aria-hidden="true">#</a> \u9650\u6D41\u964D\u7EA7</h4><p>\u8FD9\u4E2A\u89E3\u51B3\u65B9\u6848\u7684\u601D\u60F3\u662F\uFF0C\u5728\u7F13\u5B58\u5931\u6548\u540E\uFF0C\u901A\u8FC7\u52A0\u9501\u6216\u8005\u961F\u5217\u6765\u63A7\u5236\u8BFB\u6570\u636E\u5E93\u5199\u7F13\u5B58\u7684\u7EBF\u7A0B\u6570\u91CF\u3002\u6BD4\u5982\u5BF9\u67D0\u4E2Akey\u53EA\u5141\u8BB8\u4E00\u4E2A\u7EBF\u7A0B\u67E5\u8BE2\u6570\u636E\u548C\u5199\u7F13\u5B58\uFF0C\u5176\u4ED6\u7EBF\u7A0B\u7B49\u5F85\u3002</p><h4 id="\u6570\u636E\u9884\u70ED" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u9884\u70ED" aria-hidden="true">#</a> \u6570\u636E\u9884\u70ED</h4><p>\u6570\u636E\u52A0\u70ED\u7684\u542B\u4E49\u5C31\u662F\u5728\u6B63\u5F0F\u90E8\u7F72\u4E4B\u524D\uFF0C\u6211\u5148\u628A\u53EF\u80FD\u7684\u6570\u636E\u5148\u9884\u5148\u8BBF\u95EE\u4E00\u904D\uFF0C\u8FD9\u6837\u90E8\u5206\u53EF\u80FD\u5927\u91CF\u8BBF\u95EE\u7684\u6570\u636E\u5C31\u4F1A\u52A0\u8F7D\u5230\u7F13\u5B58\u4E2D\u3002\u5728\u5373\u5C06\u53D1\u751F\u5927\u5E76\u53D1\u8BBF\u95EE\u524D\u624B\u52A8\u89E6\u53D1\u52A0\u8F7D\u7F13\u5B58\u4E0D\u540C\u7684key\uFF0C\u8BBE\u7F6E\u4E0D\u540C\u7684\u8FC7\u671F\u65F6\u95F4\uFF0C\u8BA9\u7F13\u5B58\u5931\u6548\u7684\u65F6\u95F4\u70B9\u5C3D\u91CF\u5747\u5300\u3002</p><hr><p>\u6574\u7406\u4E0D\u6613\uFF0C\u8F6C\u8F7D\u8BF7\u6CE8\u660E\u51FA\u5904\u3002 \u76F8\u5173\u89C6\u9891\u6559\u7A0B\u53EF\u53C2\u8003\u72C2\u795E\u8BF4</p>',509);function Ln(An,Dn){const a=t("ExternalLinkIcon");return p(),i("div",null,[En,n("p",null,[n("a",wn,[On,l(a)])]),Bn])}const Nn=e(_n,[["render",Ln],["__file","Redis.html.vue"]]);export{Nn as default};
